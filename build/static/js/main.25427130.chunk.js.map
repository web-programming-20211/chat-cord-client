{"version":3,"sources":["firebase/index.js","Components/Message/Input.js","Components/Emoji/Emoji.js","Components/Emoji/EmojiIcon.js","Components/Message/Dialog.js","Components/Message/Dialogs.js","Components/ChatHeader.js","Components/ChatWindow.js","Components/Intro/Intro.js","Components/Login/Login.js","Components/Loading.js","Components/UserInformation/UserArea.js","Components/Room/Room.js","Components/Rooms/RoomsList.js","Components/Rooms/RoomsHeader.js","Components/Guide/Guide.js","Components/List/SearchRoom.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","Input","setDialogs","useState","message","setMessage","showEmoji","setShowEmoji","files","setFiles","setUrls","id","url","name","fileUrl","previewImage","setPreviewImage","limit","useMediaQuery","maxWidth","style","input","display","position","left","top","width","textField","fontSize","outline","paddingLeft","paddingBottom","paddingTop","marginLeft","backgroundColor","color","send","right","cursor","attach","image","icons","file","bottom","fileImage","preview","zIndex","height","background","boxShadow","borderRadius","padding","alignItems","thumbnail","deletePreviewIcon","fileName","addFile","placeItems","border","boxSizing","addIcon","sendMessage","length","promises","map","promise","Promise","resolve","reject","metadata","contentType","type","ref","put","then","snapshot","getDownloadURL","push","all","urls","prevState","PreviewSelectedFiles","item","onClick","filter","icon","src","alt","htmlFor","FormControl","fullWidth","sx","m","TextField","value","onKeyUp","e","key","variant","placeholder","onChange","target","autoComplete","InputProps","endAdornment","InputAdornment","visibility","multiple","i","newFile","console","log","Math","random","split","reader","FileReader","readAsDataURL","onloadend","result","onSelect","native","emojiSize","Emoji","dialog","react","self","show","setShow","emoji","transition","emojiList","flexDirection","allEmoji","reaction","reactionId","_id","onMouseLeave","EmojiIcon","emojiIndex","marginRight","GetEmoji","Icons","reactions","paddingRight","iconsInfo","from","reaction_type","Dialog","onDelete","room","socket","widget","setWidget","setReaction","setSelf","showTime","setShowTime","selfAndCreator","setSelfAndCreator","fileNumber","setFileNumber","dialogDiv","marginBottom","bubble","margin","avatar","marginTop","flexShrink","opacity","widgetItem","deleteIcon","pinIcon","container","rowGap","reply","dialogDivInfoNameTime","dialogDivInfoName","fontFamily","fontWeight","dialogDivInfoTime","dialogDivInfoMessageWidget","dialogDivInfoMessage","dialogDivInfoFiles","gridTemplateColumns","gap","des","WebkitLineClamp","WebkitBoxOrient","overflow","textOverflow","workBreak","useEffect","on","return_dialog","data","cookie","Cookies","get","index","indexOf","slice","userId","creator","off","axios","post","withCredentials","onMouseEnter","size","username","moment","createdAt","calendar","content","format","pop","classList","toggle","controls","justifyContent","href","rel","objectFit","reaction_id","new_cookie","tmp","pre_react","every","findIndex","user","splice","emit","Dialogs","dialogs","deleteMessage","MessEnding","useRef","current","scrollIntoView","behavior","TabPane","Tabs","ChatHeader","userOnlines","leave","users","setUsers","setRoom","visible","setVisible","updateVisible","setUpdateVisible","pinnedMessage","setPinnedMessage","showPinnedMessage","setShowPinnedMessage","roomAvatarPreview","setRoomAvatarPreview","roomAvatar","setRoomAvatar","currentUser","description","isPrivate","roomUpdateInfo","setRoomUpdateInfo","setIsPrivate","onClose","handleUpdateRoomInfo","a","roomUpdateInfo_","storageRef","update","toast","success","msg","error","response","chatHeader","pinMessageContainer","pinMessageIcon","chatInfo","chatName","numberOfUser","chatTool","tuneIcon","roomInfo","roomTitle","lineHeight","roomName","roomDescription","roomShortId","line","borderBottom","media","overflowY","mediaGrid","members","member","leaveRoom","leaveRoomIcon","with","leaveRoomText","dot","infoIcon","buttonEditDrawer","buttonUpdateDrawer","roomAvatarEdit","plusIconContainer","plusIcon","removeIcon","submitButton","Option","Select","selectBefore","defaultValue","res","pinnedMessages","roomId","r","at","onFinish","values","usersList","first","emails","join","add","addonBefore","placement","extra","accept","newRoomAvatar","copy","shortId","labelCol","span","wrapperCol","Item","label","rules","required","defaultChecked","checkedChildren","unCheckedChildren","pre","prevRoomUpdateInfo","offset","htmlType","defaultActiveKey","tab","List","fields","remove","fieldKey","restField","align","block","includes","fullname","pinMessageInfo","pinMessageTitle","pinMessageContent","pinMessageAvatar","pinMessageName","pinMessageContentText","ChatWindow","setLastMsgRoomId","rooms","setRooms","currentRoom","newMessage","setNewMessage","setUserOnlines","ctRoom","temp","d","Intro","begin","setBegin","text","transform","setTimeout","className","configure","autoClose","draggable","POSITION","BOTTOM_RIGHT","Login","logIn","invalid","errorToggle","setError","email","password","setUser","hover","setHover","code","verifyUser","setUserVerify","formId","setFormId","div","button","loginForm","signupForm","header","createAccount","buttons","forms","textAlign","alertText","alert","registation","status","catch","verify","noValidate","startAdornment","Button","preventDefault","Loading","CircularProgress","useStyles","makeStyles","theme","large","spacing","UserArea","logout","classes","userAvatarPreview","setUserAvatarPreview","userInfo","setUserInfo","userAvatar","setUserAvatar","handleEditUserInfo","handleUpdateUserInfo","userInfoToUpdate","userInformation","alignContent","info","flexGrow","fontStyle","userAvaterEdit","Avatar","closable","title","onCancel","footer","newUserAvatar","pattern","Password","getFieldValue","validator","_","Error","small","Room","lastMsgRoomId","choosen","leaveHandle","roomManage","option","setOption","lastMsg","setLastMsg","lastMsgTime","setLastMsgTime","updateMsg","setUpdateMsg","room_container","maxHeight","roomMessage","roomMessageName","roomMessageLastMessage","messageTime","roomOption","private","lastMessage","lastMessageDate","fromNow","RoomsList","joinRoom","switchRoom","RoomsHeader","findRoom","handleSearchRoom","visibleCreate","setVisibleCreate","visibleJoin","setVisibleJoin","setShortId","roomHeaderContainer","addUser","hideModalCreate","hideModalJoin","Guide","SearchRoom","resultRoom","setResultRoom","styles","inputSection","borderColor","searchRoom","toLowerCase","defaults","baseURL","process","io","connect","App","connected","setConnect","authenticated","setAuthenticated","setPanel","setCurrentRoom","login","setLogin","showSearchRoom","setShowSearchRoom","float","undefined","set","listOfRooom","newRoom","window","location","reload","once","el","err","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.25427130.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCBJRfaIq-9QJMSreqGgbYErDHLbhv1naU\",\r\n  authDomain: \"chat-cord-712bf.firebaseapp.com\",\r\n  projectId: \"chat-cord-712bf\",\r\n  storageBucket: \"chat-cord-712bf.appspot.com\",\r\n  messagingSenderId: \"196707948525\",\r\n  appId: \"1:196707948525:web:c2690d98f36a957b0479e4\",\r\n  measurementId: \"G-WXRTH429VW\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\nconst storage = firebase.storage()\r\n\r\nexport { storage, firebase as default }\r\n","import SendIcon from '@material-ui/icons/Send'\r\nimport { useState } from 'react'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport { TextField, FormControl, InputAdornment } from \"@material-ui/core\"\r\n\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\n\r\nimport { storage } from \"../../firebase/index\"\r\nimport { Icon } from '@iconify/react'\r\n\r\nconst Input = ({ setDialogs }) => {\r\n    const [message, setMessage] = useState('')\r\n    const [showEmoji, setShowEmoji] = useState(false)\r\n    const [files, setFiles] = useState([]);\r\n    const [urls, setUrls] = useState([]);\r\n    const [previewImage, setPreviewImage] = useState([{ id: null, url: null, name: null, fileUrl: null }]);\r\n\r\n    const limit = useMediaQuery({ maxWidth: 900 })\r\n    const limit2 = useMediaQuery({ maxWidth: 600 })\r\n    const style = {\r\n        input: {\r\n            display: 'block',\r\n            position: 'relative',\r\n            // right: '-16px',\r\n            // bottom: '16px',\r\n            // borderSizing: 'border-box',\r\n            left: '10px',\r\n            top: '20px',\r\n            width: '108%',\r\n\r\n        },\r\n\r\n        textField: {\r\n            width: limit2 ? '60%' : limit ? '70%' : '90%',\r\n            // width: '90%',\r\n            fontSize: 'x-large',\r\n            outline: 'none',\r\n            paddingLeft: '20px',\r\n            paddingBottom: '10px',\r\n            paddingTop: '10px',\r\n            marginLeft: '30px',\r\n            backgroundColor: 'transparent',\r\n            color: '#FDFDFD',\r\n        },\r\n\r\n        send: {\r\n            position: 'absolute',\r\n            right: 10,\r\n            cursor: 'pointer',\r\n            color: '#6082B6',\r\n            fontSize: '30px',\r\n        },\r\n\r\n        attach: {\r\n            position: 'absolute',\r\n            right: 100,\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        image: {\r\n            position: 'absolute',\r\n            right: 50,\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        icons: {\r\n            fontSize: '30px',\r\n            position: 'absolute',\r\n            left: -45,\r\n            color: '#6082B6',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        file: {\r\n            color: '#6082B6',\r\n            fontSize: '30px',\r\n            position: 'absolute',\r\n            cursor: 'pointer',\r\n            right: 45,\r\n            // left: 12,\r\n            bottom: 14\r\n        },\r\n\r\n        fileImage: {\r\n            color: '#6082B6',\r\n            fontSize: '30px',\r\n            position: 'absolute',\r\n            cursor: 'pointer',\r\n            right: 50,\r\n            // left: 12,\r\n            bottom: 14\r\n        },\r\n\r\n        preview: {\r\n            zIndex: 1,\r\n            position: 'absolute',\r\n            width: '100%',\r\n            height: '200px',\r\n            right: '1px',\r\n            bottom: '60px',\r\n            background: '#6588DE',\r\n            boxShadow: '0px 8px 40px rgba(0, 72, 251, 0.3)',\r\n            borderRadius: '14px',\r\n            padding: '20px',\r\n            display: 'flex',\r\n            // justifyContent: 'center',\r\n            alignItems: 'center',\r\n        },\r\n\r\n        thumbnail: {\r\n            width: '100px',\r\n            height: '100px',\r\n            borderRadius: '10px'\r\n        },\r\n\r\n        deletePreviewIcon: {\r\n            color: 'red',\r\n            fontSize: '20px',\r\n            cursor: 'pointer',\r\n            position: 'relative',\r\n            top: '-56px',\r\n        },\r\n\r\n        fileName: {\r\n            position: 'relative',\r\n            left: '50px',\r\n            top: '5px',\r\n            color: 'white'\r\n        },\r\n\r\n        addFile: {\r\n            display: 'grid',\r\n            placeItems: 'center',\r\n            position: 'relative',\r\n            bottom: 18,\r\n            left: 18,\r\n            width: '100px',\r\n            height: '100px',\r\n            borderRadius: '10px',\r\n            border: '1px dashed #F9FBFB',\r\n            boxSizing: 'border-box',\r\n            // bottom: '10px'\r\n        },\r\n\r\n        addIcon: {\r\n            fontSize: '50px',\r\n            color: '#F9FBFB',\r\n        }\r\n    }\r\n\r\n    const handleEmojiSelect = (e) => { setMessage((message) => (message += e.native)) }\r\n\r\n    const deletePreview = (id) => {\r\n        setPreviewImage(previewImage.filter(item => item.id !== id))\r\n        // setPreviewFile(previewFile.filter(item => item.id !== id))\r\n        setFiles(files.filter(item => item.id !== id))\r\n    }\r\n\r\n    const handleImageChange = (e) => {\r\n        // convert to base64\r\n        for (let i = 0; i < e.target.files.length; i++) {\r\n            const newFile = e.target.files[i]\r\n            console.log('newFile', newFile.type)\r\n            newFile[\"id\"] = Math.random()\r\n            let fileUrl = ''\r\n            let name = ''\r\n            // check file type is not image\r\n            if (newFile.type.split('/')[0] !== 'image') {\r\n                fileUrl = 'file.png'\r\n                name = `file ${i + 1}`\r\n            } else {\r\n                fileUrl = null\r\n                name = `image ${i + 1}`\r\n            }\r\n\r\n\r\n            const reader = new FileReader()\r\n            reader.readAsDataURL(newFile)\r\n            reader.onloadend = () => {\r\n                setPreviewImage((prevState) => [...prevState, { id: newFile[\"id\"], url: reader.result, name, fileUrl }])\r\n            }\r\n            setFiles((prevState) => [...prevState, newFile])\r\n        }\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        if (message.length > 0 || files.length > 0) {\r\n            const promises = []\r\n            files.map((file) => {\r\n                const promise = new Promise((resolve, reject) => {\r\n                    const metadata = {\r\n                        contentType: file.type\r\n                    }\r\n                    const storageRef = storage.ref(`files/${file.name}`)\r\n                    storageRef.put(file, metadata).then((snapshot) => {\r\n                        snapshot.ref.getDownloadURL().then((url) => {\r\n                            resolve(url)\r\n                        })\r\n                    })\r\n                })\r\n                promises.push(promise)\r\n            })\r\n            Promise.all(promises).then((urls) => {\r\n                setUrls((prevState) => [...prevState, urls])\r\n                setDialogs(message, urls)\r\n            })\r\n        }\r\n        // setPreviewFile([])\r\n        setPreviewImage([])\r\n        setFiles([])\r\n    }\r\n    const PreviewSelectedFiles = () => {\r\n        if (previewImage) {\r\n            return (\r\n                <div style={style.preview}>\r\n                    {previewImage.map((item) => {\r\n                        return (\r\n                            <div key={item.id}>\r\n                                <Icon onClick={() => deletePreview(item.id)} style={style.deletePreviewIcon} icon=\"ep:circle-close\" />\r\n                                <img style={style.thumbnail} src={item.fileUrl ? item.fileUrl : item.url} alt=\"thumb\" />\r\n                                <p style={style.fileName}>{item.name}</p>\r\n\r\n                            </div>\r\n                        )\r\n                    })}\r\n                    <div style={style.addFile}>\r\n                        <label htmlFor=\"files\"><Icon style={style.addIcon} icon=\"carbon:add-alt\" /></label>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div style={style.input}>\r\n            <FormControl fullWidth sx={{ m: 1 }}>\r\n                <TextField\r\n                    style={style.textField}\r\n                    value={message}\r\n                    onKeyUp={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                            sendMessage()\r\n                            setMessage('')\r\n                        }\r\n                    }}\r\n                    id=\"outlined-basic\"\r\n                    variant=\"outlined\"\r\n                    placeholder='Type a new message...'\r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    autoComplete=\"off\"\r\n                    InputProps={{\r\n                        endAdornment: (\r\n                            <InputAdornment position='end'>\r\n                                {/* <SendIcon\r\n                                    onClick={() => {\r\n                                        sendMessage()\r\n                                        setMessage('')\r\n                                    }}\r\n                                    color='primary'\r\n                                    fontSize='large'\r\n                                    style={style.send}\r\n                                /> */}\r\n                                <Icon onClick={() => {\r\n                                    sendMessage()\r\n                                    setMessage('')\r\n                                }}\r\n\r\n                                    style={style.send} icon=\"akar-icons:send\" />\r\n\r\n                                <Icon icon=\"fluent:emoji-24-regular\" style={style.icons} onClick={() => { setShowEmoji(!showEmoji) }}></Icon>\r\n                                <label htmlFor=\"files\"><Icon style={style.fileImage} icon=\"akar-icons:image\" /></label>\r\n                                <input id=\"files\" style={{ visibility: \"hidden\" }} type=\"file\" multiple onChange={handleImageChange} />\r\n                                {/* <label htmlFor=\"files\"><Icon style={style.file} icon=\"eva:attach-fill\" /></label>\r\n                                <input id=\"files\" style={{ visibility: \"hidden\" }} type=\"file\" accept=\".pdf, .txt, .docx\" multiple onChange={handleFileChange} /> */}\r\n                                {files.length > 0 && <PreviewSelectedFiles />}\r\n                                {showEmoji && (\r\n                                    <div style={{ position: \"fixed\", bottom: \"80px\", left: \"20%\", zIndex: \"1\" }}>\r\n                                        <Picker\r\n                                            onSelect={handleEmojiSelect}\r\n                                            emojiSize={20} />\r\n                                    </div>\r\n                                )}\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                />\r\n            </FormControl>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Input","import EmojiEmotionsOutlinedIcon from '@material-ui/icons/EmojiEmotionsOutlined';\r\nimport { useState } from 'react'\r\n\r\nconst Emoji = ({ dialog, react, self }) => {\r\n    const [show, setShow] = useState(false)\r\n\r\n    const style = {\r\n        emoji: {\r\n            borderRadius: '50%',\r\n            padding: '1px',\r\n            cursor: 'pointer',\r\n            transition: 'background 300ms ease-out',\r\n        },\r\n\r\n        emojiList: {  \r\n            display: 'flex',\r\n            position: 'absolute',\r\n            top: -16,\r\n            right: self ? 2 : 'none',\r\n            flexDirection: self ? 'row-reverse' : 'row',\r\n        },\r\n\r\n        allEmoji: { \r\n            position: 'relative',   \r\n        }\r\n    }\r\n\r\n    const setEmoji = () => {\r\n        if (show)\r\n            setShow(false)\r\n        else\r\n            setShow(true)\r\n    }\r\n\r\n    const reaction = (reactionId) => {\r\n        react(reactionId, dialog._id)\r\n    }\r\n\r\n    return (\r\n        <div  style={style.allEmoji} onMouseLeave={() => setShow(false)}>\r\n            {\r\n                show && <div style={style.emojiList}>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(1)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(2)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(3)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(4)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(5)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(6)}></div>\r\n                </div>\r\n            }\r\n            <EmojiEmotionsOutlinedIcon\r\n                style={style.emoji}\r\n                onClick={() => setEmoji()}\r\n            ></EmojiEmotionsOutlinedIcon>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Emoji","const EmojiIcon = ({emojiIndex}) => {\r\n    const style = {\r\n        marginRight: '2px',\r\n        cursor: 'pointer',\r\n        fontSize: 'small'\r\n    }\r\n    const GetEmoji = () => {\r\n        switch (emojiIndex)\r\n        {\r\n            case 1:\r\n                return <div style={style}></div>\r\n            case 2:\r\n                return <div style={style}></div>\r\n            case 3:\r\n                return <div style={style}></div>\r\n            case 4:\r\n                return <div style={style}></div>\r\n            case 5:\r\n                return <div style={style}></div>\r\n            case 6:\r\n                return <div style={style}></div>\r\n        }\r\n    }\r\n    return (\r\n        <GetEmoji></GetEmoji>\r\n    )\r\n}\r\n\r\nexport default EmojiIcon","// import Avatar from '@material-ui/core/Avatar'\r\nimport { useState, useEffect } from 'react'\r\nimport Emoji from '../Emoji/Emoji';\r\nimport EmojiIcon from '../Emoji/EmojiIcon';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport PushPinIcon from '@mui/icons-material/PushPin';\r\nimport Cookies from 'js-cookie';\r\nimport axios from 'axios'\r\nimport moment from 'moment';\r\n\r\nimport { Avatar } from 'antd';\r\n\r\n\r\nconst Icons = ({ reactions, self }) => {\r\n\r\n    const style = {\r\n        icons: {\r\n            display: 'flex',\r\n            position: 'absolute',\r\n            right: self && 0,\r\n            left: !self && 0,\r\n            bottom: -9,\r\n            borderRadius: '25px',\r\n            backgroundColor: '#aaa',\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={style.iconsInfo}>\r\n            <div style={style.icons}>\r\n                {reactions.map((reaction) => {\r\n                    if (reaction.from.length !== 0) {\r\n                        return <EmojiIcon key={reaction.reaction_type} emojiIndex={reaction.reaction_type}></EmojiIcon>\r\n                    }\r\n                    return null\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst Dialog = ({ dialog, onDelete, room, socket }) => {\r\n    const [widget, setWidget] = useState(false)\r\n    const [enter, setEnter] = useState(false)\r\n    const [reactions, setReaction] = useState([])\r\n    const [self, setSelf] = useState(null)\r\n    const [showTime, setShowTime] = useState(false)\r\n    const [selfAndCreator, setSelfAndCreator] = useState(null)\r\n    const [fileNumber, setFileNumber] = useState(0)\r\n\r\n    const style = {\r\n        dialogDiv: {\r\n            width: '95%',\r\n            position: 'relative',\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'row',\r\n            marginLeft: '20px',\r\n            marginRight: '20px',\r\n            alignItems: 'flex-start',\r\n            padding: '0px',\r\n            marginBottom: '30px',\r\n        },\r\n\r\n        bubble: {\r\n            backgroundColor: self ? '#32a6b8' : '#c27f67',\r\n            color: '#ffffff',\r\n            padding: '5px 10px',\r\n            margin: '0px',\r\n            borderRadius: '25px',\r\n            maxWidth: '100%',\r\n            position: 'relative',\r\n        },\r\n\r\n        avatar: {\r\n            position: 'relative',\r\n            marginTop: '15px',\r\n            background: `#${dialog.from.color}`,\r\n            flexShrink: 0,\r\n        },\r\n\r\n        widget: {\r\n            flexShrink: 0,\r\n            opacity: widget ? 1 : 0,\r\n            transition: 'opacity 250ms',\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'flex',\r\n            flexShrink: 0,\r\n        },\r\n\r\n        widgetItem: {\r\n            cursor: 'pointer',\r\n            borderRadius: '50%',\r\n        },\r\n\r\n        deleteIcon: {\r\n            borderRadius: '50%',\r\n            padding: '1px',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        pinIcon: {\r\n            borderRadius: '50%',\r\n            padding: '1px',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        container: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: self ? 'flex-end' : 'flex-start',\r\n            rowGap: '1em',\r\n            padding: '10px',\r\n            borderRadius: '14px',\r\n        },\r\n\r\n        reply: {\r\n            display: 'block',\r\n        },\r\n\r\n        dialogDivInfoNameTime: {\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'flex',\r\n            alignItems: 'baseline',\r\n            width: '100%',\r\n            marginBottom: '-10px',\r\n        },\r\n        dialogDivInfoName: {\r\n            fontFamily: 'Poppins',\r\n            color: '#52585D',\r\n            fontSize: '20px',\r\n            fontWeight: '600',\r\n            marginLeft: self ? '10px' : '0px',\r\n        },\r\n        dialogDivInfoTime: {\r\n            fontFamily: 'Poppins',\r\n            opacity: showTime ? 1 : 0,\r\n            transition: 'opacity 250ms',\r\n            color: '#52585D',\r\n            fontSize: '16px',\r\n            marginLeft: self ? '0px' : '10px',\r\n        },\r\n\r\n        dialogDivInfoMessageWidget: {\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'flex',\r\n        },\r\n\r\n        dialogDivInfoMessage: {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: self ? 'flex-end' : 'flex-start',\r\n            margin: '0xp',\r\n        },\r\n\r\n        dialogDivInfoFiles: {\r\n            display: 'grid',\r\n            gridTemplateColumns: fileNumber === 1 ? 'repeat(1, 1fr)' : fileNumber == 2 ? 'repeat(2, 1fr)' : 'repeat(3, 1fr)',\r\n            gap: '10px',\r\n        }, \r\n\r\n        des : {\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '150px',\r\n            workBreak: 'break-word',\r\n        }\r\n    }\r\n\r\n    const react = (reaction_id, id) => {\r\n        const cookie = Cookies.get('userId')\r\n        const index = cookie.indexOf('\"')\r\n        const new_cookie = cookie.slice(index + 1, cookie.length - 1)\r\n\r\n        const tmp = [...reactions]\r\n        let pre_react = 0\r\n\r\n        tmp.every(react => {\r\n            const index = react.from.findIndex(user => user.userId === new_cookie)\r\n            if (index !== -1) {\r\n                react.from.splice(index, 1)\r\n                pre_react = react.reaction_type\r\n                return false\r\n            }\r\n            return true\r\n        })\r\n\r\n        if (pre_react !== reaction_id) {\r\n            const index = tmp.findIndex(react => react.reaction_type === reaction_id)\r\n            if (index !== -1) {\r\n                tmp[index].from.push({ userId: new_cookie, username: ' ' })\r\n            } else {\r\n                tmp.push({\r\n                    reaction_type: reaction_id,\r\n                    from: [{\r\n                        userId: new_cookie,\r\n                        username: ' '\r\n                    }]\r\n                })\r\n            }\r\n        }\r\n\r\n        setReaction([...tmp])\r\n\r\n        socket.emit('get-reaction', dialog, reaction_id, new_cookie, room._id)\r\n    }\r\n\r\n    const setPin = () => {\r\n        socket.emit('set-pin', dialog, room._id)\r\n    }\r\n\r\n    useEffect(() => {\r\n        socket.on('return-reaction', (return_dialog) => {\r\n            if (dialog._id === return_dialog._id) {\r\n                setReaction(return_dialog.data)\r\n            }\r\n        })\r\n\r\n        if (self === null) {\r\n            const cookie = Cookies.get('userId')\r\n            const index = cookie.indexOf('\"')\r\n            setSelf(cookie.slice(index + 1, cookie.length - 1) === dialog.from.userId)\r\n            if (cookie.slice(index + 1, cookie.length - 1) === room.creator)\r\n                setSelfAndCreator(true)\r\n        }\r\n\r\n        return () => {\r\n            socket.off('return-reaction')\r\n        }\r\n    }, [dialog])\r\n\r\n\r\n    useEffect(() => {\r\n        axios.post('/reaction/retrieve', { id: dialog._id }, { withCredentials: true }).then(result => {\r\n            setReaction(result.data.data)\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setFileNumber(dialog.urls.length)\r\n    }, [])\r\n\r\n    return (\r\n        <div style={style.dialogDiv} onMouseEnter={() => setShowTime(true)} onMouseLeave={() => setShowTime(false)}>\r\n            {!self && <Avatar size={60} style={style.avatar} src={dialog.from.avatar}></Avatar>}\r\n            {self && <Avatar size={60} style={style.avatar} src={dialog.from.avatar}></Avatar>}\r\n            <div style={style.container} onMouseEnter={() => setWidget(true)} onMouseLeave={() => setWidget(false)}>\r\n                {self && <div style={style.dialogDivInfoNameTime}>\r\n                    <div style={style.dialogDivInfoName}>{dialog.from.username}</div>\r\n                    <div style={style.dialogDivInfoTime}>{moment(dialog.createdAt).calendar()}</div>\r\n                </div>}\r\n                {!self && <div style={style.dialogDivInfoNameTime}>\r\n                    <div style={style.dialogDivInfoName}>{dialog.from.username}</div>\r\n                    <div style={style.dialogDivInfoTime}>{moment(dialog.createdAt).calendar()}</div>\r\n                </div>}\r\n\r\n                <div style={style.dialogDivInfoMessageWidget}>\r\n                    <div style={style.dialogDivInfoMessage}>\r\n                        {dialog.content && <p style={style.bubble}>{dialog.content}</p>}\r\n                        <Icons reactions={reactions} self={self} />\r\n                        <div style={style.dialogDivInfoFiles}>\r\n                            {\r\n                                dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                    let format = url.split('.').pop().split('?')[0]\r\n                                    if (format === 'mp4') {\r\n                                        return (\r\n                                            <video key={index} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} style={{ width: '500px', marginBottom: '10px', transition: '1s' }} controls>\r\n                                                <source src={url} type=\"video/mp4\" />\r\n                                            </video>\r\n                                        )\r\n                                    } else if (format === 'pdf') {\r\n                                        return (\r\n                                            <a style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                <img src='pdf_file_icon.png' style={{ width: '50px', marginBottom: '10px', marginRight: '10px' }} />\r\n                                                <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                            </a>\r\n                                        )\r\n                                    } else if (format === 'docx' || format === 'doc') {\r\n                                        return (\r\n                                            <a style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                <img src='docx_file_icon.png' style={{ width: '50px', marginBottom: '10px', marginRight: '10px', }} />\r\n                                                <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                            </a>\r\n                                        )\r\n                                    }\r\n                                    else if (format === 'jpg' || format === 'png' || format === 'jpeg') {\r\n                                        return (\r\n                                            <img key={index} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} src={url} style={{ width: '100%', height: '150px', objectFit: 'cover', marginBottom: '10px', transition: '1s' }} />\r\n                                        )\r\n                                    }\r\n                                })\r\n                                \r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={style.widget}>\r\n                        <Emoji dialog={dialog} react={react} self={self}></Emoji>\r\n                        <PushPinIcon style={style.pinIcon} onClick={() => {\r\n                            setPin()\r\n                        }}></PushPinIcon>\r\n                        {(self || selfAndCreator) &&\r\n                            <DeleteIcon\r\n                                style={style.deleteIcon}\r\n                                onClick={() => onDelete(dialog, room.creator)}\r\n                            >\r\n                            </DeleteIcon>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialog","import Dialog from './Dialog'\r\nimport { useEffect, useRef } from 'react'\r\n// import { padding } from '@mui/system'\r\n\r\nconst Dialogs = ({socket, room, dialogs, deleteMessage}) => {\r\n    const style = {\r\n        display: 'block',\r\n        width: '100%',\r\n        height: '77vh',\r\n        // backgroundColor: 'rgb(227, 246, 252)',\r\n        // borderRadius: '14px',\r\n        overflow: 'auto',\r\n        margin: '10px 0px 0px 10px',\r\n    }\r\n\r\n    const MessEnding = useRef(null)\r\n\r\n    useEffect(() => {\r\n        MessEnding.current.scrollIntoView({ behavior: 'smooth' })\r\n    }, [dialogs])\r\n\r\n    return (\r\n        <div style={style}>\r\n            {dialogs.map((dialog) => {\r\n                return <Dialog key={dialog._id} socket={socket} dialog={dialog} onDelete={deleteMessage} room={room}></Dialog>\r\n            })}\r\n            <div ref={MessEnding} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialogs","import { Input, Select, Avatar, Drawer, Tabs, Space, Form, Switch, Button } from 'antd';\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport copy from 'copy-to-clipboard';\r\nimport { toast } from 'react-toastify'\r\nimport { Icon } from '@iconify/react';\r\nimport { MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport { storage } from \"../firebase/index\"\r\nimport Cookies from \"js-cookie\"\r\n\r\nconst { TabPane } = Tabs;\r\n\r\n\r\nconst ChatHeader = ({ userOnlines, room, dialogs, leave, socket }) => {\r\n    const [users, setUsers] = useState([])\r\n    const [currentRoom, setRoom] = useState(room)\r\n    const [visible, setVisible] = useState(false)\r\n    const [updateVisible, setUpdateVisible] = useState(false)\r\n    const [pinnedMessage, setPinnedMessage] = useState(false);\r\n    const [showPinnedMessage, setShowPinnedMessage] = useState(false);\r\n    var user = []\r\n    const [roomAvatarPreview, setRoomAvatarPreview] = useState(null)\r\n    const [roomAvatar, setRoomAvatar] = useState()\r\n    const currentUser = Cookies.get('userId')?.slice(Cookies.get('userId').indexOf('\"') + 1, Cookies.get('userId').length - 1)\r\n    const [roomUpdateInfo, setRoomUpdateInfo] = useState({\r\n        name: '',\r\n        description: '',\r\n        isPrivate: room.isPrivate,\r\n        avatar: '',\r\n    })\r\n    const [isPrivate, setIsPrivate] = useState(room.isPrivate)\r\n    const showDrawer = () => {\r\n        setVisible(true);\r\n    };\r\n    const onClose = () => {\r\n        setVisible(false);\r\n    };\r\n    const handleEditInfo = () => {\r\n        setUpdateVisible(!updateVisible);\r\n    }\r\n\r\n    const handleUpdateRoomAvatar = (e) => {\r\n        const newRoomAvatar = e.target.files[0]\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(newRoomAvatar)\r\n        reader.onloadend = () => {\r\n            setRoomAvatarPreview(reader.result)\r\n        }\r\n        setRoomAvatar(newRoomAvatar)\r\n    }\r\n\r\n\r\n    const handleUpdateRoomInfo = async () => {\r\n        let roomUpdateInfo_ = roomUpdateInfo\r\n        if (roomAvatar) {\r\n            const metadata = {\r\n                contentType: roomAvatar.type\r\n            }\r\n            const storageRef = storage.ref(`roomAvatars/${roomAvatar.name}`)\r\n            const snapshot = await storageRef.put(roomAvatar, metadata)\r\n            const url = await snapshot.ref.getDownloadURL()\r\n            roomUpdateInfo_.avatar = url\r\n        }\r\n        try {\r\n            console.log(roomUpdateInfo_)\r\n            const update = await axios.put(`/room/${room._id}`, roomUpdateInfo_, { withCredentials: true })\r\n            toast.success(update?.data?.msg)\r\n        } catch (err) {\r\n            toast.error(`${err?.response?.data?.msg}`)\r\n        }\r\n        setRoomAvatarPreview(roomUpdateInfo.avatar)\r\n        setRoomAvatar(null)\r\n        setUpdateVisible(false)\r\n    }\r\n\r\n    const style = {\r\n        chatHeader: {\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            padding: '50px',\r\n            backgroundColor: '#6588DE',\r\n            height: '20px',\r\n            width: '100%',\r\n            margin: '0px 0px 0px 10px',\r\n            position: 'relative',\r\n        },\r\n\r\n        pinMessageContainer: {\r\n            // opacity: showPinnedMessage || room?.pinnedMessages?.length > 0 ? 1 : 0,\r\n            position: 'absolute',\r\n            backgroundColor: '#E3F6FC',\r\n            bottom: '-67px',\r\n            left: '0px',\r\n            zIndex: '1',\r\n            width: '100%',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '10px',\r\n        },\r\n\r\n        pinMessageIcon: {\r\n\r\n        },\r\n\r\n        chatInfo: {\r\n            margin: '5px',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'flex-start',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        chatName: {\r\n            margin: '0px',\r\n            fontSize: '20px',\r\n            fontWeight: 'bold',\r\n            color: '#FDFDFE',\r\n        },\r\n\r\n        numberOfUser: {\r\n            margin: '0px',\r\n            fontSize: '14px',\r\n            color: '#F2F6F7',\r\n        },\r\n\r\n        chatTool: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            gap: '10px',\r\n\r\n        },\r\n\r\n        tuneIcon: {\r\n            cursor: 'pointer',\r\n            fontSize: '20px',\r\n        },\r\n\r\n        roomInfo: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n        },\r\n\r\n        roomTitle: {\r\n            marginBottom: '30px',\r\n            fontWeight: 600,\r\n            fontSize: '18px',\r\n            lineHeight: '27px',\r\n            color: '#6588DE',\r\n        },\r\n\r\n        roomAvatar: {\r\n            marginBottom: '20px',\r\n            border: '4px solid #' + room.color,\r\n            borderRadius: '115px',\r\n        },\r\n\r\n        roomName: {\r\n            marginBottom: '6px',\r\n            fontWeight: 600,\r\n            fontSize: '16px',\r\n            lineHeight: '24px',\r\n            color: '#6588DE',\r\n        },\r\n\r\n        roomDescription: {\r\n            marginBottom: '20px',\r\n            fontSize: '12px',\r\n            lineHeight: '150.5%',\r\n            color: '#52585D',\r\n        },\r\n\r\n        roomShortId: {\r\n            cursor: 'pointer',\r\n            fontSize: '20px',\r\n            marginBottom: '30px',\r\n        },\r\n\r\n        line: {\r\n            width: '280px',\r\n            height: '0px',\r\n            borderBottom: '1px solid #D0D9DF',\r\n            marginBottom: '20px',\r\n        },\r\n\r\n        media: {\r\n            height: '400px',\r\n            overflowY: 'auto',\r\n            display: 'block',\r\n        },\r\n\r\n        mediaGrid: {\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(3, 1fr)',\r\n            gap: '10px',\r\n            maxWidth: '100%',\r\n        },\r\n\r\n        file: {\r\n            display: 'flex',\r\n            height: '400px',\r\n            flexDirection: 'column',\r\n            alignItems: 'flex-start',\r\n        },\r\n\r\n        members: {\r\n            display: 'flex',\r\n            height: '400px',\r\n            flexDirection: 'column',\r\n            alignItems: 'flex-start',\r\n            gap: '10px',\r\n            overflowY: 'auto',\r\n        },\r\n\r\n        member: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            alignItems: 'flex-end',\r\n            gap: '10px',\r\n        },\r\n\r\n\r\n        leaveRoom: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            cursor: 'pointer',\r\n            fontSize: '20px',\r\n            borderRadius: '8px',\r\n            alignItems: 'center',\r\n            gap: '11px',\r\n            border: '1px solid #6588DE',\r\n            height: '39px',\r\n        },\r\n\r\n        leaveRoomIcon: {\r\n            color: '#6588DE',\r\n            with: '18px',\r\n            height: '20px',\r\n            marginLeft: '14px',\r\n        },\r\n\r\n        leaveRoomText: {\r\n            margin: '0px',\r\n            with: '72px',\r\n            fontWeight: 500,\r\n            fontSize: '12px',\r\n            lineHeight: '18px',\r\n            color: '#6588DE'\r\n        },\r\n\r\n        avatar: {\r\n            position: 'relative',\r\n        },\r\n\r\n        dot: {\r\n            position: 'absolute',\r\n            bottom: '6px',\r\n            right: '3px',\r\n            height: '8px',\r\n            width: '8px',\r\n            borderRadius: '50%',\r\n            backgroundColor: '#46D362',\r\n        },\r\n\r\n        des: {\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '320px',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        infoIcon: {\r\n            position: 'relative',\r\n            top: '5px'\r\n        },\r\n\r\n        buttonEditDrawer: {\r\n            border: 'none',\r\n            backgroundColor: '#E3F6FC',\r\n            color: '#6588DE',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        buttonUpdateDrawer: {\r\n            position: 'relative',\r\n            left: '50%',\r\n            marginRight: '5px',\r\n        },\r\n\r\n        roomAvatarEdit: {\r\n            width: 'fit-content',\r\n            display: 'block',\r\n            margin: 'auto',\r\n            border: '4px solid #' + room.color,\r\n            borderRadius: '115px',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        plusIconContainer: {\r\n            width: 55,\r\n            height: 55,\r\n            borderRadius: '50%',\r\n            border: '1px dashed #6ECB63',\r\n            display: 'grid',\r\n            placeItems: 'center',\r\n            backgroundColor: 'rgb(227, 246, 252)'\r\n        },\r\n\r\n        plusIcon: {\r\n            fontSize: '20px',\r\n        },\r\n\r\n        removeIcon: {\r\n            fontSize: '18px',\r\n            color: '#E74C3C',\r\n        },\r\n\r\n        submitButton: {\r\n            borderRadius: '5px'\r\n        }\r\n\r\n    }\r\n\r\n\r\n    const { Option } = Select;\r\n\r\n    const selectBefore = (\r\n        <Select defaultValue=\"Message\">\r\n            <Option value=\"Message\">Message</Option>\r\n            <Option value=\"User\">User</Option>\r\n        </Select>\r\n    );\r\n\r\n    useEffect(() => {\r\n        setRoom(room)\r\n        if (room?._id !== -1)\r\n            axios.get('/room/' + room?._id + '/members', { withCredentials: true }).then(res => {\r\n                setUsers(res.data.msg);\r\n            })\r\n        room?.pinnedMessages?.length > 0 && setShowPinnedMessage(true)\r\n    }, [room])\r\n\r\n    useEffect(() => {\r\n        socket.on('new-pinned-message', (dialog, roomId, r) => {\r\n            if (roomId === room._id) {\r\n                if (r.pinnedMessages.length === 0)\r\n                    setShowPinnedMessage(false)\r\n                else {\r\n                    setShowPinnedMessage(true)\r\n                    setPinnedMessage(r.pinnedMessages.at(-1))\r\n                }\r\n            }\r\n        })\r\n    }, [room])\r\n\r\n    const copyToClipboard = () => {\r\n        copy(room?.shortId)\r\n        toast.success('Copied to clipboard')\r\n    }\r\n\r\n    const onFinish = async (values) => {\r\n        user=[]\r\n        for (let i = 0; i < values.usersList.length; i++) {\r\n            user.push(values.usersList[i].first)\r\n        }\r\n        try {\r\n            let add = await axios.post('/room/' + room?._id + '/add', { emails: user.join(',') }, { withCredentials: true })\r\n            toast.success(add.data.msg)\r\n        } catch (err) {\r\n            toast.error(`${err?.response?.data?.msg}`)\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <div style={style.chatHeader}>\r\n                <div style={style.chatInfo} onClick={showDrawer}>\r\n                    <p style={style.chatName}>{room?.name} <Icon style={style.infoIcon} icon=\"ant-design:info-circle-outlined\" /></p>\r\n                    <p style={style.numberOfUser}>{users?.length + ' members'}</p>\r\n                </div>\r\n                <div style={style.chatTool}>\r\n                    <Input style={style.input} autoComplete='off' addonBefore={selectBefore} placeholder=\"Type user or a message you what to search...\" />\r\n                </div>\r\n                <Drawer\r\n                    placement=\"right\"\r\n                    onClose={onClose}\r\n                    visible={visible}\r\n                    extra={\r\n                        <Space>\r\n                            <button onClick={handleEditInfo} style={style.buttonEditDrawer}>Edit</button>\r\n                        </Space>\r\n                    }\r\n                >\r\n                    <div style={style.roomInfo}>\r\n                        <div style={style.roomTitle}>Room Info</div>\r\n                        {!updateVisible && <div style={style.roomAvatar}><Avatar size={200} src={room.avatar}></Avatar></div>}\r\n                        {updateVisible &&\r\n                            <div>\r\n                                <label style={style.roomAvatarEdit} htmlFor=\"roomAvatar\"><Avatar size={200} src={roomAvatarPreview ? roomAvatarPreview : room.avatar}></Avatar></label>\r\n                                <input id=\"roomAvatar\" style={{ visibility: \"hidden\" }} accept='image' type=\"file\" onChange={handleUpdateRoomAvatar} />\r\n                            </div>\r\n                        }\r\n                        {!room.isPrivate && <div style={style.roomShortId} onClick={copyToClipboard}>{room?.shortId}</div>}\r\n                        <div style={style.roomName}>{room?.name}</div>\r\n                        <div style={style.roomDescription}>{room?.description}</div>\r\n                        <div style={style.line}></div>\r\n                    </div>\r\n                    {updateVisible ?\r\n                        <Form\r\n                            labelCol={{ span: 10 }}\r\n                            wrapperCol={{ span: 20 }}\r\n                            onFinish={handleUpdateRoomInfo}\r\n                        >\r\n                            <Form.Item label=\"Room name\" rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Please input room name!'\r\n                                },\r\n                            ]}>\r\n                                <Input defaultValue={room.name} onChange={(e) => setRoomUpdateInfo({ ...roomUpdateInfo, name: e.target.value })} />\r\n                            </Form.Item>\r\n\r\n                            <Form.Item label=\"Description\" rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Please input room description!'\r\n                                },\r\n                            ]}>\r\n                                <Input defaultValue={room.description} onChange={(e) => setRoomUpdateInfo({ ...roomUpdateInfo, description: e.target.value })} />\r\n                            </Form.Item>\r\n\r\n                            {\r\n                            currentUser == room.creator && <Form.Item label=\"Mode\">\r\n                                <Switch defaultChecked={isPrivate} checkedChildren=\"Private\" unCheckedChildren=\"Public\" onClick={(e) => {setIsPrivate(pre=>!pre);setRoomUpdateInfo(prevRoomUpdateInfo => {return ({...prevRoomUpdateInfo, isPrivate: !prevRoomUpdateInfo.isPrivate })})}} />\r\n                            </Form.Item>\r\n                            }\r\n\r\n                            <Form.Item wrapperCol={{ offset: 10, span: 16 }}>\r\n                                <Button type=\"primary\" htmlType=\"submit\">\r\n                                    Save\r\n                                </Button>\r\n                            </Form.Item>\r\n                        </Form>\r\n                        :\r\n                        <Tabs style={{ marginBottom: '25px' }} defaultActiveKey=\"1\">\r\n                            <TabPane tab=\"Images\" key=\"1\">\r\n                                <div style={style.media}>\r\n                                    <div style={style.mediaGrid}>\r\n                                        {\r\n                                            dialogs.map(dialog => {\r\n                                                return dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                                    let format = url.split('.').pop().split('?')[0]\r\n                                                    if (format === 'jpg' || format === 'png' || format === 'jpeg') {\r\n                                                        return <img src={url} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} style={{ width: '100%', height: '100px', objectFit: 'cover', marginBottom: '10px', transition: '1s' }} />\r\n                                                    }\r\n                                                })\r\n                                            })\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            </TabPane>\r\n                            <TabPane tab=\"Videos\" key=\"2\">\r\n                                <div style={style.media}>\r\n                                    <div style={style.mediaGrid}>\r\n                                        {\r\n                                            dialogs.map(dialog => {\r\n                                                return dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                                    let format = url.split('.').pop().split('?')[0]\r\n                                                    if (format === 'mp4') {\r\n                                                        return (\r\n                                                            <video key={index} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} style={{ width: '100%', height: '100px', objectFit: 'cover', marginBottom: '10px', transition: '1s' }} controls>\r\n                                                                <source src={url} type=\"video/mp4\" />\r\n                                                            </video>\r\n                                                        )\r\n                                                    }\r\n                                                })\r\n                                            })\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            </TabPane>\r\n                            <TabPane tab=\"Files\" key=\"3\">\r\n                                <div style={style.file}>\r\n                                    {\r\n                                        dialogs.map(dialog => {\r\n                                            return dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                                let format = url.split('.').pop().split('?')[0]\r\n                                                if (format === 'pdf') {\r\n                                                    return (\r\n                                                        <a style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                            <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                                        </a>\r\n                                                    )\r\n                                                } else if (format === 'docx') {\r\n                                                    return (\r\n                                                        <a style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                            <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                                        </a>\r\n                                                    )\r\n                                                }\r\n                                            })\r\n                                        })\r\n                                    }\r\n                                </div>\r\n                            </TabPane>\r\n                            <TabPane tab=\"Members\" key=\"4\">\r\n                                <div style={style.members}>\r\n                                    {\r\n                                        ((currentUser == room.creator && room.isPrivate) || !room.isPrivate) &&\r\n                                        <Form name=\"add user dynamic form\" autoComplete=\"off\" onFinish={onFinish}>\r\n                                            <Form.List name=\"usersList\">\r\n                                                {(fields, { add, remove }) => (\r\n                                                    <>\r\n                                                        {fields.map(({ key, name, fieldKey, ...restField }) => (\r\n                                                            <Space key={key} style={{ display: 'flex', marginBottom: 2 }} align=\"baseline\">\r\n                                                                <Form.Item\r\n                                                                    {...restField}\r\n                                                                    name={[name, 'first']}\r\n                                                                    fieldKey={[fieldKey, 'first']}\r\n                                                                    rules={[{ type: 'email', required: true, message: 'Email is required!' }]}\r\n                                                                >\r\n                                                                    <Input placeholder=\"Email\" />\r\n                                                                </Form.Item>\r\n                                                                <Icon style={style.removeIcon} icon=\"gg:remove\" onClick={() => remove(name)} />\r\n                                                                {/* <MinusCircleOutlined onClick={() => remove(name)} /> */}\r\n                                                            </Space>\r\n                                                        ))}\r\n                                                        <Form.Item>\r\n                                                            <Button onClick={() => add()} block style={style.plusIconContainer}><Icon style={style.plusIcon} icon=\"carbon:add\" /></Button>\r\n                                                        </Form.Item>\r\n                                                    </>\r\n                                                )}\r\n                                            </Form.List>\r\n                                            <Form.Item>\r\n                                                <Button style={style.submitButton} type='primary' htmlType=\"submit\">\r\n                                                    Submit\r\n                                                </Button>   \r\n                                            </Form.Item>\r\n                                        </Form>\r\n                                    }\r\n                                    {\r\n                                        users?.map((user, index) => {\r\n                                            return (\r\n                                                <div key={index} style={style.member}>\r\n                                                    <div style={style.avatar}>\r\n                                                        <Avatar style={{ backgroundColor: '#' + user?.color }} size={50} src={user?.avatar}></Avatar>\r\n                                                        {userOnlines.includes(user?._id) && <span style={style.dot}></span>}\r\n                                                    </div>\r\n                                                    <p style={{ fontSize: '16px' }}>{user?.fullname}</p>\r\n                                                </div>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </div>\r\n\r\n                            </TabPane>\r\n                        </Tabs>\r\n                    }\r\n                    {!updateVisible &&\r\n                        <div style={style.leaveRoom}>\r\n                            <Icon style={style.leaveRoomIcon} icon=\"pepicons:leave\" />\r\n                            <p style={style.leaveRoomText} onClick={() => {\r\n                                onClose()\r\n                                leave(room._id)\r\n                            }\r\n                            }>Leave Room</p>\r\n                        </div>\r\n                    }\r\n                </Drawer>\r\n                {showPinnedMessage && <div style={style.pinMessageContainer}>\r\n                    <Icon style={style.pinMessageIcon} icon=\"bi:pin-angle-fill\" />\r\n                    <div style={style.pinMessageInfo}>\r\n                        <div style={style.pinMessageTitle}>Pinned message</div>\r\n                        <div style={style.pinMessageContent}>\r\n                            <Avatar style={style.pinMessageAvatar} src={pinnedMessage ? pinnedMessage?.avatar : room?.pinnedMessages?.at(-1)?.avatar}></Avatar>\r\n                            <div>\r\n                                <p style={style.pinMessageName}>{pinnedMessage ? pinnedMessage?.username : room?.pinnedMessages?.at(-1)?.username}</p>\r\n                                <p style={style.pinMessageContentText}>{pinnedMessage ? pinnedMessage?.message : room?.pinnedMessages?.at(-1)?.message}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default ChatHeader","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport Input from \"./Message/Input\"\r\nimport Dialogs from \"./Message/Dialogs\"\r\nimport ChatHeader from \"./ChatHeader\"\r\nimport axios from 'axios'\r\nimport { useEffect, useState } from \"react\"\r\nimport Cookies from \"js-cookie\"\r\n// import Snackbar from '@material-ui/core/Snackbar'\r\n// import MuiAlert from '@material-ui/lab/Alert'\r\n\r\n// const Alert = (props) => {\r\n//     return <MuiAlert elevation={6} variant='filled' {...props} />\r\n// }\r\n\r\nconst ChatWindow = ({ socket, room, setLastMsgRoomId, rooms, setRooms, leave }) => {\r\n    const [dialogs, setDialogs] = useState([])\r\n    const [currentRoom, setRoom] = useState(room)\r\n    const [newMessage, setNewMessage] = useState(null)\r\n    const [userOnlines, setUserOnlines] = useState([])\r\n\r\n    // const style = {\r\n    //     container: {\r\n    //         height: '100vh',\r\n    //         width: '90%',\r\n    //         background: '#E3F6FC',\r\n    //         borderRadius: '10px',\r\n    //         margin: '50px 50px 50px 30px'\r\n    //     },\r\n\r\n    // }\r\n\r\n    const dialogsUpdate = (message, urls) => {\r\n        socket.emit('chat', message, urls, Cookies.get('userId'), room._id)\r\n    }\r\n\r\n    const deleteMessage = (dialog, creator) => {\r\n        const cookie = Cookies.get('userId')\r\n        const index = cookie.indexOf('\"')\r\n        let userId = cookie.slice(index + 1, cookie.length - 1)\r\n        if (dialog.from.userId === userId || creator === userId) {\r\n            const temp = [...dialogs]\r\n            temp.every((d, index) => {\r\n                if (d._id === dialog._id) {\r\n                    temp.splice(index, 1)\r\n                    return false\r\n                }\r\n                return true\r\n            })\r\n            setDialogs([...temp])\r\n            socket.emit('delete', dialog._id, room)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setRoom(room)\r\n        if (room?._id !== -1)\r\n            axios.get('/message/room/' + room?._id, { withCredentials: true }).then(response => {\r\n                setDialogs(response.data.msg)\r\n            })\r\n    }, [room])\r\n\r\n    useEffect(() => {\r\n        socket.on('your_new_message', (dialog, ctRoom) => {\r\n            setLastMsgRoomId(ctRoom)\r\n            setLastMsgRoomId('')\r\n            if (ctRoom === room?._id)\r\n                setNewMessage(dialog)\r\n        })\r\n        socket.on('dialog-deleted', (id) => {\r\n            const temp = [...dialogs]\r\n            temp.every((d, index) => {\r\n                if (d._id === id) {\r\n                    temp.splice(index, 1)\r\n                    return false\r\n                }\r\n                return true\r\n            })\r\n            setDialogs([...temp])\r\n        })\r\n        return () => {\r\n            // socket.off('logged')\r\n            socket.off('your_new_message')\r\n            socket.off('dialog-deleted')\r\n        }\r\n    }, [dialogs, socket])\r\n\r\n    useEffect(() => {\r\n        if (newMessage) {\r\n            setDialogs([...dialogs, newMessage])\r\n        }\r\n    }, [newMessage])\r\n\r\n    useEffect(() => {\r\n        socket.on('loggedIn', (users) => {\r\n            setUserOnlines([...users])\r\n        })\r\n\r\n        socket.on('loggedOut', (users) => {\r\n            setUserOnlines([...users])\r\n        })\r\n\r\n        return () => {\r\n            socket.off('loggedIn')\r\n            socket.off('loggedOut')\r\n        }\r\n\r\n    }, [userOnlines,socket])\r\n\r\n    return (\r\n        <div>\r\n            <ChatHeader userOnlines={userOnlines} room={room} dialogs={dialogs} leave={leave} socket={socket} />\r\n            <div>\r\n                <Dialogs room={currentRoom} socket={socket} dialogs={dialogs} setDialogs={setDialogs} deleteMessage={deleteMessage} ></Dialogs>\r\n                <Input room={currentRoom} setDialogs={dialogsUpdate} socket={socket}></Input>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatWindow","import { useEffect, useState } from 'react'\r\nimport './Intro.css'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\nconst Intro = () => {\r\n    const [begin, setBegin] = useState(false)\r\n\r\n    const limit = useMediaQuery({maxWidth: 1300})\r\n\r\n    const style = {\r\n        container: {\r\n            position: 'absolute',\r\n            left: '10em',\r\n            top: '-2.5em',\r\n            display: limit ? 'none' : 'block'\r\n        },\r\n\r\n        text: {\r\n            fontSize: '30px',\r\n            color: 'cyan',\r\n            fontWeight: 'bold',\r\n            transform: begin ? 'translate(200px, 0)' : 'none',\r\n            opacity: begin ? 1 : 0,\r\n            fontFamily: 'Comfortaa',\r\n            transition: 'transform 1000ms ease-out, opacity 800ms'\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            setBegin(true)\r\n        }, 2000)\r\n    }, [])\r\n\r\n    return (\r\n        <div style={style.container}>\r\n            <p className='intro-text'>Chatcord</p>\r\n            <p style={style.text}>...connect people around the world</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Intro","import TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport axios from 'axios';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport { useState } from 'react';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Intro from '../Intro/Intro'\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n\r\ntoast.configure({\r\n    autoClose: 2000,\r\n    draggable: false,\r\n    position: toast.POSITION.BOTTOM_RIGHT\r\n  })\r\n\r\nconst Login = ({ logIn, invalid, errorToggle, message }) => {\r\n    const [error, setError] = useState(false)\r\n    const [user, setUser] = useState({ email: '', fullname: '', username: '', password: ''})\r\n    // const [haveAccount, setAccount] = useState(true)\r\n    const [hover, setHover] = useState(false)\r\n\r\n    const [verifyUser, setUserVerify] = useState({ email: '', code: '' })\r\n\r\n    const [formId, setFormId] = useState('login')\r\n\r\n    const limit = useMediaQuery({ maxWidth: 1300 })\r\n    const style = {\r\n        textField: {\r\n            display: 'block',\r\n            marginBottom: '20px',\r\n        },\r\n\r\n        div: {\r\n            position: 'relative',\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'linear-gradient(135deg, rgba(88,63,243,1) 0%, rgba(255,77,0,0.7962535355939251) 100%)',\r\n        },\r\n\r\n        button: {\r\n            width: '100%',\r\n            background: '#000000',\r\n            color: '#ffffff',\r\n            height: '3em',\r\n            marginBottom: '1em'\r\n        },\r\n\r\n        loginForm: {\r\n            width: '350px',\r\n            overflow: 'hidden',\r\n            background: '#ffffff',\r\n            padding: '50px 0px 30px 0px',\r\n            borderRadius: '10px',\r\n            height: '550px',\r\n            maxWidth: '350px',\r\n            transition: 'max-width 200ms'\r\n        },\r\n\r\n        signupForm: {\r\n            width: '350px',\r\n            overflow: 'hidden',\r\n            background: '#ffffff',\r\n            padding: '50px 0px 30px 0px',\r\n            borderRadius: '10px',\r\n            height: '650px',\r\n            maxWidth: '350px',\r\n            transition: 'max-width 200ms',\r\n        },\r\n\r\n        header: {\r\n            fontWeight: 'bold',\r\n            fontSize: '40px',\r\n            marginBottom: '1.5em',\r\n            fontFamily: 'Roboto'\r\n        },\r\n\r\n        createAccount: {\r\n            fontWeight: 'bold',\r\n            cursor: 'pointer',\r\n            color: hover ? '#555555' : '#000000',\r\n            transition: 'color 300ms'\r\n        },\r\n\r\n        buttons: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            margin: 'auto',\r\n            width: '50%',\r\n            paddingTop: '2em',\r\n            marginBottom: '4em'\r\n        },\r\n\r\n        forms: {\r\n            textAlign: 'center',\r\n            position: 'absolute',\r\n            right: limit ? 0 : '10em',\r\n            left: limit ? 0 : 'auto',\r\n            margin: 'auto',\r\n            top: '5em',\r\n            display: 'flex',\r\n            justifyContent: 'center'\r\n        },\r\n\r\n        alertText: {\r\n            color: 'red',\r\n            fontWeight: 'bold',\r\n        },\r\n\r\n        alert: {\r\n            color: '#ff0000',\r\n            opacity: invalid ? 1 : 0,\r\n            transition: 'opacity 250ms'\r\n        }\r\n    }\r\n\r\n    const registation = async () => {\r\n            const result = await axios.post('/auth/register', user).\r\n            then (result => {\r\n                if (result.status === 200) {\r\n                    toast.success(`${result.data.msg}`)\r\n                    setFormId('verify')\r\n                }\r\n                else {\r\n                    setError(true)\r\n                }\r\n             })\r\n             .catch(error => {\r\n                toast.error(`${error.response.data.msg}`)\r\n             })\r\n\r\n    }\r\n\r\n    const verify = async () => {\r\n        const result = await axios.post('/auth/verify', verifyUser)\r\n        .then (result => {\r\n        if (result.status === 200) {\r\n            toast.success(`${result.data.msg}`)\r\n            setFormId('login')\r\n        }})\r\n        .catch(error => {\r\n            toast.error(`${error.response.data.msg}`,)\r\n         })\r\n\r\n    }\r\n\r\n    return (\r\n        <div style={style.div}>\r\n            <Intro />\r\n            <div style={style.forms}>\r\n                {/* Login Form */}\r\n                {formId === 'login' && <form autoComplete='off' noValidate style={style.loginForm}>\r\n                    <h1 style={style.header}>LOGIN</h1>\r\n                    <TextField\r\n                        required\r\n                        value={user.email}\r\n                        id='input-with-icon-textfield'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUser({ ...user, email: e.target.value })}\r\n                        placeholder='email'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <PersonIcon />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    ></TextField>\r\n\r\n                    <TextField\r\n                        required\r\n                        value={user.password}\r\n                        id='standard-basic'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUser({ ...user, password: e.target.value })}\r\n                        onKeyUp={(e) => {\r\n                            if (e.key === 'Enter') {\r\n                                logIn(user)\r\n                            }\r\n                        }}\r\n                        placeholder='password'\r\n                        type='password'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <LockOutlinedIcon />\r\n                                </InputAdornment>\r\n                            )\r\n                        }}\r\n                    ></TextField>\r\n                    <h4 style={style.alert}>Something went wrong</h4>\r\n                    <div style={style.buttons}>\r\n                        <Button style={style.button} variant='contained' color='primary' onClick={(e) => {\r\n                            e.preventDefault()\r\n                            logIn(user)\r\n                        }}>Log in</Button>\r\n                    </div>\r\n\r\n                    <p style={style.createAccount}\r\n                        onMouseEnter={() => setHover(true)}\r\n                        onMouseLeave={() => setHover(false)}\r\n                        onClick={e => {\r\n                            e.preventDefault()\r\n                            setUser({ email: '', password: '' })\r\n                            // setAccount(false)\r\n                            setFormId('signup')\r\n                            // errorToggle(false)\r\n                        }}\r\n                    >Create account ?</p>\r\n                </form>}\r\n\r\n\r\n                {/* verify */}\r\n                {formId === 'verify' && <form autoComplete='off' noValidate style={style.loginForm}>\r\n                    <h1 style={style.header}>Verify</h1>\r\n                    <TextField\r\n                        required\r\n                        value={verifyUser.email}\r\n                        id='input-with-icon-textfield'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUserVerify({ ...verifyUser, email: e.target.value })}\r\n                        placeholder='email'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <PersonIcon />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    ></TextField>\r\n\r\n                    <TextField\r\n                        required\r\n                        id='standard-basic'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUserVerify({ ...verifyUser, code: e.target.value })}\r\n                        placeholder='verify code'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <LockOutlinedIcon />\r\n                                </InputAdornment>\r\n                            )\r\n                        }}\r\n                    ></TextField>\r\n\r\n                    {error ? <h4 style={style.alert}>Something went wrong</h4> : null}\r\n                    <div style={style.buttons}>\r\n                        <Button style={style.button} variant='contained' color='primary' onClick={(e) => {\r\n                            e.preventDefault()\r\n                            verify()\r\n                        }}>Confirm</Button>\r\n                    </div>\r\n\r\n                    {/* <p style={style.createAccount}\r\n                        onMouseEnter={() => setHover(true)}\r\n                        onMouseLeave={() => setHover(false)}\r\n                        onClick={e => {\r\n                            e.preventDefault()\r\n                            setUser({ username: '', password: '' })\r\n                            setAccount(false)\r\n                            errorToggle(false)\r\n                        }}\r\n                    >Create account ?</p> */}\r\n                </form>}\r\n\r\n                {/* create account */}\r\n                {formId === 'signup' && <form autoComplete='off' noValidate style={style.signupForm}>\r\n                    <h1 style={style.header}>Create account</h1>\r\n\r\n                    <TextField\r\n                        required\r\n                        value={user.email}\r\n                        id='standard-basic'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUser(user => ({ ...user, email: e.target.value }))}\r\n                        placeholder='email'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <PersonIcon />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    ></TextField>\r\n\r\n                    <TextField\r\n                        required\r\n                        value={user.fullname}\r\n                        id='standard-basic'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUser(user => ({ ...user, fullname: e.target.value }))}\r\n                        placeholder='fullname'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <PersonIcon />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    ></TextField>\r\n\r\n                    <TextField\r\n                        required\r\n                        value={user.username}\r\n                        id='standard-basic'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUser(user => ({ ...user, username: e.target.value }))}\r\n                        placeholder='username'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <PersonIcon />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    ></TextField>\r\n\r\n                    <TextField\r\n                        required\r\n                        value={user.password}\r\n                        id='standard-basic'\r\n                        style={style.textField}\r\n                        type='password'\r\n                        onChange={(e) => setUser(user => ({ ...user, password: e.target.value }))}\r\n                        placeholder='password'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <LockOutlinedIcon />\r\n                                </InputAdornment>\r\n                            )\r\n                        }}\r\n                    ></TextField>\r\n\r\n                    <TextField\r\n                        required\r\n                        error={error}\r\n                        id={error ? 'standard-error-helper-text' : 'standard-basic'}\r\n                        style={style.textField}\r\n                        type='password'\r\n                        onChange={(e) => {\r\n                            setError(e.target.value !== user.password)\r\n                        }}\r\n                        onKeyUp={(e) => {\r\n                            if (e.key === 'Enter') {\r\n                                registation()\r\n                            }\r\n                        }}\r\n                        placeholder='confirm password'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <LockOutlinedIcon />\r\n                                </InputAdornment>\r\n                            )\r\n                        }}\r\n                    ></TextField>\r\n                    <div style={style.buttons}>\r\n                        <Button style={style.button} variant='contained' color='primary' onClick={(e) => {\r\n                            e.preventDefault()\r\n                            registation()\r\n                            setUserVerify({ email: user.email })\r\n                        }}>Create Account</Button>\r\n                        <Button style={{ background: '#ffffff', color: '#000000', border: '3px solid black' }} variant='contained' color='primary' onClick={(e) => {\r\n                            e.preventDefault()\r\n                            setFormId('login')\r\n                        }}>Back</Button>\r\n                    </div>\r\n                </form>}\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login","import CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst Loading = () => {\r\n    const style = {\r\n        textAlign: 'center',\r\n        height: '100%',\r\n        background: 'linear-gradient(135deg, rgba(88,63,243,1) 0%, rgba(255,77,0,0.7962535355939251) 100%)',\r\n\r\n        content: {\r\n            position: 'absolute',\r\n            top: '40%',\r\n            left: '45%',\r\n        }\r\n    }\r\n    return (\r\n        <div style={style}>\r\n            <div style={style.content}>\r\n                <CircularProgress></CircularProgress>\r\n                <p>Wait a few second...</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading","import Avatar from '@material-ui/core/Avatar'\r\nimport { makeStyles } from \"@material-ui/core\"\r\n// import { useMediaQuery } from 'react-responsive'\r\nimport { Icon } from '@iconify/react'\r\nimport { useState } from 'react'\r\nimport { Modal, Form, Input, Avatar as UserAvatar, Button } from 'antd'\r\nimport { storage } from \"../../firebase/index\"\r\nimport axios from 'axios'\r\nimport { toast } from 'react-toastify'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  large: {\r\n    width: theme.spacing(10),\r\n    height: theme.spacing(10)\r\n  },\r\n}))\r\n\r\nconst UserArea = ({ user, logout }) => {\r\n  const classes = useStyles()\r\n  const [updateVisible, setUpdateVisible] = useState(false)\r\n  const [userAvatarPreview, setUserAvatarPreview] = useState(null)\r\n  const [userInfo, setUserInfo] = useState({\r\n    fullname: '',\r\n    username: '',\r\n    avatar: '',\r\n    password: '',\r\n  })\r\n  const [userAvatar, setUserAvatar] = useState()\r\n\r\n  const handleEditUserInfo = () => {\r\n    setUpdateVisible(!updateVisible)\r\n  }\r\n\r\n  // TODO: update user info\r\n  const handleUpdateUserInfo = async () => {\r\n    let userInfoToUpdate = userInfo\r\n    if (userAvatar) {\r\n      const metadata = {\r\n        contentType: userAvatar.type\r\n      }\r\n      const storageRef = storage.ref(`userAvatars/${userAvatar.name}`)\r\n      const snapshot = await storageRef.put(userAvatar, metadata)\r\n      const url = await snapshot.ref.getDownloadURL()\r\n      userInfoToUpdate.avatar = url\r\n    }\r\n    try {\r\n      console.log(userInfo)\r\n      const update = await axios.put(`/user/${user._id}`, userInfoToUpdate, { withCredentials: true })\r\n      toast.success(update?.data?.msg)\r\n    } catch (err) {\r\n      toast.error(`${err?.response?.data?.msg}`)\r\n    }\r\n    setUserAvatarPreview(userInfo.avatar)\r\n    setUserAvatar(null)\r\n    setUpdateVisible(false)\r\n  }\r\n  const handleUpdateUserAvatar = (e) => {\r\n    const newUserAvatar = e.target.files[0]\r\n    const reader = new FileReader()\r\n    reader.readAsDataURL(newUserAvatar)\r\n    reader.onloadend = () => {\r\n      setUserAvatarPreview(reader.result)\r\n    }\r\n    setUserAvatar(newUserAvatar)\r\n  }\r\n  // const limit = useMediaQuery({ maxWidth: 1300 })\r\n\r\n  const style = {\r\n    userInformation: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      alignContent: 'flex-start',\r\n      justifyContent: 'flex-end',\r\n      height: '100px',\r\n      width: '100%',\r\n      backgroundColor: '#E3F6FC',\r\n      // borderRadius: '14px',\r\n      marginBottom: '10px',\r\n      // marginLeft: '10px',\r\n    },\r\n    avatar: {\r\n      fontSize: 'xx-large',\r\n      marginRight: '20px',\r\n      marginLeft: '20px',\r\n      background: '#' + user.color,\r\n      cursor: 'pointer',\r\n    },\r\n    info: {\r\n      flexGrow: 1,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'start',\r\n    },\r\n    fullname: {\r\n      fontFamily: 'Poppins',\r\n      fontStyle: 'normal',\r\n      fontWeight: '600',\r\n      fontSize: '20px',\r\n      /* identical to box height */\r\n      color: '#52585D',\r\n      margin: '0px',\r\n    },\r\n    username: {\r\n      fontStyle: 'normal',\r\n      fontFamily: 'Poppins',\r\n      padding: '5px 10px',\r\n      backgroundColor: '#6588DE',\r\n      borderRadius: '14px',\r\n      color: '#FFFFFF',\r\n      fontSize: '10px',\r\n\r\n    },\r\n\r\n    userAvaterEdit: {\r\n      width: 'fit-content',\r\n      display: 'block',\r\n      margin: 'auto',\r\n      border: '4px solid #' + user.color,\r\n      borderRadius: '115px',\r\n      cursor: 'pointer',\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={style.userInformation}>\r\n      <Avatar onClick={handleEditUserInfo} style={style.avatar} className={classes.large} src={user.avatar}></Avatar>\r\n\r\n\r\n      <Modal visible={updateVisible} closable={false} title=\"Update User Info\" onCancel={handleEditUserInfo} footer={null}>\r\n        {updateVisible &&\r\n          <div>\r\n            <label style={style.userAvaterEdit} htmlFor=\"userAvatar\"><UserAvatar size={200} src={userAvatarPreview ? userAvatarPreview : user.avatar}></UserAvatar></label>\r\n            <input id=\"userAvatar\" style={{ visibility: \"hidden\" }} accept='image/*' type=\"file\" onChange={handleUpdateUserAvatar} />\r\n          </div>\r\n        }\r\n        <Form\r\n          labelCol={{ span: 8 }}\r\n          wrapperCol={{ span: 16 }}\r\n          onFinish={handleUpdateUserInfo}\r\n        >\r\n          <Form.Item label=\"Full Name\" rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your full name!',\r\n            },\r\n          ]}>\r\n            <Input defaultValue={user.fullname} onChange={(e) => setUserInfo({ ...userInfo, fullname: e.target.value })} />\r\n          </Form.Item>\r\n          <Form.Item label=\"Username\" rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your username!',\r\n            },\r\n          ]}>\r\n            <Input defaultValue={user.username} onChange={(e) => setUserInfo({ ...userInfo, username: e.target.value })} />\r\n          </Form.Item>\r\n          <Form.Item label=\"Password\" name=\"password\"\r\n            rules={[\r\n              {\r\n                pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{6,}$/,\r\n                message: 'Password must be at least 6 characters, contain at least one uppercase letter, one lowercase letter, one number and one special character!',\r\n              }\r\n            ]}>\r\n            <Input.Password onChange={(e) => setUserInfo({ ...userInfo, password: e.target.value })} />\r\n          </Form.Item>\r\n          <Form.Item label=\"Confirm Password\" name=\"confirm\"\r\n            rules={[\r\n              {\r\n                pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{6,}$/,\r\n                message: 'Password must be at least 6 characters, contain at least one uppercase letter, one lowercase letter, one number and one special character!',\r\n              },\r\n              ({ getFieldValue }) => ({\r\n                validator(_, value) {\r\n                  if (!value || getFieldValue('password') === value) {\r\n                    return Promise.resolve();\r\n                  }\r\n                  return Promise.reject(new Error('The two passwords that you entered do not match!'));\r\n                },\r\n              }),\r\n            ]}>\r\n            <Input.Password />\r\n          </Form.Item>\r\n\r\n          <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Save\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      <div style={style.info}>\r\n        <p style={style.fullname}>{user.fullname}</p>\r\n        <p style={style.username}>{user.username}</p>\r\n      </div>\r\n      <Icon icon=\"ion:log-out-outline\" style={{ fontSize: '30px', marginRight: '20px', marginLeft: '20px', cursor: 'pointer' }} onClick={logout} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserArea","// import Avatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useEffect, useState } from 'react';\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport moment from 'moment';\r\nimport { Avatar } from 'antd';\r\nimport axios from 'axios';\r\nimport { Icon } from '@iconify/react';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    large: {\r\n        width: theme.spacing(10),\r\n        height: theme.spacing(10)\r\n    },\r\n\r\n    small: {\r\n        width: theme.spacing(6),\r\n        height: theme.spacing(6)\r\n    }\r\n}))\r\n\r\nconst Room = ({ room, onClick, lastMsgRoomId, setLastMsgRoomId, leaveHandle, roomManage, choosen }) => {\r\n    const classes = useStyles()\r\n    const [option, setOption] = useState(false)\r\n    const [hover, setHover] = useState(false)\r\n    const [lastMsg, setLastMsg] = useState('')\r\n    const [lastMsgTime, setLastMsgTime] = useState(null)\r\n    const [updateMsg, setUpdateMsg] = useState(false)\r\n    const limit = useMediaQuery({ maxWidth: 1300 })\r\n\r\n    const style = {\r\n        room_container: {\r\n            position: 'relative',\r\n            marginTop: '18px',\r\n        },\r\n\r\n        room: {\r\n            position: 'relative',\r\n            width: limit ? '12em' : '90%',\r\n            margin: 'auto',\r\n            background: (choosen || hover) ? '#6588DE' : '#E3F6FC',\r\n            padding: '10px',\r\n            borderRadius: '14px',\r\n            boxShadow: (choosen || hover) ? '0px 8px 40px rgba(0, 72, 251, 0.3)' : 'none',\r\n            // border: (choosen || hover) ? '3px solid #ffffff' : '3px solid transparent',\r\n            overflow: 'hidden',\r\n            marginBottom: 10,\r\n            maxHeight: option ? limit ? '250px' : '220px' : '100px',\r\n            transition: 'max-height 250ms, border 250ms, background 250ms',\r\n            height: '74px',\r\n        },\r\n\r\n        roomInfo: {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            display: 'flex',\r\n            cursor: 'pointer',\r\n            alignItems: 'center',\r\n            alignContent: 'center',\r\n            flexDirection: 'row',\r\n            gap: '10px',\r\n        },\r\n\r\n        avatar: {\r\n            fontSize: '20px',\r\n            flexShrink: 0,\r\n            // marginRight: '20px',\r\n            // marginLeft: '20px',\r\n            background: '#' + room?.color,\r\n        },\r\n\r\n        roomMessage: {\r\n            flexGrow: '1',\r\n        },\r\n\r\n        roomMessageName: {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            fontSize: '18px',\r\n            fontWeight: 'bold',\r\n            color: (choosen || hover) ? '#FDFDFE' : '#52585D',\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '150px',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        roomMessageLastMessage: {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            fontSize: '12px',\r\n            color: (choosen || hover) ? '#F2F6F7' : '#96A9BA',\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '150px',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        messageTime: {\r\n            color: (choosen || hover) ? '#FDFDFE' : '#96A9BA',\r\n        },\r\n\r\n        button: {\r\n            position: 'absolute',\r\n            fontSize: '50px',\r\n            color: '#5b5b5b',\r\n            right: '0.5em',\r\n            top: 40,\r\n            margin: 'auto',\r\n            transform: option ? 'rotate(90deg)' : 'none',\r\n            transition: 'transform 200ms'\r\n        },\r\n\r\n        roomOption: {\r\n            background: '#c4c4c4',\r\n            fontSize: 'large',\r\n            marginBottom: '0',\r\n            marginTop: '0.1em',\r\n            borderRadius: '5px',\r\n            cursor: 'pointer',\r\n            paddingLeft: '1em',\r\n        },\r\n\r\n        private : {\r\n            position: 'absolute',\r\n            fontSize: '30px',\r\n            right: 0,\r\n            top: 0,\r\n            color: '#52585D',\r\n        }\r\n    }\r\n\r\n    useEffect(async () => {\r\n        if (option && !choosen) {\r\n            setOption(false)\r\n        }\r\n        if (room?._id === lastMsgRoomId) {\r\n            let res = await axios.get(`/room/${lastMsgRoomId}`, { withCredentials: true })\r\n            setLastMsg(res.data.msg.lastMessage)\r\n            setLastMsgTime(res.data.msg.lastMessageDate)\r\n            setUpdateMsg(true)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [choosen, lastMsgRoomId])\r\n\r\n    return (\r\n        <div style={style.room_container} onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}>\r\n            <div style={style.room}>\r\n                <div style={style.roomInfo} onClick={() => onClick(room)}>\r\n                    <Avatar size={56} style={style.avatar} src={room.avatar}></Avatar>\r\n                    <div style={style.roomMessage}>\r\n                        <p style={style.roomMessageName}>{room?.name}</p>\r\n                        <p style={style.roomMessageLastMessage}>{updateMsg ? lastMsg : room?.lastMessage}</p>\r\n                    </div>\r\n                    <span style={style.messageTime}>{moment(`${updateMsg ? lastMsgTime : room?.lastMessageDate}`).fromNow()}</span>\r\n                    {room.isPrivate && <Icon style={style.private} icon=\"ri:chat-private-line\" />}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Room","// import CreateRoom from \"./CreateRoom\"\r\nimport Room from \"../Room/Room\"\r\n\r\nconst RoomsList = ({rooms, joinRoom, leaveRoom, switchRoom, roomManage, currentRoom, lastMsgRoomId, setLastMsgRoomId}) => {\r\n    const style = {\r\n        roomList: {\r\n            overflow: 'auto',\r\n            width: '100%',\r\n            height: '77%',\r\n            backgroundColor: '#E3F6FC',\r\n            // borderRadius: '5px',\r\n            // marginLeft: '10px',\r\n        },\r\n    }\r\n\r\n    return (\r\n        <div style={style.roomList}>\r\n          {/* <CreateRoom joinRoom={joinRoom}></CreateRoom> */}\r\n          {rooms?.map((room) => {\r\n            return (\r\n              <Room key={room?._id} choosen={currentRoom?._id === room?._id} room={room} lastMsgRoomId={lastMsgRoomId} setLastMsgRoomId={setLastMsgRoomId} leaveHandle={leaveRoom} onClick={switchRoom} roomManage={roomManage}></Room>\r\n            )\r\n          })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RoomsList","/* eslint-disable no-unused-vars */\r\nimport { Icon } from '@iconify/react';\r\nimport { Modal, Button, Form, Input, Switch } from 'antd';\r\nimport { useState } from 'react';\r\n\r\n\r\nconst RoomsHeader = ({ joinRoom, findRoom, handleSearchRoom }) => {\r\n    const [visibleCreate, setVisibleCreate] = useState(false)\r\n    const [visibleJoin, setVisibleJoin] = useState(false)\r\n    const [isPrivate, setIsPrivate] = useState(false)\r\n    const [room, setRoom] = useState({ name: '', description: '', isPrivate: false })\r\n\r\n    const [shortId, setShortId] = useState('')\r\n\r\n\r\n    const style = {\r\n        roomHeaderContainer: {\r\n            display: 'flex',\r\n            justifyContent: 'space-around',\r\n            alignItems: 'center',\r\n            backgroundColor: '#E3F6FC',\r\n            // borderRadius: '14px',\r\n            // marginBottom: '10px',\r\n            // marginLeft: '10px',\r\n            height: '10%',\r\n            padding: '10px',\r\n            width: '100%',\r\n        },\r\n        input: {\r\n            width: '100%',\r\n            outline: 'none',\r\n            fontSize: '1.2rem',\r\n            borderRadius: '8px',\r\n            height: '40px',\r\n            backgroundColor: '#FDFDFD',\r\n            border: '1px solid #6588DE',\r\n            boxSizing: 'border-box',\r\n            margin: '5px',\r\n            marginLeft: '15px',\r\n        },\r\n        add: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n        join: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n        addUser: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n    }\r\n\r\n    const showModalCreate = () => {\r\n        setVisibleCreate(true);\r\n    }\r\n\r\n    const hideModalCreate = () => {\r\n        setVisibleCreate(false);\r\n    }\r\n\r\n    const creatRoom = () => {\r\n        joinRoom(room)\r\n        hideModalCreate()\r\n    }\r\n\r\n    const showModalJoin = () => {\r\n        setVisibleJoin(true);\r\n    }\r\n\r\n    const hideModalJoin = () => {\r\n        setVisibleJoin(false);\r\n    }\r\n\r\n    const joinWithRoomId = () => {\r\n        findRoom(shortId)\r\n        hideModalJoin()\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={style.roomHeaderContainer}>\r\n                <Icon style={style.add} icon=\"akar-icons:search\" onClick={handleSearchRoom} />\r\n                <Icon style={style.add} icon=\"akar-icons:chat-add\" onClick={showModalCreate} />\r\n                <Icon style={style.join} icon=\"fluent:chat-arrow-back-16-regular\" onClick={showModalJoin} />\r\n            </div>\r\n\r\n            <Modal title=\"Create room\" closable={false} visible={visibleCreate} footer={[\r\n                <Button onClick={hideModalCreate}>\r\n                    Cancel\r\n                </Button>,\r\n                <Button key=\"submit\" type=\"primary\" onClick={creatRoom} >\r\n                    Create\r\n                </Button>,\r\n            ]}>\r\n                <Form name=\"control-hooks\">\r\n                    <Form.Item label=\"Room name\" name=\"roomName\" rules={[{ required: true }]} onChange={(e) => setRoom(room => ({ ...room, name: e.target.value }))}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Description\" name=\"description\" rules={[{ required: true }]} onChange={(e) => setRoom(room => ({ ...room, description: e.target.value }))}>\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Switch checkedChildren=\"Private\" unCheckedChildren=\"Public\" onChange={(e) => setRoom(room => ({ ...room, isPrivate: !isPrivate }))} />\r\n                </Form>\r\n            </Modal>\r\n\r\n            <Modal title=\"Join room\" closable={false} visible={visibleJoin} footer={[\r\n                <Button onClick={hideModalJoin}>\r\n                    Cancel\r\n                </Button>,\r\n                <Button key=\"submit\" type=\"primary\" onClick={joinWithRoomId} >\r\n                    Join\r\n                </Button>,\r\n            ]}>\r\n                <Form name=\"control-hooks\">\r\n                    <Form.Item label=\"Room ID\" name=\"roomShortId\" rules={[{ required: true }]} onChange={(e) => setShortId(e.target.value)}>\r\n                        <Input />\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n\r\n        </>\r\n    )\r\n};\r\n\r\nexport default RoomsHeader","const Guide = () => {\r\n    const styles = {\r\n        guide: {\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            width: '100%',\r\n            height: '95%',\r\n            fontSize: '1.5em',\r\n            backgroundColor: 'rgb(227, 246, 252)',\r\n            margin: 'auto 20px',\r\n            borderRadius: '14px',\r\n        },\r\n    }\r\n    return (\r\n        <div style={styles.guide}>\r\n            <h1>pick a room to start <br></br> or create a new room</h1> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Guide;","import { useState } from \"react\";\r\nimport { Icon } from '@iconify/react';\r\nimport RoomsList from \"../Rooms/RoomsList\";\r\nimport Room from \"../Room/Room\";\r\n\r\nconst SearchRoom = ({rooms, joinRoom, leaveRoom, switchRoom, roomManage, currentRoom, handleSearchRoom }) => {\r\n    const [resultRoom, setResultRoom] = useState([]);\r\n\r\n    const styles = {\r\n        inputSection: {\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n        },\r\n        input: {\r\n            width: '100%',\r\n            height: '40px',\r\n            borderRadius: '10px',\r\n            borderColor: '#6588DE',\r\n        },\r\n        searchRoom: {\r\n            width: \"100%\",\r\n            height: \"102%\",\r\n            overflowY: 'hidden'\r\n        },\r\n        add: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n        \r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        const value = e.target.value;\r\n        setResultRoom(rooms.filter(room => room.name.toLowerCase().includes(value.toLowerCase())));\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div style={styles.searchRoom}>\r\n            <div style={styles.inputSection}>\r\n                <Icon style={styles.add} icon=\"bx:bx-arrow-back\" onClick={() => handleSearchRoom()}/>\r\n                <input style={styles.input} placeholder=\"search room\" onChange={handleChange} />\r\n            </div>\r\n            <RoomsList currentRoom={currentRoom} rooms={resultRoom} joinRoom={joinRoom} leaveRoom={leaveRoom} switchRoom={switchRoom} roomManage={roomManage} handleSearchRoom={handleSearchRoom} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchRoom;","/* eslint-disable no-unused-vars */\r\nimport { useState, useEffect } from 'react';\r\nimport '../src/App.css';\r\nimport io from 'socket.io-client';\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport ChatWindow from \"./Components/ChatWindow\";\r\nimport Login from './Components/Login/Login';\r\nimport Loading from './Components/Loading';\r\nimport UserArea from \"./Components/UserInformation/UserArea\";\r\nimport RoomsList from \"./Components/Rooms/RoomsList\";\r\nimport RoomsHeader from \"./Components/Rooms/RoomsHeader\";\r\nimport Guide from './Components/Guide/Guide';\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport { toast } from 'react-toastify'\r\nimport SearchRoom from './Components/List/SearchRoom';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL || '';\r\naxios.defaults.withCredentials = true;\r\n\r\nconst socket = io.connect(process.env.REACT_APP_API_URL || '');\r\n\r\nfunction App() {\r\n  const [connected, setConnect] = useState(false)\r\n  const [error, setError] = useState(false)\r\n  const [authenticated, setAuthenticated] = useState(false)\r\n  const [user, setUser] = useState(null)\r\n  const [roomId, setRoomId] = useState('')\r\n  const [roomPanel, setPanel] = useState(false)\r\n  const [currentRoom, setCurrentRoom] = useState({\r\n    _id: -1,\r\n    name: \" \",\r\n    color: ''\r\n  })\r\n  const [lastMsgRoomId, setLastMsgRoomId] = useState('')\r\n  const [rooms, setRooms] = useState([])\r\n  const [login, setLogin] = useState(false)\r\n  const [message, setMessage] = useState('')\r\n  const [showSearchRoom, setShowSearchRoom] = useState(false)\r\n\r\n  const limit = useMediaQuery({ maxWidth: 1300 })\r\n  const style = {\r\n    left: {\r\n      width: limit ? '15em' : '25%',\r\n      float: 'left',\r\n      // height: '100%',\r\n      boxSizing: 'border-box',\r\n      // background: '#E5E5E5',\r\n      // borderRight: '2px solid #4a336e'\r\n    },\r\n\r\n    right: {\r\n      width: '100%',\r\n      height: '100%',\r\n      float: 'right',\r\n      position: 'relative',\r\n      flexGrow: 1,\r\n    },\r\n\r\n    userInformation: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      borderBottom: '2px solid #4a336e',\r\n      padding: '20px',\r\n      fontSize: 'large',\r\n      marginBottom: '10px',\r\n    },\r\n  }\r\n\r\n  const logIn = async (user) => {\r\n    let userId = ''\r\n    try {\r\n      const result = await axios.post('/auth/login', user, { withCredentials: true })\r\n      toast.success('Logged in successfully')\r\n      setAuthenticated(result.data.user._id !== undefined)\r\n      setError(result.data.user._id === undefined)\r\n      setUser(result.data.user)\r\n      Cookies.set('userId', \"djsfksjdf\")\r\n      userId = result.data.user._id\r\n    } catch (err) {\r\n      toast.error(`${err?.response?.data?.msg}`)\r\n    }\r\n    const listOfRooom = await axios.get('/room/retrieve', { withCredentials: true })\r\n    setRooms(listOfRooom.data.msg)\r\n    if (listOfRooom.data.length !== 0)\r\n      setCurrentRoom(listOfRooom.data[0])\r\n    await socket.emit('login', userId)\r\n  }\r\n\r\n  const leaveRoom = async (id) => {\r\n    axios.post('/room/' + id + '/leave', { withCredentials: true }).then(result => {\r\n      const index = rooms.findIndex(room => room._id === id)\r\n      if (index !== -1) {\r\n        rooms.splice(index, 1)\r\n        const tmp = [...rooms]\r\n        tmp.every((room, index) => {\r\n          if (room._id === id) {\r\n            tmp.splice(index, 1)\r\n            return false\r\n          }\r\n          return true\r\n        })\r\n        setCurrentRoom({\r\n          _id: -1,\r\n          name: \" \",\r\n          color: ''\r\n        })\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  const findRoom = async (shortId) => {\r\n    const index = rooms.findIndex(room => room.shortId === shortId)\r\n    if (index === -1) {\r\n      const res = await axios.post('/room/' + shortId + '/attend', { withCredentials: true })\r\n      if (res.status === 200) {\r\n        setRooms([res.data.msg, ...rooms])\r\n        setCurrentRoom(res.data.msg)\r\n      } else if (res.status === 400) {\r\n        setCurrentRoom(res.data.msg)\r\n      } else {\r\n        toast.error(`${res.data.msg}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  const joinRoom = async (room) => {\r\n    if (room) {\r\n      try {\r\n        const response = await axios.post('/room/create', room, { withCredentials: true })\r\n        setRooms([response.data.msg, ...rooms])\r\n        setCurrentRoom(response.data.msg)\r\n      } catch (err) {\r\n        toast.error(`${err?.response?.data?.msg}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  const switchRoom = (newRoom) => {\r\n    if (newRoom?._id !== currentRoom?._id) {\r\n      socket.emit('leaveRoom', currentRoom?._id, newRoom?._id)\r\n      setCurrentRoom(newRoom)\r\n    }\r\n    setCurrentRoom(newRoom)\r\n    setShowSearchRoom(false)\r\n  }\r\n\r\n  const logout = async () => {\r\n    // const response = await axios.get('/user/logout', { withCredentials: true })\r\n    // if (response) {\r\n    //   setAuthenticated(false)\r\n    //   setLogin(false)\r\n    //   setCurrentRoom({\r\n    //     _id: -1,\r\n    //     name: \" \",\r\n    //     color: ''\r\n    //   })\r\n    //   setRooms([])\r\n    // }\r\n    const cookie = Cookies.get('userId')\r\n    let index = cookie.indexOf('\"')\r\n    let new_cookie = cookie.slice(index + 1, cookie.length - 1)\r\n    await socket.emit('logout', new_cookie)\r\n    Cookies.remove('userId')\r\n    window.location.reload()\r\n  }\r\n\r\n  const roomManage = (room) => {\r\n    setPanel(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const cookie = Cookies.get('userId')\r\n    setLogin(cookie !== undefined)\r\n    if (cookie !== undefined && !authenticated) {\r\n      axios.get('/user/find', { withCredentials: true }).then((res) => {\r\n        setUser(res.data.msg)\r\n      })\r\n      axios.get('/room/retrieve', { withCredentials: true }).then((res) => {\r\n        setRooms(res.data.msg)\r\n        if (res.data.length !== 0) {\r\n          setCurrentRoom(res.data.msg[0])\r\n        }\r\n      })\r\n      setAuthenticated(true)\r\n      let index = cookie.indexOf('\"')\r\n      let new_cookie = cookie.slice(index + 1, cookie.length - 1)\r\n      socket.emit('login', new_cookie)\r\n    }\r\n    socket.once('connected', () => setConnect(true))\r\n  }, [user, rooms, authenticated])\r\n\r\n  useEffect(() => {\r\n    if (currentRoom) {\r\n      socket.emit('joinRoom', currentRoom)\r\n    }\r\n  }, [currentRoom])\r\n\r\n  useEffect(() => {\r\n    try {\r\n      axios.get(`/room/${lastMsgRoomId}`, { withCredentials: true }).then((res) => {\r\n        if (currentRoom?._id !== lastMsgRoomId) {\r\n          setRooms([res.data.msg, ...rooms.filter(el => el._id !== res.data.msg._id)])\r\n          setCurrentRoom(currentRoom)\r\n        }\r\n      })\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }, [lastMsgRoomId])\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {!connected ? <Loading></Loading> : (((authenticated || login) && user) ?\r\n        <div style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n          <div style={{ height: '100%', display: 'flex' }}>\r\n            <div style={style.left}>\r\n              <UserArea user={user} logout={logout}></UserArea>\r\n              {showSearchRoom && <SearchRoom currentRoom={currentRoom} rooms={rooms} joinRoom={joinRoom} leaveRoom={leaveRoom} switchRoom={switchRoom} roomManage={roomManage} handleSearchRoom={setShowSearchRoom} />}\r\n              {!showSearchRoom && <RoomsHeader joinRoom={joinRoom} findRoom={findRoom} handleSearchRoom={setShowSearchRoom}></RoomsHeader>}\r\n              {!showSearchRoom && <RoomsList currentRoom={currentRoom} rooms={rooms} joinRoom={joinRoom} lastMsgRoomId={lastMsgRoomId} setLastMsgRoomId={setLastMsgRoomId} leaveRoom={leaveRoom} switchRoom={switchRoom} roomManage={roomManage} />}\r\n            </div>\r\n            {currentRoom ? <div style={style.right}>\r\n              <ChatWindow socket={socket} room={currentRoom} rooms={rooms} setRooms={setRooms} setLastMsgRoomId={setLastMsgRoomId} leave={leaveRoom}></ChatWindow>\r\n            </div> : <Guide></Guide>}\r\n          </div>\r\n        </div> : <Login message={message} logIn={logIn} invalid={error} errorToggle={setError}></Login>)}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n"],"sourceRoot":""}