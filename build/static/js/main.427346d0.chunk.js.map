{"version":3,"sources":["firebase/index.js","Components/Message/Input.js","Components/Emoji/Emoji.js","Components/Emoji/EmojiIcon.js","service/fetch.js","service/reaction.js","Components/Message/Dialog.js","Components/Message/Dialogs.js","service/room.js","Components/Room/CurrentRoom.js","Components/ChatHeader.js","service/message.js","Components/ChatWindow.js","Components/Intro/Intro.js","service/auth.js","Components/Login/Login.js","Components/Loading.js","service/user.js","Components/UserInformation/UserArea.js","Components/Room/Room.js","Components/Rooms/RoomsList.js","Components/Rooms/RoomsHeader.js","Components/Guide/Guide.js","Components/List/SearchRoom.js","App.js","index.js"],"names":["require","config","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","Input","setDialogs","useState","message","setMessage","showEmoji","setShowEmoji","files","setFiles","setUrls","id","url","name","fileUrl","previewImage","setPreviewImage","limit","useMediaQuery","maxWidth","style","input","display","position","left","top","width","textField","fontSize","outline","paddingLeft","paddingBottom","paddingTop","marginLeft","backgroundColor","color","send","right","cursor","attach","image","icons","file","bottom","fileImage","preview","zIndex","height","background","boxShadow","borderRadius","padding","alignItems","thumbnail","deletePreviewIcon","fileName","addFile","placeItems","border","boxSizing","addIcon","sendMessage","length","promises","map","promise","Promise","resolve","reject","metadata","contentType","type","ref","put","then","snapshot","getDownloadURL","push","all","urls","prevState","PreviewSelectedFiles","item","onClick","filter","icon","src","alt","htmlFor","FormControl","fullWidth","sx","m","TextField","value","onKeyUp","e","key","variant","placeholder","onChange","target","autoComplete","InputProps","endAdornment","InputAdornment","visibility","multiple","i","newFile","Math","random","split","reader","FileReader","readAsDataURL","onloadend","result","onSelect","native","emojiSize","Emoji","dialog","react","self","show","setShow","emoji","transition","emojiList","flexDirection","allEmoji","reaction","reactionId","_id","onMouseLeave","EmojiIcon","emojiIndex","marginRight","GetEmoji","fetchClient","axios","create","baseURL","interceptors","request","use","token","localStorage","getItem","Object","assign","headers","Authorization","reactionService","get","Icons","reactions","paddingRight","iconsInfo","from","reaction_type","Dialog","onDelete","room","socket","kickUser","widget","setWidget","setReaction","setSelf","showTime","setShowTime","selfAndCreator","setSelfAndCreator","fileNumber","setFileNumber","showInfoUser","setShowInfoUser","dialogDiv","marginBottom","bubble","margin","wordBreak","avatar","marginTop","flexShrink","opacity","widgetItem","deleteIcon","pinIcon","container","rowGap","reply","dialogDivInfoNameTime","dialogDivInfoName","fontWeight","dialogDivInfoTime","dialogDivInfoMessageWidget","dialogDivInfoMessage","dialogDivInfoFiles","gridTemplateColumns","gap","des","WebkitLineClamp","WebkitBoxOrient","overflow","textOverflow","workBreak","subInfo","alignContent","subInfoContainer","subInfoFullNameandUsername","subInfoFullName","subInfoUsername","textAlign","kick","useEffect","on","return_dialog","data","off","userId","creator","a","res","status","onMouseEnter","size","subInfoAvatar","fullname","username","moment","createdAt","calendar","content","index","format","pop","classList","toggle","controls","justifyContent","href","rel","objectFit","reaction_id","user_id","tmp","pre_react","every","findIndex","user","splice","emit","Dialogs","dialogs","deleteMessage","MessEnding","useRef","current","scrollIntoView","behavior","roomService","post","mess","curRoom","currentRoom","getCurrentRoom","setCurrentRoom","initCurrentRoom","TabPane","Tabs","ChatHeader","userOnline","userOffline","setUserOnline","setUserOffline","leave","users","setUsers","visible","setVisible","updateVisible","setUpdateVisible","pinnedMessage","setPinnedMessage","showPinnedMessage","setShowPinnedMessage","typeSearch","roomAvatarPreview","setRoomAvatarPreview","roomAvatar","setRoomAvatar","currentUser","description","isPrivate","roomUpdateInfo","setRoomUpdateInfo","setIsPrivate","dialogResult","setDialogResult","showDialogResult","setShowDialogResult","onClose","handleEditInfo","handleUpdateRoomInfo","roomUpdateInfo_","storageRef","toast","success","msg","error","response","chatHeader","pinMessageContainer","pinMessageIcon","pinMessageInfo","flexFlow","pinMessageContentText","chatInfo","chatName","numberOfUser","chatTool","tuneIcon","roomInfo","roomTitle","lineHeight","roomName","roomDescription","roomShortId","line","borderBottom","media","overflowY","mediaGrid","members","member","leaveRoom","leaveRoomIcon","with","leaveRoomText","dot","infoIcon","buttonEditDrawer","buttonUpdateDrawer","roomAvatarEdit","plusIconContainer","plusIcon","removeIcon","submitButton","searchResultContainer","searchResultOption","searchOption","closeIcon","find","online","r","pinnedMessages","at","roomId","onFinish","values","usersList","first","emails","join","Option","Select","selectBefore","defaultValue","v","search","setSearch","dialogContainer","dialogNameAndTime","dialogName","dialogTime","dialogMessage","messageId","colorOfDialog","dialogContainerAvatar","dialogContainerInfo","msgId","element","document","getElementById","setTimeout","addonBefore","onKeyPress","includes","temp","sort","b","maxHeight","overflowX","placement","extra","accept","newRoomAvatar","copy","shortId","labelCol","span","wrapperCol","Item","label","rules","required","defaultChecked","checkedChildren","unCheckedChildren","pre","prevRoomUpdateInfo","offset","htmlType","defaultActiveKey","tab","List","fields","add","remove","fieldKey","restField","align","block","messageService","ChatWindow","setLastMsgRoomId","newMessage","setNewMessage","delMessage","setDeleteMessage","prevMessage","setPrevMessage","ctRoom","date","d","Intro","begin","setBegin","text","transform","fontFamily","className","authService","configure","autoClose","draggable","POSITION","BOTTOM_RIGHT","Login","logIn","invalid","errorToggle","setError","email","password","setUser","hover","setHover","hoverLogin","setHoverLogin","code","verifyUser","setUserVerify","formId","setFormId","confirmPassword","setConfirmPassword","div","button","loginForm","signupForm","header","createAccount","buttons","forms","alertText","alert","registation","verify","validators","errorMessages","startAdornment","Button","preventDefault","Loading","CircularProgress","userService","useStyles","makeStyles","theme","large","spacing","UserArea","logout","classes","userAvatarPreview","setUserAvatarPreview","userInfo","setUserInfo","userAvatar","setUserAvatar","handleEditUserInfo","handleUpdateUserInfo","userInfoToUpdate","mediaMatch","window","matchMedia","matches","setMatches","handler","addListener","removeListener","userInformation","isRowBased","info","flexGrow","userAvaterEdit","Avatar","closable","title","onCancel","footer","newUserAvatar","pattern","Password","getFieldValue","validator","_","Error","Room","lastMsgRoomId","choosen","option","setOption","lastMsg","setLastMsg","room_container","roomMessage","roomMessageName","roomMessageLastMessage","messageTime","roomOption","private","lastMessage","lastMessageDate","fromNow","RoomsList","rooms","joinRoom","switchRoom","roomManage","leaveHandle","RoomsHeader","findRoom","handleSearchRoom","visibleCreate","setVisibleCreate","visibleJoin","setVisibleJoin","setRoom","setShortId","roomHeaderContainer","addUser","hideModalCreate","hideModalJoin","Guide","SearchRoom","resultRoom","setResultRoom","styles","inputSection","borderColor","searchRoom","toLowerCase","io","connect","App","setConnect","isLoading","setLoading","authenticated","setAuthenticated","setPanel","setRooms","showSearchRoom","setShowSearchRoom","lastMsgRoomId1","setLastMsgRoomId1","float","setItem","once","newRoom","clear","location","reload","getUserToken","el","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.427346d0.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nrequire('dotenv').config()\r\n\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\nconst storage = firebase.storage()\r\n\r\nexport { storage, firebase as default }\r\n","import { useState } from 'react'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport { TextField, FormControl, InputAdornment } from \"@material-ui/core\"\r\n\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\n\r\nimport { storage } from \"../../firebase/index\"\r\nimport { Icon } from '@iconify/react'\r\n\r\nconst Input = ({ setDialogs }) => {\r\n    const [message, setMessage] = useState('')\r\n    const [showEmoji, setShowEmoji] = useState(false)\r\n    const [files, setFiles] = useState([]);\r\n    const [urls, setUrls] = useState([]);\r\n    const [previewImage, setPreviewImage] = useState([{ id: null, url: null, name: null, fileUrl: null }]);\r\n\r\n    const limit = useMediaQuery({ maxWidth: 900 })\r\n    const limit2 = useMediaQuery({ maxWidth: 600 })\r\n    const style = {\r\n        input: {\r\n            display: 'block',\r\n            position: 'relative',\r\n            left: '10px',\r\n            top: '20px',\r\n            width: '108%',\r\n\r\n        },\r\n\r\n        textField: {\r\n            width: limit2 ? '60%' : limit ? '70%' : '90%',\r\n            fontSize: 'x-large',\r\n            outline: 'none',\r\n            paddingLeft: '20px',\r\n            paddingBottom: '10px',\r\n            paddingTop: '10px',\r\n            marginLeft: '30px',\r\n            backgroundColor: 'transparent',\r\n            color: '#FDFDFD',\r\n        },\r\n\r\n        send: {\r\n            position: 'absolute',\r\n            right: 10,\r\n            cursor: 'pointer',\r\n            color: '#6082B6',\r\n            fontSize: '30px',\r\n        },\r\n\r\n        attach: {\r\n            position: 'absolute',\r\n            right: 100,\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        image: {\r\n            position: 'absolute',\r\n            right: 50,\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        icons: {\r\n            fontSize: '30px',\r\n            position: 'absolute',\r\n            left: -45,\r\n            color: '#6082B6',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        file: {\r\n            color: '#6082B6',\r\n            fontSize: '30px',\r\n            position: 'absolute',\r\n            cursor: 'pointer',\r\n            right: 45,\r\n            bottom: 14\r\n        },\r\n\r\n        fileImage: {\r\n            color: '#6082B6',\r\n            fontSize: '30px',\r\n            position: 'absolute',\r\n            cursor: 'pointer',\r\n            right: 50,\r\n            bottom: 14\r\n        },\r\n\r\n        preview: {\r\n            zIndex: 1,\r\n            position: 'absolute',\r\n            width: '100%',\r\n            height: '200px',\r\n            right: '1px',\r\n            bottom: '60px',\r\n            background: '#6588DE',\r\n            boxShadow: '0px 8px 40px rgba(0, 72, 251, 0.3)',\r\n            borderRadius: '14px',\r\n            padding: '20px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n        },\r\n\r\n        thumbnail: {\r\n            width: '100px',\r\n            height: '100px',\r\n            borderRadius: '10px'\r\n        },\r\n\r\n        deletePreviewIcon: {\r\n            color: 'red',\r\n            fontSize: '20px',\r\n            cursor: 'pointer',\r\n            position: 'relative',\r\n            top: '-56px',\r\n        },\r\n\r\n        fileName: {\r\n            position: 'relative',\r\n            left: '50px',\r\n            top: '5px',\r\n            color: 'white'\r\n        },\r\n\r\n        addFile: {\r\n            display: 'grid',\r\n            placeItems: 'center',\r\n            position: 'relative',\r\n            bottom: 18,\r\n            left: 18,\r\n            width: '100px',\r\n            height: '100px',\r\n            borderRadius: '10px',\r\n            border: '1px dashed #F9FBFB',\r\n            boxSizing: 'border-box',\r\n        },\r\n\r\n        addIcon: {\r\n            fontSize: '50px',\r\n            color: '#F9FBFB',\r\n        }\r\n    }\r\n\r\n    const handleEmojiSelect = (e) => { setMessage((message) => (message += e.native)) }\r\n\r\n    const deletePreview = (id) => {\r\n        setPreviewImage(previewImage.filter(item => item.id !== id))\r\n        setFiles(files.filter(item => item.id !== id))\r\n    }\r\n\r\n    const handleImageChange = (e) => {\r\n        for (let i = 0; i < e.target.files.length; i++) {\r\n            const newFile = e.target.files[i]\r\n            newFile[\"id\"] = Math.random()\r\n            let fileUrl = ''\r\n            let name = ''\r\n            if (newFile.type.split('/')[0] !== 'image') {\r\n                fileUrl = 'file.png'\r\n                name = `file ${i + 1}`\r\n            } else {\r\n                fileUrl = null\r\n                name = `image ${i + 1}`\r\n            }\r\n            const reader = new FileReader()\r\n            reader.readAsDataURL(newFile)\r\n            reader.onloadend = () => {\r\n                setPreviewImage((prevState) => [...prevState, { id: newFile[\"id\"], url: reader.result, name, fileUrl }])\r\n            }\r\n            setFiles((prevState) => [...prevState, newFile])\r\n        }\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        if (message.length > 0 || files.length > 0) {\r\n            const promises = []\r\n            files.map((file) => {\r\n                const promise = new Promise((resolve, reject) => {\r\n                    const metadata = {\r\n                        contentType: file.type\r\n                    }\r\n                    const storageRef = storage.ref(`files/${file.name}`)\r\n                    storageRef.put(file, metadata).then((snapshot) => {\r\n                        snapshot.ref.getDownloadURL().then((url) => {\r\n                            resolve(url)\r\n                        })\r\n                    })\r\n                })\r\n                promises.push(promise)\r\n            })\r\n            Promise.all(promises).then((urls) => {\r\n                setUrls((prevState) => [...prevState, urls])\r\n                setDialogs(message, urls)\r\n            })\r\n        }\r\n        setPreviewImage([])\r\n        setFiles([])\r\n    }\r\n    const PreviewSelectedFiles = () => {\r\n        if (previewImage) {\r\n            return (\r\n                <div style={style.preview}>\r\n                    {previewImage.map((item) => {\r\n                        return (\r\n                            <div key={item.id}>\r\n                                <Icon onClick={() => deletePreview(item.id)} style={style.deletePreviewIcon} icon=\"ep:circle-close\" />\r\n                                <img style={style.thumbnail} src={item.fileUrl ? item.fileUrl : item.url} alt=\"thumb\" />\r\n                                <p style={style.fileName}>{item.name}</p>\r\n\r\n                            </div>\r\n                        )\r\n                    })}\r\n                    <div style={style.addFile}>\r\n                        <label htmlFor=\"files\"><Icon style={style.addIcon} icon=\"carbon:add-alt\" /></label>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div style={style.input}>\r\n            <FormControl fullWidth sx={{ m: 1 }}>\r\n                <TextField\r\n                    style={style.textField}\r\n                    value={message}\r\n                    onKeyUp={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                            sendMessage()\r\n                            setMessage('')\r\n                        }\r\n                    }}\r\n                    id=\"outlined-basic\"\r\n                    variant=\"outlined\"\r\n                    placeholder='Type a new message...'\r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    autoComplete=\"off\"\r\n                    InputProps={{\r\n                        endAdornment: (\r\n                            <InputAdornment position='end'>\r\n                                {/* <SendIcon\r\n                                    onClick={() => {\r\n                                        sendMessage()\r\n                                        setMessage('')\r\n                                    }}\r\n                                    color='primary'\r\n                                    fontSize='large'\r\n                                    style={style.send}\r\n                                /> */}\r\n                                <Icon onClick={() => {\r\n                                    sendMessage()\r\n                                    setMessage('')\r\n                                }}\r\n\r\n                                    style={style.send} icon=\"akar-icons:send\" />\r\n\r\n                                <Icon icon=\"fluent:emoji-24-regular\" style={style.icons} onClick={() => { setShowEmoji(!showEmoji) }}></Icon>\r\n                                <label htmlFor=\"files\"><Icon style={style.fileImage} icon=\"akar-icons:image\" /></label>\r\n                                <input id=\"files\" style={{ visibility: \"hidden\" }} type=\"file\" multiple onChange={handleImageChange} />\r\n                                {/* <label htmlFor=\"files\"><Icon style={style.file} icon=\"eva:attach-fill\" /></label>\r\n                                <input id=\"files\" style={{ visibility: \"hidden\" }} type=\"file\" accept=\".pdf, .txt, .docx\" multiple onChange={handleFileChange} /> */}\r\n                                {files.length > 0 && <PreviewSelectedFiles />}\r\n                                {showEmoji && (\r\n                                    <div style={{ position: \"fixed\", bottom: \"80px\", left: \"20%\", zIndex: \"1\" }}>\r\n                                        <Picker\r\n                                            onSelect={handleEmojiSelect}\r\n                                            emojiSize={20} />\r\n                                    </div>\r\n                                )}\r\n                            </InputAdornment>\r\n                        )\r\n                    }}\r\n                />\r\n            </FormControl>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Input","import EmojiEmotionsOutlinedIcon from '@material-ui/icons/EmojiEmotionsOutlined';\r\nimport { useState } from 'react'\r\n\r\nconst Emoji = ({ dialog, react, self }) => {\r\n    const [show, setShow] = useState(false)\r\n\r\n    const style = {\r\n        emoji: {\r\n            borderRadius: '50%',\r\n            padding: '1px',\r\n            cursor: 'pointer',\r\n            transition: 'background 300ms ease-out',\r\n        },\r\n\r\n        emojiList: {  \r\n            display: 'flex',\r\n            position: 'absolute',\r\n            top: -16,\r\n            right: self ? 2 : 'none',\r\n            flexDirection: self ? 'row-reverse' : 'row',\r\n        },\r\n\r\n        allEmoji: { \r\n            position: 'relative',   \r\n        }\r\n    }\r\n\r\n    const setEmoji = () => {\r\n        if (show)\r\n            setShow(false)\r\n        else\r\n            setShow(true)\r\n    }\r\n\r\n    const reaction = (reactionId) => {\r\n        react(reactionId, dialog._id)\r\n    }\r\n\r\n    return (\r\n        <div  style={style.allEmoji} onMouseLeave={() => setShow(false)}>\r\n            {\r\n                show && <div style={style.emojiList}>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(1)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(2)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(3)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(4)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(5)}></div>\r\n                    <div style={{fontSize: '15px', cursor:'pointer'}} onClick={() => reaction(6)}></div>\r\n                </div>\r\n            }\r\n            <EmojiEmotionsOutlinedIcon\r\n                style={style.emoji}\r\n                onClick={() => setEmoji()}\r\n            ></EmojiEmotionsOutlinedIcon>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Emoji","const EmojiIcon = ({emojiIndex}) => {\r\n    const style = {\r\n        marginRight: '2px',\r\n        cursor: 'pointer',\r\n        fontSize: 'small'\r\n    }\r\n    const GetEmoji = () => {\r\n        switch (emojiIndex)\r\n        {\r\n            case 1:\r\n                return <div style={style}></div>\r\n            case 2:\r\n                return <div style={style}></div>\r\n            case 3:\r\n                return <div style={style}></div>\r\n            case 4:\r\n                return <div style={style}></div>\r\n            case 5:\r\n                return <div style={style}></div>\r\n            case 6:\r\n                return <div style={style}></div>\r\n            default:\r\n                return \r\n        }\r\n    }\r\n    return (\r\n        <GetEmoji></GetEmoji>\r\n    )\r\n}\r\n\r\nexport default EmojiIcon","import axios from 'axios';\r\nrequire('dotenv').config()\r\n\r\nconst fetchClient = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8080',\r\n});\r\n\r\nconst beforeRequest = (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n        Object.assign(config.headers, { Authorization: `Bearer ${token}` });\r\n    }\r\n    return config;\r\n};\r\n\r\nfetchClient.interceptors.request.use(beforeRequest);\r\n\r\nexport { fetchClient };","import { fetchClient } from './fetch';\r\n\r\nconst getReactionsByMessage = (id) => fetchClient.get(`/reaction/message/${id}/retrieve`);\r\n\r\nexport const reactionService = {\r\n    getReactionsByMessage\r\n};","import { useState, useEffect } from 'react'\r\nimport Emoji from '../Emoji/Emoji';\r\nimport EmojiIcon from '../Emoji/EmojiIcon';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport PushPinIcon from '@mui/icons-material/PushPin';\r\nimport moment from 'moment';\r\nimport { reactionService } from \"../../service/reaction\"\r\nimport { Avatar } from 'antd';\r\n\r\n\r\nconst Icons = ({ reactions, self }) => {\r\n    const style = {\r\n        icons: {\r\n            display: 'flex',\r\n            position: 'absolute',\r\n            right: self && 0,\r\n            left: !self && 0,\r\n            bottom: -9,\r\n            borderRadius: '25px',\r\n            backgroundColor: '#aaa',\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={style.iconsInfo}>\r\n            <div style={style.icons}>\r\n                {reactions.map((reaction) => {\r\n                    if (reaction.from.length !== 0) {\r\n                        return <EmojiIcon key={reaction.reaction_type} emojiIndex={reaction.reaction_type}></EmojiIcon>\r\n                    }\r\n                    return null\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst Dialog = ({ dialog, onDelete, room, socket, kickUser }) => {\r\n    const [widget, setWidget] = useState(false)\r\n    const [reactions, setReaction] = useState([])\r\n    const [self, setSelf] = useState(null)\r\n    const [showTime, setShowTime] = useState(false)\r\n    const [selfAndCreator, setSelfAndCreator] = useState(null)\r\n    const [fileNumber, setFileNumber] = useState(0)\r\n    const [showInfoUser, setShowInfoUser] = useState(false)\r\n    const style = {\r\n        dialogDiv: {\r\n            width: '95%',\r\n            position: 'relative',\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'row',\r\n            marginLeft: '20px',\r\n            marginRight: '20px',\r\n            alignItems: 'flex-start',\r\n            padding: '0px',\r\n            marginBottom: '30px',\r\n        },\r\n\r\n        bubble: {\r\n            backgroundColor: self ? '#32a6b8' : '#c27f67',\r\n            color: '#ffffff',\r\n            padding: '5px 10px',\r\n            margin: '0px',\r\n            borderRadius: '25px',\r\n            maxWidth: '100%',\r\n            position: 'relative',\r\n            wordBreak: 'break-word',\r\n        },\r\n\r\n        avatar: {\r\n            position: 'relative',\r\n            marginTop: '15px',\r\n            background: `#${dialog.from.color}`,\r\n            flexShrink: 0,\r\n        },\r\n\r\n        widget: {\r\n            flexShrink: 0,\r\n            opacity: widget ? 1 : 0,\r\n            transition: 'opacity 250ms',\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'flex',\r\n        },\r\n\r\n        widgetItem: {\r\n            cursor: 'pointer',\r\n            borderRadius: '50%',\r\n        },\r\n\r\n        deleteIcon: {\r\n            borderRadius: '50%',\r\n            padding: '1px',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        pinIcon: {\r\n            borderRadius: '50%',\r\n            padding: '1px',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        container: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: self ? 'flex-end' : 'flex-start',\r\n            rowGap: '1em',\r\n            padding: '10px',\r\n            borderRadius: '14px',\r\n        },\r\n\r\n        reply: {\r\n            display: 'block',\r\n        },\r\n\r\n        dialogDivInfoNameTime: {\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'flex',\r\n            alignItems: 'baseline',\r\n            width: '100%',\r\n            marginBottom: '-10px',\r\n        },\r\n        dialogDivInfoName: {\r\n            color: '#52585D',\r\n            fontSize: '20px',\r\n            fontWeight: '600',\r\n            marginLeft: self ? '10px' : '0px',\r\n        },\r\n        dialogDivInfoTime: {\r\n            opacity: showTime ? 1 : 0,\r\n            transition: 'opacity 250ms',\r\n            color: '#52585D',\r\n            fontSize: '16px',\r\n            marginLeft: self ? '0px' : '10px',\r\n        },\r\n\r\n        dialogDivInfoMessageWidget: {\r\n            display: 'flex',\r\n            flexDirection: self ? 'row-reverse' : 'row',\r\n        },\r\n\r\n        dialogDivInfoMessage: {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: self ? 'flex-end' : 'flex-start',\r\n            margin: '0xp',\r\n        },\r\n\r\n        dialogDivInfoFiles: {\r\n            display: 'grid',\r\n            gridTemplateColumns: fileNumber === 1 ? 'repeat(1, 1fr)' : fileNumber == 2 ? 'repeat(2, 1fr)' : 'repeat(3, 1fr)',\r\n            gap: '10px',\r\n        },\r\n\r\n        des: {\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '150px',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        subInfo: {\r\n            position: 'absolute',\r\n            backgroundColor: 'rgb(227, 246, 252)',\r\n            bottom: '80px',\r\n            left: !self ? '-11px' : 'none',\r\n            right: self ? '-11px' : 'none',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: '10px',\r\n            padding: '10px',\r\n            borderRadius: '20px',\r\n            alignContent: 'flex-end',\r\n            alignItems: 'center',\r\n        },\r\n\r\n        subInfoContainer: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '10px'\r\n        },\r\n\r\n        subInfoFullNameandUsername: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: '3px',\r\n        },\r\n\r\n        subInfoFullName: {\r\n            fontSize: '20px',\r\n            color: 'rgb(82, 88, 93)',\r\n        },\r\n\r\n        subInfoUsername: {\r\n            color: 'rgb(255, 255, 255)',\r\n            background: 'rgb(101, 136, 222)',\r\n            padding: '4px',\r\n            borderRadius: '10px',\r\n            fontSize: '10px',\r\n            textAlign: 'center',\r\n        },\r\n\r\n        kick: {\r\n            fontSize: '15px',\r\n            margin: '0',\r\n            border: '1px solid red',\r\n            fontWeight: 600,\r\n            color: 'red',\r\n            width: '100%',\r\n            textAlign: 'center',\r\n            borderRadius: '10px',\r\n            cursor: 'pointer',\r\n        }\r\n    }\r\n\r\n    const react = (reaction_id, id) => {\r\n        const user_id = localStorage.getItem('userId')\r\n        const tmp = [...reactions]\r\n        let pre_react = 0\r\n\r\n        tmp.every(react => {\r\n            const index = react.from.findIndex(user => user.userId === user_id)\r\n            if (index !== -1) {\r\n                react.from.splice(index, 1)\r\n                pre_react = react.reaction_type\r\n                return false\r\n            }\r\n            return true\r\n        })\r\n\r\n        if (pre_react !== reaction_id) {\r\n            const index = tmp.findIndex(react => react.reaction_type === reaction_id)\r\n            if (index !== -1) {\r\n                tmp[index].from.push({ userId: user_id, username: ' ' })\r\n            } else {\r\n                tmp.push({\r\n                    reaction_type: reaction_id,\r\n                    from: [{\r\n                        userId: user_id,\r\n                        username: ' '\r\n                    }]\r\n                })\r\n            }\r\n        }\r\n\r\n        setReaction([...tmp])\r\n\r\n        socket.emit('get-reaction', dialog, reaction_id, user_id, room._id)\r\n    }\r\n\r\n    const setPin = () => {\r\n        socket.emit('set-pin', dialog, room._id)\r\n    }\r\n\r\n    useEffect(() => {\r\n        socket.on('return-reaction', (return_dialog) => {\r\n            if (dialog._id === return_dialog._id) {\r\n                setReaction(return_dialog.data)\r\n            }\r\n        })\r\n\r\n        return () => {\r\n            socket.off('return-reaction')\r\n        }\r\n\r\n    }, [dialog, socket])\r\n\r\n    useEffect(() => {\r\n        const userId = localStorage.getItem('userId')\r\n        setSelf(userId === dialog.from.userId)\r\n        if (userId === room.creator)\r\n            setSelfAndCreator(true)\r\n    }, [dialog])\r\n\r\n\r\n    useEffect(async () => {\r\n        let res = await reactionService.getReactionsByMessage(dialog._id)\r\n        if (res.status === 200)\r\n            setReaction(res.data.data)\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setFileNumber(dialog.urls.length)\r\n    }, [])\r\n\r\n    return (\r\n        <div id={dialog._id} style={style.dialogDiv} onMouseEnter={() => setShowTime(true)} onMouseLeave={() => setShowTime(false)}>\r\n            {!self &&\r\n                <div onMouseLeave={() => setShowInfoUser(false)}>\r\n                    <Avatar onMouseEnter={() => setShowInfoUser(true)} size={60} style={style.avatar} src={dialog.from.avatar}></Avatar>\r\n                    {showInfoUser && <div style={style.subInfo} >\r\n                        <div style={style.subInfoContainer}>\r\n                            <Avatar size={70} style={style.subInfoAvatar} src={dialog.from.avatar}></Avatar>\r\n                            <div style={style.subInfoFullNameandUsername}>\r\n                                <div style={style.subInfoFullName}>{dialog.from.fullname}</div>\r\n                                <div style={style.subInfoUsername}>{dialog.from.username}</div>\r\n                            </div>\r\n                        </div>\r\n                        {localStorage.getItem(\"userId\") === room.creator && <p style={style.kick} onClick={() => kickUser(dialog.from.userId, room._id)} >Kick</p>}\r\n                    </div>}\r\n                </div>\r\n            }\r\n            {self &&\r\n                <Avatar onMouseEnter={() => setShowInfoUser(true)} size={60} style={style.avatar} src={dialog.from.avatar}></Avatar>\r\n            }\r\n            <div style={style.container} onMouseEnter={() => setWidget(true)} onMouseLeave={() => setWidget(false)}>\r\n                {self && <div style={style.dialogDivInfoNameTime}>\r\n                    <div style={style.dialogDivInfoName}>{dialog.from.username}</div>\r\n                    <div style={style.dialogDivInfoTime}>{moment(dialog.createdAt).calendar()}</div>\r\n                </div>}\r\n                {!self && <div style={style.dialogDivInfoNameTime}>\r\n                    <div style={style.dialogDivInfoName}>{dialog.from.username}</div>\r\n                    <div style={style.dialogDivInfoTime}>{moment(dialog.createdAt).calendar()}</div>\r\n                </div>}\r\n\r\n                <div style={style.dialogDivInfoMessageWidget}>\r\n                    <div style={style.dialogDivInfoMessage}>\r\n                        {dialog.content && <p style={style.bubble}>{dialog.content}</p>}\r\n                        <Icons reactions={reactions} self={self} />\r\n                        <div style={style.dialogDivInfoFiles}>\r\n                            {\r\n                                dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                    let format = url.split('.').pop().split('?')[0]\r\n                                    if (format === 'mp4') {\r\n                                        return (\r\n                                            <video key={index} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} style={{ width: '500px', marginBottom: '10px', transition: '1s' }} controls>\r\n                                                <source src={url} type=\"video/mp4\" />\r\n                                            </video>\r\n                                        )\r\n                                    } else if (format === 'pdf') {\r\n                                        return (\r\n                                            <a style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                <img src='https://firebasestorage.googleapis.com/v0/b/chat-cord-712bf.appspot.com/o/default-avatar%2Fpdf_file_icon.png?alt=media&token=f12bd4a4-9d41-4096-9596-b3dfeb8d24b5' style={{ width: '50px', marginBottom: '10px', marginRight: '10px' }} />\r\n                                                <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                            </a>\r\n                                        )\r\n                                    } else if (format === 'docx' || format === 'doc') {\r\n                                        return (\r\n                                            <a style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                <img src='https://firebasestorage.googleapis.com/v0/b/chat-cord-712bf.appspot.com/o/default-avatar%2Fdocx_file_icon.png?alt=media&token=8c3eeb46-718b-4277-862f-da3236fb6182' style={{ width: '50px', marginBottom: '10px', marginRight: '10px', }} />\r\n                                                <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                            </a>\r\n                                        )\r\n                                    }\r\n                                    else if (format === 'jpg' || format === 'png' || format === 'jpeg') {\r\n                                        return (\r\n                                            <img key={index} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} src={url} style={{ width: '100%', height: '150px', objectFit: 'cover', marginBottom: '10px', transition: '1s' }} />\r\n                                        )\r\n                                    }\r\n                                })\r\n\r\n                            }\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={style.widget}>\r\n                        <Emoji dialog={dialog} react={react} self={self}></Emoji>\r\n                        <PushPinIcon style={style.pinIcon} onClick={() => {\r\n                            setPin()\r\n                        }}></PushPinIcon>\r\n                        {(self || selfAndCreator) &&\r\n                            <DeleteIcon\r\n                                style={style.deleteIcon}\r\n                                onClick={() => {\r\n                                    onDelete(dialog, room.creator)\r\n                                }}\r\n                            >\r\n                            </DeleteIcon>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Dialog","import Dialog from './Dialog'\r\nimport { useEffect, useRef } from 'react'\r\n\r\nconst Dialogs = ({socket, room, dialogs, deleteMessage, kickUser}) => {\r\n    const style = {\r\n        display: 'block',\r\n        width: '100%',\r\n        height: '77vh',\r\n        overflow: 'auto',\r\n        margin: '10px 0px 0px 10px',\r\n    }\r\n\r\n    const MessEnding = useRef(null)\r\n\r\n    useEffect(() => {\r\n        MessEnding.current.scrollIntoView({ behavior: 'smooth' })\r\n    }, [dialogs])\r\n\r\n    return (\r\n        <div style={style}>\r\n            {dialogs.map((dialog, index) => {\r\n                return <Dialog key={index} socket={socket} dialog={dialog} onDelete={deleteMessage} room={room} kickUser={kickUser}></Dialog>\r\n            })}\r\n            <div ref={MessEnding} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialogs","import { fetchClient } from './fetch';\r\n\r\nconst getRooms = () => fetchClient.get('/room/retrieve');\r\nconst getRoom = (id) => fetchClient.get(`/room/${id}`);\r\nconst createRoom = (room) => fetchClient.post('/room/create', room);\r\nconst updateRoom = (id, room) => fetchClient.put(`/room/${id}`, room);\r\nconst attendRoom = (id) => fetchClient.post(`/room/${id}/attend`);\r\nconst addMember = (id, user) => fetchClient.post(`/room/${id}/addMember`, user);\r\nconst leaveRoom = (id) => fetchClient.post(`/room/${id}/leave`);\r\nconst getMembers = (id) => fetchClient.get(`/room/${id}/members`);\r\nconst searchMessages = (id, mess) => fetchClient.get(`/room/${id}/messages/${mess}`); \r\nexport const roomService = {\r\n    getRooms,\r\n    getRoom,\r\n    createRoom,\r\n    updateRoom,\r\n    attendRoom,\r\n    addMember,\r\n    leaveRoom,\r\n    getMembers,\r\n    searchMessages\r\n};","const initCurrentRoom = () => {\r\n    var currentRoom = null\r\n    const getCurrentRoom = () => {\r\n        return currentRoom\r\n    }\r\n    const setCurrentRoom = (room) => {\r\n        currentRoom = room\r\n    }\r\n    return {\r\n        getCurrentRoom,\r\n        setCurrentRoom\r\n    }\r\n}\r\n\r\nconst curRoom = initCurrentRoom()\r\n\r\nexport default curRoom\r\n\r\n","import { Input, Select, Avatar, Drawer, Tabs, Space, Form, Switch, Button } from 'antd';\r\nimport { useEffect, useState } from 'react';\r\nimport copy from 'copy-to-clipboard';\r\nimport { toast } from 'react-toastify'\r\nimport { Icon } from '@iconify/react';\r\nimport { storage } from \"../firebase/index\"\r\nimport { roomService } from \"../service/room\"\r\nimport moment from 'moment';\r\nimport curRoom from './Room/CurrentRoom'\r\nconst { TabPane } = Tabs;\r\n\r\n\r\nconst ChatHeader = ({ userOnline, userOffline, setUserOnline, setUserOffline, room, dialogs, leave, socket }) => {\r\n    const [users, setUsers] = useState([])\r\n    const [visible, setVisible] = useState(false)\r\n    const [updateVisible, setUpdateVisible] = useState(false)\r\n    const [pinnedMessage, setPinnedMessage] = useState(false);\r\n    const [showPinnedMessage, setShowPinnedMessage] = useState(false);\r\n    var user = []\r\n    let typeSearch = 'All'\r\n    const [roomAvatarPreview, setRoomAvatarPreview] = useState(null)\r\n    const [roomAvatar, setRoomAvatar] = useState()\r\n    const currentUser = localStorage.getItem('userId')\r\n    const [roomUpdateInfo, setRoomUpdateInfo] = useState({\r\n        name: '',\r\n        description: '',\r\n        isPrivate: room.isPrivate,\r\n        avatar: '',\r\n    })\r\n    const [isPrivate, setIsPrivate] = useState(room.isPrivate)\r\n    const [dialogResult, setDialogResult] = useState([])\r\n    const [showDialogResult, setShowDialogResult] = useState(false)\r\n\r\n    const showDrawer = () => {\r\n        setVisible(true);\r\n    };\r\n    const onClose = () => {\r\n        setVisible(false);\r\n    };\r\n    const handleEditInfo = () => {\r\n        setUpdateVisible(!updateVisible);\r\n    }\r\n\r\n    const handleUpdateRoomAvatar = (e) => {\r\n        const newRoomAvatar = e.target.files[0]\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(newRoomAvatar)\r\n        reader.onloadend = () => {\r\n            setRoomAvatarPreview(reader.result)\r\n        }\r\n        setRoomAvatar(newRoomAvatar)\r\n    }\r\n\r\n\r\n    const handleUpdateRoomInfo = async () => {\r\n        let roomUpdateInfo_ = roomUpdateInfo\r\n        try {\r\n            if (roomAvatar) {\r\n                const metadata = {\r\n                    contentType: roomAvatar.type\r\n                }\r\n                const storageRef = storage.ref(`roomAvatars/${roomAvatar.name}`)\r\n                const snapshot = await storageRef.put(roomAvatar, metadata)\r\n                const url = await snapshot.ref.getDownloadURL()\r\n                roomUpdateInfo_.avatar = url\r\n            }\r\n            let res = await roomService.updateRoom(room?._id, roomUpdateInfo_)\r\n            \r\n            if (res.status === 200)\r\n                toast.success(res?.data?.msg)\r\n        } catch (err) {\r\n            toast.error(err?.response?.data?.msg)\r\n        }\r\n        setRoomAvatarPreview(roomUpdateInfo.avatar)\r\n        setRoomAvatar(null)\r\n        setUpdateVisible(false)\r\n    }\r\n\r\n    const style = {\r\n        chatHeader: {\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            padding: '50px',\r\n            backgroundColor: '#6588DE',\r\n            height: '20px',\r\n            width: '100%',\r\n            margin: '0px 0px 0px 10px',\r\n            position: 'relative',\r\n        },\r\n\r\n        pinMessageContainer: {\r\n            position: 'absolute',\r\n            backgroundColor: '#E3F6FC',\r\n            top: '110px',\r\n            left: '0px',\r\n            zIndex: '1',\r\n            width: '68%',\r\n            height: '50px',\r\n            display: 'flex',\r\n            gap: '10px',\r\n        },\r\n\r\n        pinMessageIcon: {\r\n            position: 'relative',\r\n            left: '5px',\r\n            top: '15px',\r\n            color: 'rgb(101, 136, 222)',\r\n            fontSize: '20px',\r\n        },\r\n\r\n        pinMessageInfo: {\r\n            width: '90%',\r\n            display: 'flex',\r\n            flexFlow: 'column',\r\n            padding: '2px'\r\n        },\r\n\r\n        pinMessageContentText: {\r\n            height: '100%',\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '107%',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        chatInfo: {\r\n            margin: '5px',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'flex-start',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        chatName: {\r\n            margin: '0px',\r\n            fontSize: '20px',\r\n            fontWeight: 'bold',\r\n            color: '#FDFDFE',\r\n        },\r\n\r\n        numberOfUser: {\r\n            margin: '0px',\r\n            fontSize: '14px',\r\n            color: '#F2F6F7',\r\n        },\r\n\r\n        chatTool: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            gap: '10px',\r\n            width: '30%',\r\n            position: 'relative',\r\n        },\r\n\r\n        tuneIcon: {\r\n            cursor: 'pointer',\r\n            fontSize: '20px',\r\n        },\r\n\r\n        roomInfo: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n        },\r\n\r\n        roomTitle: {\r\n            marginBottom: '30px',\r\n            fontWeight: 600,\r\n            fontSize: '18px',\r\n            lineHeight: '27px',\r\n            color: '#6588DE',\r\n        },\r\n\r\n        roomAvatar: {\r\n            marginBottom: '20px',\r\n            border: '4px solid #' + room.color,\r\n            borderRadius: '115px',\r\n        },\r\n\r\n        roomName: {\r\n            marginBottom: '6px',\r\n            fontWeight: 600,\r\n            fontSize: '16px',\r\n            lineHeight: '24px',\r\n            color: '#6588DE',\r\n        },\r\n\r\n        roomDescription: {\r\n            marginBottom: '20px',\r\n            fontSize: '12px',\r\n            lineHeight: '150.5%',\r\n            color: '#52585D',\r\n        },\r\n\r\n        roomShortId: {\r\n            cursor: 'pointer',\r\n            fontSize: '20px',\r\n            marginBottom: '30px',\r\n        },\r\n\r\n        line: {\r\n            width: '280px',\r\n            height: '0px',\r\n            borderBottom: '1px solid #D0D9DF',\r\n            marginBottom: '20px',\r\n        },\r\n\r\n        media: {\r\n            height: '400px',\r\n            overflowY: 'auto',\r\n            display: 'block',\r\n        },\r\n\r\n        mediaGrid: {\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(3, 1fr)',\r\n            gap: '10px',\r\n            maxWidth: '100%',\r\n        },\r\n\r\n        file: {\r\n            display: 'flex',\r\n            height: '400px',\r\n            flexDirection: 'column',\r\n            alignItems: 'flex-start',\r\n        },\r\n\r\n        members: {\r\n            display: 'flex',\r\n            height: '400px',\r\n            flexDirection: 'column',\r\n            alignItems: 'flex-start',\r\n            gap: '10px',\r\n            overflowY: 'auto',\r\n        },\r\n\r\n        member: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            alignItems: 'flex-end',\r\n            gap: '10px',\r\n        },\r\n\r\n\r\n        leaveRoom: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            cursor: 'pointer',\r\n            fontSize: '20px',\r\n            borderRadius: '8px',\r\n            alignItems: 'center',\r\n            gap: '11px',\r\n            border: '1px solid #6588DE',\r\n            height: '39px',\r\n        },\r\n\r\n        leaveRoomIcon: {\r\n            color: '#6588DE',\r\n            with: '18px',\r\n            height: '20px',\r\n            marginLeft: '14px',\r\n        },\r\n\r\n        leaveRoomText: {\r\n            margin: '0px',\r\n            with: '72px',\r\n            fontWeight: 500,\r\n            fontSize: '12px',\r\n            lineHeight: '18px',\r\n            color: '#6588DE'\r\n        },\r\n\r\n        avatar: {\r\n            position: 'relative',\r\n        },\r\n\r\n        dot: {\r\n            position: 'absolute',\r\n            bottom: '6px',\r\n            right: '3px',\r\n            height: '8px',\r\n            width: '8px',\r\n            borderRadius: '50%',\r\n            backgroundColor: '#46D362',\r\n        },\r\n\r\n        des: {\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '320px',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        infoIcon: {\r\n            position: 'relative',\r\n            top: '5px'\r\n        },\r\n\r\n        buttonEditDrawer: {\r\n            border: 'none',\r\n            backgroundColor: '#E3F6FC',\r\n            color: '#6588DE',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        buttonUpdateDrawer: {\r\n            position: 'relative',\r\n            left: '50%',\r\n            marginRight: '5px',\r\n        },\r\n\r\n        roomAvatarEdit: {\r\n            width: 'fit-content',\r\n            display: 'block',\r\n            margin: 'auto',\r\n            border: '4px solid #' + room.color,\r\n            borderRadius: '115px',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n        plusIconContainer: {\r\n            width: 55,\r\n            height: 55,\r\n            borderRadius: '50%',\r\n            border: '1px dashed #6ECB63',\r\n            display: 'grid',\r\n            placeItems: 'center',\r\n            backgroundColor: 'rgb(227, 246, 252)'\r\n        },\r\n\r\n        plusIcon: {\r\n            fontSize: '20px',\r\n        },\r\n\r\n        removeIcon: {\r\n            fontSize: '18px',\r\n            color: '#E74C3C',\r\n        },\r\n\r\n        submitButton: {\r\n            borderRadius: '5px'\r\n        },\r\n\r\n        searchResultContainer: {\r\n            position: 'absolute',\r\n            top: '76px',\r\n            left: '0px',\r\n            right: '0px',\r\n            backgroundColor: 'rgb(227, 246, 252)',\r\n            padding: '10px',\r\n            borderRadius: '0px 0px 10px 10px',\r\n            zIndex: '1',\r\n        },\r\n\r\n        searchResultOption: {\r\n            display: 'flex',\r\n            gap: '50px',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n        },\r\n\r\n        searchOption: {\r\n            color: 'rgb(82, 88, 93)',\r\n            cursor: 'pointer',\r\n            fontSize: '20px',\r\n            fontWeight: 'bold',\r\n        },\r\n\r\n        closeIcon: {\r\n            fontSize: '24px',\r\n            position: 'absolute',\r\n            top: '2px',\r\n            right: '6px',\r\n            color: 'rgb(82, 88, 93)',\r\n            cursor: 'pointer',\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let user = users.find(user => user._id === userOnline)\r\n        if (user) {\r\n            user.online = true\r\n            setUsers([...users])\r\n        }\r\n        setUserOnline('')\r\n    }, [userOnline])\r\n\r\n    useEffect(() => {\r\n        let user = users.find(user => user._id === userOffline)\r\n        if (user) {\r\n            user.online = false\r\n            setUsers([...users])\r\n        }\r\n        setUserOffline('')\r\n    }, [userOffline])\r\n\r\n    useEffect(async () => {\r\n        let res = await roomService.getMembers(room?._id)\r\n        if (res.status === 200)\r\n            setUsers(res.data.msg)\r\n\r\n        res = await roomService.getRoom(room?._id)\r\n        let r = res.data.msg\r\n        if (r?.pinnedMessages?.length > 0) {\r\n            setShowPinnedMessage(true)\r\n            setPinnedMessage(r.pinnedMessages.at(-1))\r\n        }\r\n        else\r\n            setShowPinnedMessage(false)\r\n    }, [room])\r\n\r\n    useEffect(() => {\r\n        socket.on('new-pinned-message', (roomId, r) => {\r\n            if (roomId === curRoom.getCurrentRoom()?._id) {\r\n                if (r.pinnedMessages.length === 0)\r\n                    setShowPinnedMessage(false)\r\n                else {\r\n                    setShowPinnedMessage(true)\r\n                    setPinnedMessage(r.pinnedMessages.at(-1))\r\n                }\r\n            }\r\n        })\r\n    }, [socket])\r\n\r\n    const copyToClipboard = () => {\r\n        copy(room?.shortId)\r\n        toast.success('Copied to clipboard')\r\n    }\r\n\r\n    const onFinish = async (values) => {\r\n        user = []\r\n        for (let i = 0; i < values.usersList.length; i++) {\r\n            user.push(values.usersList[i].first)\r\n        }\r\n        try {\r\n            let res = await roomService.addMember(room?._id, { emails: user.join(',') })\r\n            if (res.status === 200) {\r\n                toast.success(res.data.msg)\r\n            }\r\n        } catch (e) {\r\n            toast.error(`${e.response.data.msg}`)\r\n        }\r\n    }\r\n\r\n    const getTypeSearch = (v) => {\r\n        typeSearch = v\r\n    }\r\n    const { Option } = Select;\r\n\r\n    const selectBefore = (\r\n        <Select defaultValue=\"All\" onChange={getTypeSearch}>\r\n            <Option value=\"All\">All</Option>\r\n            <Option value=\"Message\">Message</Option>\r\n            <Option value=\"User\">User</Option>\r\n        </Select>\r\n    );\r\n\r\n\r\n    const Dialog = ({ dialog }) => {\r\n        const [search, setSearch] = useState(false)\r\n\r\n        const style = {\r\n            dialogContainer: {\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '10px',\r\n                marginTop: '15px',\r\n                backgroundColor: search ? 'rgb(101, 136, 222)' : '',\r\n                padding: '10px',\r\n                borderRadius: '10px',\r\n            },\r\n    \r\n            dialogNameAndTime: {\r\n                display: 'flex',\r\n                gap: '10px',\r\n                alignItems: 'center',\r\n            },\r\n    \r\n            dialogName: {\r\n                color: search ? 'white': 'rgb(82, 88, 93)',\r\n                fontSize: '20px',\r\n                fontWeight: '600',\r\n            },\r\n    \r\n            dialogTime: {\r\n                color: search ? 'white': 'rgb(82, 88, 93)',\r\n                fontWeight: '600',\r\n            },\r\n    \r\n            dialogMessage: {\r\n                fontSize: '16px',\r\n                color: search ? 'white': 'rgb(82, 88, 93)',\r\n                fontWeight: '600',\r\n                display: '-webkit-box',\r\n                WebkitLineClamp: 1,\r\n                WebkitBoxOrient: 'vertical',\r\n                overflow: 'hidden',\r\n                textOverflow: 'ellipsis',\r\n                width: '280px',\r\n                workBreak: 'break-word',\r\n            },\r\n        }\r\n        return (\r\n            <a href={'#' + dialog.messageId} onClick={() => { colorOfDialog(dialog.messageId) }} >\r\n            <div style={style.dialogContainer} onMouseEnter={() => setSearch(true)} onMouseLeave={() => setSearch(false)}>\r\n                <Avatar src={dialog.avatar} size={60} style={style.dialogContainerAvatar} />\r\n\r\n                <div style={style.dialogContainerInfo}>\r\n                    <div style={style.dialogNameAndTime}>\r\n                        <span style={style.dialogName}>{dialog.username}</span>\r\n                        <span style={style.dialogTime}>{moment(dialog.createdAt).calendar()}</span>\r\n                    </div>\r\n                    {/* <div onClick={() => { colorOfDialog(dialog.messageId) }}>\r\n                        <a href={'#' + dialog.messageId} style={style.dialogMessage}>\r\n                            {dialog.content}\r\n                        </a>\r\n                    </div> */}\r\n                    <span style={style.dialogMessage}>{dialog.content}</span>\r\n                </div>\r\n            </div>\r\n            </a>\r\n        )\r\n    }\r\n\r\n    const colorOfDialog = (msgId) => {\r\n        setShowDialogResult(false)\r\n        var element = document.getElementById(msgId);\r\n        element.style.backgroundColor = 'LightBlue'\r\n        element.style.borderRadius = '10px'\r\n        element.style.paddingRight = '10px'\r\n        setTimeout(() => { element.style.backgroundColor = 'White' }, 1000)\r\n    }\r\n\r\n    return (\r\n        <div style={style.chatHeader}>\r\n            <div style={style.chatInfo} onClick={showDrawer}>\r\n                <p style={style.chatName}>{room?.name} <Icon style={style.infoIcon} icon=\"ant-design:info-circle-outlined\" /></p>\r\n                <p style={style.numberOfUser}>{users?.length + ' members'}</p>\r\n            </div>\r\n            <div style={style.chatTool}>\r\n\r\n                <Input style={style.input} addonBefore={selectBefore} autoComplete='off' placeholder=\"Type user or a message you want to search...\" onKeyPress={async (e) => {\r\n                    if (e.key === 'Enter') {\r\n                        await roomService.searchMessages(room._id, e.target.value).then(\r\n                            (res) => {\r\n                                if (res.data.msg.length > 0) {\r\n                                    setShowDialogResult(true)\r\n                                    if (typeSearch === 'All')\r\n                                        setDialogResult(res.data.msg)\r\n                                    else if (typeSearch === 'Message')\r\n                                        setDialogResult(res.data.msg.filter(m => m.content.includes(e.target.value)))\r\n                                    else if (typeSearch === 'User')\r\n                                        setDialogResult(res.data.msg.filter(m => m.username.includes(e.target.value)))\r\n                                }\r\n                                else setShowDialogResult(false)\r\n                            }\r\n                        );\r\n                    }\r\n                }} />\r\n\r\n                {showDialogResult && dialogResult.length > 0 && <div style={style.searchResultContainer}>\r\n                    <Icon style={style.closeIcon} onClick={() => setShowDialogResult(false)} icon=\"ant-design:close-circle-outlined\" />\r\n\r\n                    <div style={style.searchResultOption}>\r\n                        <div style={style.searchOption} onClick={() => {\r\n                            var temp = [...dialogResult.sort((a, b) => (a.createdAt > b.createdAt) ? 1 : -1)]\r\n                            setDialogResult(temp)\r\n                        }}>Old</div>\r\n                        <div style={style.searchOption} onClick={() => {\r\n                            var temp = [...dialogResult.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : -1)]\r\n                            setDialogResult(temp)\r\n                        }}>New</div>\r\n                    </div>\r\n                    <div style={{ overflow: \"scroll\", maxHeight: \"500px\", overflowX: \"hidden\" }}>\r\n                        {\r\n                            dialogResult?.map((dialog, i) => {\r\n                                return (\r\n                                    <Dialog key={i} dialog={dialog}></Dialog>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>}\r\n            </div>\r\n            <Drawer\r\n                placement=\"right\"\r\n                onClose={onClose}\r\n                visible={visible}\r\n                extra={\r\n                    <Space>\r\n                        {\r\n                            room.isPrivate && localStorage.getItem('userId') === room.creator && <button onClick={handleEditInfo} style={style.buttonEditDrawer}>Edit</button>}\r\n                        {!room.isPrivate && <button onClick={handleEditInfo} style={style.buttonEditDrawer}>Edit</button>}\r\n                    </Space>\r\n                }\r\n            >\r\n                <div style={style.roomInfo}>\r\n                    <div style={style.roomTitle}>Room Info</div>\r\n                    {!updateVisible && <div style={style.roomAvatar}><Avatar size={200} src={room.avatar}></Avatar></div>}\r\n                    {updateVisible &&\r\n                        <div>\r\n                            <label style={style.roomAvatarEdit} htmlFor=\"roomAvatar\"><Avatar size={200} src={roomAvatarPreview ? roomAvatarPreview : room.avatar}></Avatar></label>\r\n                            <input id=\"roomAvatar\" style={{ visibility: \"hidden\" }} accept='image' type=\"file\" onChange={handleUpdateRoomAvatar} />\r\n                        </div>\r\n                    }\r\n                    {!room.isPrivate && <div style={style.roomShortId} onClick={copyToClipboard}>{room?.shortId}</div>}\r\n                    <div style={style.roomName}>{room?.name}</div>\r\n                    <div style={style.roomDescription}>{room?.description}</div>\r\n                    <div style={style.line}></div>\r\n                </div>\r\n                {updateVisible ?\r\n                    <Form\r\n                        labelCol={{ span: 10 }}\r\n                        wrapperCol={{ span: 20 }}\r\n                        onFinish={handleUpdateRoomInfo}\r\n                    >\r\n                        <Form.Item label=\"Room name\" rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input room name!'\r\n                            },\r\n                        ]}>\r\n                            <Input defaultValue={room.name} onChange={(e) => setRoomUpdateInfo({ ...roomUpdateInfo, name: e.target.value })} />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item label=\"Description\" rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please input room description!'\r\n                            },\r\n                        ]}>\r\n                            <Input defaultValue={room.description} onChange={(e) => setRoomUpdateInfo({ ...roomUpdateInfo, description: e.target.value })} />\r\n                        </Form.Item>\r\n\r\n                        {\r\n                            currentUser == room.creator && <Form.Item label=\"Mode\">\r\n                                <Switch defaultChecked={isPrivate} checkedChildren=\"Private\" unCheckedChildren=\"Public\" onClick={(e) => { setIsPrivate(pre => !pre); setRoomUpdateInfo(prevRoomUpdateInfo => { return ({ ...prevRoomUpdateInfo, isPrivate: !prevRoomUpdateInfo.isPrivate }) }) }} />\r\n                            </Form.Item>\r\n                        }\r\n\r\n                        <Form.Item wrapperCol={{ offset: 10, span: 16 }}>\r\n                            <Button type=\"primary\" htmlType=\"submit\">\r\n                                Save\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                    :\r\n                    <Tabs style={{ marginBottom: '25px' }} defaultActiveKey=\"1\">\r\n                        <TabPane tab=\"Images\" key=\"1\">\r\n                            <div style={style.media}>\r\n                                <div style={style.mediaGrid}>\r\n                                    {\r\n                                        dialogs.map(dialog => {\r\n                                            return dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                                let format = url.split('.').pop().split('?')[0]\r\n                                                if (format === 'jpg' || format === 'png' || format === 'jpeg') {\r\n                                                    return <img key={index} src={url} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} style={{ width: '100%', height: '100px', objectFit: 'cover', marginBottom: '10px', transition: '1s' }} />\r\n                                                }\r\n                                            })\r\n                                        })\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </TabPane>\r\n                        <TabPane tab=\"Videos\" key=\"2\">\r\n                            <div style={style.media}>\r\n                                <div style={style.mediaGrid}>\r\n                                    {\r\n                                        dialogs.map(dialog => {\r\n                                            return dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                                let format = url.split('.').pop().split('?')[0]\r\n                                                if (format === 'mp4') {\r\n                                                    return (\r\n                                                        <video key={index} onClick={(e) => { e.target.classList.toggle(\"zoom\") }} style={{ width: '100%', height: '100px', objectFit: 'cover', marginBottom: '10px', transition: '1s' }} controls>\r\n                                                            <source src={url} type=\"video/mp4\" />\r\n                                                        </video>\r\n                                                    )\r\n                                                }\r\n                                            })\r\n                                        })\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </TabPane>\r\n                        <TabPane tab=\"Files\" key=\"3\">\r\n                            <div style={style.file}>\r\n                                {\r\n                                    dialogs.map(dialog => {\r\n                                        return dialog.urls.length > 0 && dialog.urls.map((url, index) => {\r\n                                            let format = url.split('.').pop().split('?')[0]\r\n                                            if (format === 'pdf') {\r\n                                                return (\r\n                                                    <a key={index} style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                                    </a>\r\n                                                )\r\n                                            } else if (format === 'docx') {\r\n                                                return (\r\n                                                    <a key={index} style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }} key={index} href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <p style={style.des}>{url.split('%2F').pop().split('?')[0]}</p>\r\n                                                    </a>\r\n                                                )\r\n                                            }\r\n                                        })\r\n                                    })\r\n                                }\r\n                            </div>\r\n                        </TabPane>\r\n                        <TabPane tab=\"Members\" key=\"4\">\r\n                            <div style={style.members}>\r\n                                {\r\n                                    ((currentUser == room.creator && room.isPrivate) || !room.isPrivate) &&\r\n                                    <Form name=\"add user dynamic form\" autoComplete=\"off\" onFinish={onFinish}>\r\n                                        <Form.List name=\"usersList\">\r\n                                            {(fields, { add, remove }) => (\r\n                                                <>\r\n                                                    {fields.map(({ key, name, fieldKey, ...restField }) => (\r\n                                                        <Space key={key} style={{ display: 'flex', marginBottom: 2 }} align=\"baseline\">\r\n                                                            <Form.Item\r\n                                                                {...restField}\r\n                                                                name={[name, 'first']}\r\n                                                                fieldKey={[fieldKey, 'first']}\r\n                                                                rules={[{ type: 'email', required: true, message: 'Email is required!' }]}\r\n                                                            >\r\n                                                                <Input placeholder=\"Email\" />\r\n                                                            </Form.Item>\r\n                                                            <Icon style={style.removeIcon} icon=\"gg:remove\" onClick={() => remove(name)} />\r\n                                                        </Space>\r\n                                                    ))}\r\n                                                    <Form.Item>\r\n                                                        <Button onClick={() => add()} block style={style.plusIconContainer}><Icon style={style.plusIcon} icon=\"carbon:add\" /></Button>\r\n                                                    </Form.Item>\r\n                                                </>\r\n                                            )}\r\n                                        </Form.List>\r\n                                        <Form.Item>\r\n                                            <Button style={style.submitButton} type='primary' htmlType=\"submit\">\r\n                                                Add\r\n                                            </Button>\r\n                                        </Form.Item>\r\n                                    </Form>\r\n                                }\r\n                                {\r\n                                    users?.map((user, index) => {\r\n                                        return (\r\n                                            <div key={index} style={style.member}>\r\n                                                <div style={style.avatar}>\r\n                                                    <Avatar style={{ backgroundColor: '#' + user?.color }} size={50} src={user?.avatar}></Avatar>\r\n                                                    {user.online && <span style={style.dot}></span>}\r\n                                                </div>\r\n                                                <p style={{ fontSize: '16px' }}>{user?.username}</p>\r\n                                            </div>\r\n                                        )\r\n                                    })\r\n                                }\r\n                            </div>\r\n\r\n                        </TabPane>\r\n                    </Tabs>\r\n                }\r\n                {!updateVisible &&\r\n                    <div style={style.leaveRoom}>\r\n                        <Icon style={style.leaveRoomIcon} icon=\"pepicons:leave\" />\r\n                        <p style={style.leaveRoomText} onClick={() => {\r\n                            onClose()\r\n                            leave(room._id)\r\n                        }\r\n                        }>Leave Room</p>\r\n                    </div>\r\n                }\r\n            </Drawer>\r\n            {showPinnedMessage && <div style={style.pinMessageContainer}>\r\n                <Icon style={style.pinMessageIcon} icon=\"entypo:pin\" />\r\n                <div style={style.pinMessageInfo} onClick={() => { colorOfDialog(pinnedMessage.messageId) }}>\r\n                    <a href={'#' + pinnedMessage.messageId}>\r\n                        <b>Pinned Message</b>\r\n                        <p style={style.pinMessageContentText}>{pinnedMessage ? pinnedMessage?.message : room?.pinnedMessages?.at(-1)?.message}</p>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default ChatHeader","import { fetchClient } from './fetch';\r\n\r\nconst getMessages = (id) => fetchClient.get(`message/room/${id}`);\r\n\r\nexport const messageService = {\r\n    getMessages\r\n};","import Input from \"./Message/Input\"\r\nimport Dialogs from \"./Message/Dialogs\"\r\nimport ChatHeader from \"./ChatHeader\"\r\nimport curRoom from './Room/CurrentRoom'\r\nimport { useEffect, useState } from \"react\"\r\nimport { messageService } from \"../service/message\"\r\n\r\nconst ChatWindow = ({ socket, currentRoom, setLastMsgRoomId, leave, kickUser }) => {\r\n    const [dialogs, setDialogs] = useState([])\r\n    const [userOnline, setUserOnline] = useState('')\r\n    const [userOffline, setUserOffline] = useState('')\r\n    const [newMessage, setNewMessage] = useState(null)\r\n    const [delMessage, setDeleteMessage] = useState(null)\r\n    const [prevMessage, setPrevMessage] = useState('')\r\n    const dialogsUpdate = (message, urls) => {\r\n        socket.emit('chat', message, urls, localStorage.getItem('userId'), currentRoom._id)\r\n    }\r\n\r\n    const deleteMessage = (dialog, creator) => {\r\n        const userId = localStorage.getItem('userId')\r\n        if (dialog.from.userId === userId || creator === userId) {\r\n            socket.emit('delete', dialog._id, currentRoom?._id)\r\n        }\r\n    }\r\n\r\n    useEffect(async () => {\r\n        let res = await messageService.getMessages(currentRoom?._id)\r\n        if (res.status === 200) {\r\n            setDialogs(res.data.msg)\r\n        }\r\n    }, [currentRoom])\r\n\r\n    useEffect(() => {\r\n        socket.on('new_message', (dialog, ctRoom) => {\r\n            setLastMsgRoomId({\r\n                roomId: ctRoom,\r\n                msg: dialog.content,\r\n                date: dialog.createdAt\r\n            })\r\n            if (ctRoom === curRoom.getCurrentRoom()?._id) {\r\n                setNewMessage(dialog)\r\n            }\r\n        })\r\n        socket.on('dialog-deleted', (id) => {\r\n            setDeleteMessage(id)\r\n        })\r\n\r\n        return () => {\r\n            socket.off('your_new_message')\r\n            socket.off('dialog-deleted')\r\n        }\r\n    }, [currentRoom, socket])\r\n\r\n    useEffect(() => {\r\n        socket.on('loggedIn', (userId) => {\r\n            setUserOnline(userId)\r\n        })\r\n\r\n        socket.on('loggedOut', (userId) => {\r\n            setUserOffline(userId)\r\n        })\r\n\r\n        return () => {\r\n            socket.off('loggedIn')\r\n            socket.off('loggedOut')\r\n        }\r\n\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        if (newMessage && prevMessage !== newMessage._id) {\r\n            setDialogs([...dialogs, newMessage])\r\n            setPrevMessage(newMessage._id)\r\n        }\r\n    }, [newMessage])\r\n\r\n    useEffect(() => {\r\n        if (delMessage) {\r\n            const temp = [...dialogs]\r\n            temp.every((d, index) => {\r\n                if (d._id === delMessage) {\r\n                    temp.splice(index, 1)\r\n                    return false\r\n                }\r\n                return true\r\n            })\r\n\r\n            setDialogs([...temp])\r\n        }\r\n    }, [delMessage])\r\n\r\n    return (\r\n        <>\r\n            <ChatHeader userOnline={userOnline} userOffline={userOffline} setUserOnline={setUserOnline} setUserOffline={setUserOffline} room={currentRoom} dialogs={dialogs} leave={leave} socket={socket} />\r\n            <Dialogs room={currentRoom} socket={socket} dialogs={dialogs} setDialogs={setDialogs} deleteMessage={deleteMessage} kickUser={kickUser}></Dialogs>\r\n            <Input setDialogs={dialogsUpdate} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChatWindow","import { useEffect, useState } from 'react'\r\nimport './Intro.css'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\nconst Intro = () => {\r\n    const [begin, setBegin] = useState(false)\r\n\r\n    const limit = useMediaQuery({maxWidth: 1300})\r\n\r\n    const style = {\r\n        container: {\r\n            position: 'absolute',\r\n            left: '10em',\r\n            top: '-2.5em',\r\n            display: limit ? 'none' : 'block'\r\n        },\r\n\r\n        text: {\r\n            fontSize: '30px',\r\n            color: 'cyan',\r\n            fontWeight: 'bold',\r\n            transform: begin ? 'translate(200px, 0)' : 'none',\r\n            opacity: begin ? 1 : 0,\r\n            fontFamily: 'Comfortaa',\r\n            transition: 'transform 1000ms ease-out, opacity 800ms'\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            setBegin(true)\r\n        }, 2000)\r\n    }, [])\r\n\r\n    return (\r\n        <div style={style.container}>\r\n            <p className='intro-text'>Chatcord</p>\r\n            <p style={style.text}>...connect people around the world</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Intro","import { fetchClient } from './fetch';\r\n\r\nconst login = (user) => fetchClient.post('/auth/login', user);\r\nconst register = (user) => fetchClient.post('/auth/register', user);\r\nconst verify = (user) => fetchClient.post('/auth/verify', user);\r\n\r\nexport const authService = {\r\n    login,\r\n    register,\r\n    verify\r\n};","import Button from '@material-ui/core/Button';\r\nimport { useState } from 'react';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Intro from '../Intro/Intro'\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport { authService } from '../../service/auth'\r\nimport { Icon } from '@iconify/react';\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\r\ntoast.configure({\r\n    autoClose: 2000,\r\n    draggable: false,\r\n    position: toast.POSITION.BOTTOM_RIGHT\r\n})\r\n\r\nconst Login = ({ logIn, invalid, errorToggle, message }) => {\r\n    const [error, setError] = useState(false)\r\n    const [user, setUser] = useState({ email: '', fullname: '', username: '', password: '' })\r\n    const [hover, setHover] = useState(false)\r\n    const [hoverLogin, setHoverLogin] = useState(false)\r\n    const [verifyUser, setUserVerify] = useState({ email: '', code: '' })\r\n    const [formId, setFormId] = useState('login')\r\n    const limit = useMediaQuery({ maxWidth: 1300 })\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n    const style = {\r\n        textField: {\r\n            display: 'block',\r\n            marginBottom: '20px',\r\n        },\r\n\r\n        div: {\r\n            position: 'relative',\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'linear-gradient(135deg, rgba(88,63,243,1) 0%, rgba(255,77,0,0.7962535355939251) 100%)',\r\n        },\r\n\r\n        button: {\r\n            width: '100%',\r\n            backgroundColor: hoverLogin ? '#ffffff' : 'rgb(101, 136, 222)',\r\n            border: '1px solid rgb(101, 136, 222)',\r\n            color: hoverLogin ? 'rgb(101, 136, 222)' : '#ffffff',\r\n            height: '3em',\r\n            marginBottom: '1em'\r\n        },\r\n\r\n        loginForm: {\r\n            width: '350px',\r\n            overflow: 'hidden',\r\n            background: '#ffffff',\r\n            padding: '50px 0px 30px 0px',\r\n            borderRadius: '10px',\r\n            height: '550px',\r\n            maxWidth: '350px',\r\n            transition: 'max-width 200ms'\r\n        },\r\n\r\n        signupForm: {\r\n            width: '350px',\r\n            overflow: 'hidden',\r\n            background: '#ffffff',\r\n            padding: '50px 0px 30px 0px',\r\n            borderRadius: '10px',\r\n            height: 'fit-content',\r\n            maxWidth: '350px',\r\n            transition: 'max-width 200ms',\r\n        },\r\n\r\n        header: {\r\n            fontWeight: 'bold',\r\n            fontSize: '40px',\r\n            marginBottom: '1.5em',\r\n            color: 'rgb(101, 136, 222)'\r\n        },\r\n\r\n        createAccount: {\r\n            fontWeight: 'bold',\r\n            cursor: 'pointer',\r\n            color: hover ? 'rgb(101, 136, 222)' : '#000000',\r\n            transition: 'color 300ms'\r\n        },\r\n\r\n        buttons: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            margin: 'auto',\r\n            width: '50%',\r\n            paddingTop: '2em',\r\n            marginBottom: '4em',\r\n        },\r\n\r\n        forms: {\r\n            textAlign: 'center',\r\n            position: 'absolute',\r\n            right: limit ? 0 : '10em',\r\n            left: limit ? 0 : 'auto',\r\n            margin: 'auto',\r\n            top: '5em',\r\n            display: 'flex',\r\n            justifyContent: 'center'\r\n        },\r\n\r\n        alertText: {\r\n            color: 'red',\r\n            fontWeight: 'bold',\r\n        },\r\n\r\n        alert: {\r\n            color: '#ff0000',\r\n            opacity: invalid ? 1 : 0,\r\n            transition: 'opacity 250ms'\r\n        },\r\n\r\n        icon: {\r\n            color: 'rgb(101, 136, 222)',\r\n\r\n        }\r\n    }\r\n\r\n    const registation = async () => {\r\n        try {\r\n            if (user && user.email && user.fullname && user.username && user.password && confirmPassword && user.password === confirmPassword) {\r\n                let result = await authService.register(user)\r\n                toast.success(`${result.data.msg}`)\r\n                setFormId('verify')\r\n            } else {\r\n                toast.error('Please fill all fields')\r\n            }\r\n\r\n        } catch (error) {\r\n            setError(true)\r\n            toast.error(`${error.response.data.msg}`)\r\n        }\r\n    }\r\n\r\n    const verify = async () => {\r\n        try {\r\n            let result = await authService.verify(verifyUser)\r\n            if (result.status === 200) {\r\n                toast.success(`${result.data.msg}`)\r\n                setFormId('login')\r\n            }\r\n        } catch (error) {\r\n            toast.error(`${error.response.data.msg}`,)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={style.div}>\r\n            <Intro />\r\n            <div style={style.forms}>\r\n                {/* Login Form */}\r\n\r\n                {formId === 'login' &&\r\n                    <ValidatorForm\r\n                        style={style.loginForm}\r\n                    >\r\n                        <h1 style={style.header}>LOGIN</h1>\r\n                        <TextValidator\r\n                            validators={['required', 'isEmail']}\r\n                            errorMessages={['email is required', 'email is not valid']}\r\n                            value={user.email}\r\n                            id='input-with-icon-textfield'\r\n                            style={style.textField}\r\n                            onChange={(e) => setUser({ ...user, email: e.target.value })}\r\n                            placeholder='email'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon icon=\"carbon:email\" style={style.icon} />\r\n                                    </InputAdornment>\r\n                                ),\r\n                            }}\r\n                        />\r\n                        <TextValidator\r\n                            validators={['required',]}\r\n                            errorMessages={['password is required']}\r\n                            value={user.password}\r\n                            id='standard-basic-login-password'\r\n                            style={style.textField}\r\n                            onChange={(e) => setUser({ ...user, password: e.target.value })}\r\n                            onKeyUp={(e) => {\r\n                                if (e.key === 'Enter') {\r\n                                    logIn(user)\r\n                                }\r\n                            }}\r\n                            placeholder='password'\r\n                            type='password'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon icon='ant-design:lock-outlined' style={style.icon} />\r\n                                    </InputAdornment>\r\n                                )\r\n                            }}\r\n                        />\r\n                        <div style={style.buttons}>\r\n                            <Button\r\n                                style={style.button}\r\n                                variant='contained'\r\n                                color='primary'\r\n                                onClick={(e) => {\r\n                                    e.preventDefault()\r\n                                    logIn(user)\r\n                                }}\r\n                                onMouseEnter={() => setHoverLogin(true)}\r\n                                onMouseLeave={() => setHoverLogin(false)}\r\n                            >Log in</Button>\r\n                        </div>\r\n\r\n                        <p style={style.createAccount}\r\n                            onMouseEnter={() => setHover(true)}\r\n                            onMouseLeave={() => setHover(false)}\r\n                            onClick={e => {\r\n                                e.preventDefault()\r\n                                setUser({ email: '', password: '' })\r\n                                setFormId('signup')\r\n                            }}\r\n                        >Create account ?</p>\r\n                    </ValidatorForm>\r\n                }\r\n\r\n\r\n                {/* verify */}\r\n                {formId === 'verify' && <ValidatorForm autoComplete='off' style={style.loginForm}>\r\n                    <h1 style={style.header}>Verify</h1>\r\n                    <TextValidator\r\n                        required\r\n                        value={verifyUser.email}\r\n                        id='input-with-icon-textfield'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUserVerify({ ...verifyUser, email: e.target.value })}\r\n                        placeholder='email'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <Icon icon=\"carbon:email\" style={style.icon} />\r\n\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n\r\n                    <TextValidator\r\n                        required\r\n                        id='standard-basic'\r\n                        style={style.textField}\r\n                        onChange={(e) => setUserVerify({ ...verifyUser, code: e.target.value })}\r\n                        placeholder='verify code'\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <Icon icon='ant-design:lock-outlined' style={style.icon} />\r\n                                </InputAdornment>\r\n                            )\r\n                        }}\r\n                    />\r\n\r\n                    {error ? <h4 style={style.alert}>Something went wrong</h4> : null}\r\n                    <div style={style.buttons}>\r\n                        <Button style={style.button} variant='contained' color='primary' onClick={(e) => {\r\n                            e.preventDefault()\r\n                            verify()\r\n                        }}>Confirm</Button>\r\n                    </div>\r\n                </ValidatorForm>}\r\n\r\n                {/* create account */}\r\n                {formId === 'signup' &&\r\n                    <ValidatorForm\r\n                        style={style.signupForm}\r\n                    >\r\n                        <h1 style={style.header}>Create account</h1>\r\n                        <TextValidator\r\n                            required\r\n                            value={user.email}\r\n                            validators={['required', 'isEmail']}\r\n                            errorMessages={['email is required', 'email is not valid']}\r\n                            id='standard-basic'\r\n                            style={style.textField}\r\n                            onChange={(e) => setUser(user => ({ ...user, email: e.target.value }))}\r\n                            placeholder='email'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon icon=\"carbon:email\" style={style.icon} />\r\n\r\n                                    </InputAdornment>\r\n                                ),\r\n                            }}\r\n                        />\r\n\r\n                        <TextValidator\r\n                            required\r\n                            value={user.fullname}\r\n                            id='standard-basic'\r\n                            style={style.textField}\r\n                            onChange={(e) => setUser(user => ({ ...user, fullname: e.target.value }))}\r\n                            placeholder='fullname'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon style={style.icon} icon='bx:bx-user' />\r\n                                    </InputAdornment>\r\n                                ),\r\n                            }}\r\n                        />\r\n\r\n                        <TextValidator\r\n                            required\r\n                            value={user.username}\r\n                            id='standard-basic'\r\n                            style={style.textField}\r\n                            onChange={(e) => setUser(user => ({ ...user, username: e.target.value }))}\r\n                            placeholder='username'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon style={style.icon} icon='carbon:user-avatar' />\r\n                                    </InputAdornment>\r\n                                ),\r\n                            }}\r\n                        />\r\n                        <TextValidator\r\n                            validators={['required', 'matchRegexp:(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}']}\r\n                            errorMessages={['password is required', 'Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters']}\r\n                            value={user.password}\r\n                            id='standard-basic'\r\n                            style={style.textField}\r\n                            type='password'\r\n                            onChange={(e) => setUser(user => ({ ...user, password: e.target.value }))}\r\n                            placeholder='password'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon icon='ant-design:lock-outlined' style={style.icon} />\r\n                                    </InputAdornment>\r\n                                )\r\n                            }}\r\n                        />\r\n                        <TextValidator\r\n                            validators={['isPasswordMatch', 'required']}\r\n                            errorMessages={['password mismatch', 'confirm password is required']}\r\n                            error={error}\r\n                            id={error ? 'standard-error-helper-text' : 'standard-basic'}\r\n                            style={style.textField}\r\n                            type='password'\r\n                            value={confirmPassword}\r\n                            onChange={(e) => {\r\n                                setConfirmPassword(e.target.value)\r\n                                setError(e.target.value !== user.password)\r\n                            }}\r\n                            onKeyUp={(e) => {\r\n                                if (e.key === 'Enter') {\r\n                                    registation()\r\n                                }\r\n                            }}\r\n                            placeholder='confirm password'\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">\r\n                                        <Icon icon='ant-design:lock-outlined' style={style.icon} />\r\n                                    </InputAdornment>\r\n                                )\r\n                            }}\r\n                        />\r\n\r\n                        <div style={style.buttons}>\r\n                            <Button style={style.button} variant='contained' color='primary' onClick={(e) => {\r\n                                e.preventDefault()\r\n                                registation()\r\n                                setUserVerify({ email: user.email })\r\n                            }}>\r\n                                Create Account\r\n                            </Button>\r\n                            <Button style={{ background: '#ffffff', color: '#000000', border: '3px solid black' }} variant='contained' color='primary' onClick={(e) => {\r\n                                e.preventDefault()\r\n                                setFormId('login')\r\n                            }}>Back</Button>\r\n                        </div>\r\n\r\n                    </ValidatorForm>\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login","import CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst Loading = () => {\r\n    const style = {\r\n        textAlign: 'center',\r\n        height: '100%',\r\n        background: 'linear-gradient(135deg, rgba(88,63,243,1) 0%, rgba(255,77,0,0.7962535355939251) 100%)',\r\n\r\n        content: {\r\n            position: 'absolute',\r\n            top: '40%',\r\n            left: '45%',\r\n        }\r\n    }\r\n    return (\r\n        <div style={style}>\r\n            <div style={style.content}>\r\n                <CircularProgress></CircularProgress>\r\n                <p>Wait a few second...</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading","import { fetchClient } from './fetch';\r\n\r\nconst getUser = () => fetchClient.get('/user/find');\r\nconst updateUser = (id, user) => fetchClient.put(`/user/${id}`, user);\r\nexport const userService = {\r\n    getUser,\r\n    updateUser\r\n};","import Avatar from '@material-ui/core/Avatar'\r\nimport { makeStyles } from \"@material-ui/core\"\r\nimport { Icon } from '@iconify/react'\r\nimport { useState } from 'react'\r\nimport { Modal, Form, Input, Avatar as UserAvatar, Button } from 'antd'\r\nimport { storage } from \"../../firebase/index\"\r\nimport { toast } from 'react-toastify'\r\nimport { userService } from \"../../service/user\"\r\nimport { useEffect } from 'react'\r\nconst useStyles = makeStyles((theme) => ({\r\n  large: {\r\n    width: theme.spacing(10),\r\n    height: theme.spacing(10)\r\n  },\r\n}))\r\n\r\nconst UserArea = ({ user, logout }) => {\r\n  const classes = useStyles()\r\n  const [updateVisible, setUpdateVisible] = useState(false)\r\n  const [userAvatarPreview, setUserAvatarPreview] = useState(null)\r\n  const [userInfo, setUserInfo] = useState({\r\n    fullname: '',\r\n    username: '',\r\n    avatar: '',\r\n    password: '',\r\n  })\r\n  const [userAvatar, setUserAvatar] = useState()\r\n\r\n  const handleEditUserInfo = () => {\r\n    setUpdateVisible(!updateVisible)\r\n  }\r\n\r\n  const handleUpdateUserInfo = async () => {\r\n    let userInfoToUpdate = userInfo\r\n    if (userAvatar) {\r\n      const metadata = {\r\n        contentType: userAvatar.type\r\n      }\r\n      const storageRef = storage.ref(`userAvatars/${userAvatar.name}`)\r\n      const snapshot = await storageRef.put(userAvatar, metadata)\r\n      const url = await snapshot.ref.getDownloadURL()\r\n      userInfoToUpdate.avatar = url\r\n    }\r\n    try {\r\n      let res = await userService.updateUser(user?.id, userInfoToUpdate)\r\n      toast.success(res?.data?.msg)\r\n    } catch (err) {\r\n      toast.error(`${err?.response?.data?.msg}`)\r\n    }\r\n    setUserAvatarPreview(userInfo.avatar)\r\n    setUserAvatar(null)\r\n    setUpdateVisible(false)\r\n  }\r\n  const handleUpdateUserAvatar = (e) => {\r\n    const newUserAvatar = e.target.files[0]\r\n    const reader = new FileReader()\r\n    reader.readAsDataURL(newUserAvatar)\r\n    reader.onloadend = () => {\r\n      setUserAvatarPreview(reader.result)\r\n    }\r\n    setUserAvatar(newUserAvatar)\r\n  }\r\n  const mediaMatch = window.matchMedia(\"(min-width: 970px)\")\r\n  const [matches, setMatches] = useState(mediaMatch.matches);\r\n  // const limit = useMediaQuery({ maxWidth: 1300 })\r\n  useEffect(() => {\r\n    const handler = e => setMatches(e.matches);\r\n    mediaMatch.addListener(handler);\r\n    return () => mediaMatch.removeListener(handler);\r\n  });\r\n  const style = {\r\n    userInformation: isRowBased => ({\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      alignContent: 'flex-start',\r\n      justifyContent: 'flex-end',\r\n      height: '100px',\r\n      width: '100%',\r\n      backgroundColor: '#E3F6FC',\r\n      marginBottom: '10px',\r\n    }),\r\n    avatar: isRowBased => ({\r\n      // fontSize: isRowBased ? '24px' : '8px',\r\n      marginRight: isRowBased ? '20px' : '10px',\r\n      marginLeft: isRowBased ? '20px' : '10px',\r\n      background: '#' + user?.color,\r\n      cursor: 'pointer',\r\n    }),\r\n    info: {\r\n      flexGrow: 1,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'start',\r\n    },\r\n    fullname: isRowBased => ({\r\n      fontWeight: '600',\r\n      fontSize: isRowBased ? '18px' : '12px',\r\n      color: '#52585D',\r\n      margin: isRowBased ? '0px' : '5px',\r\n      width: '100%'\r\n    }),\r\n    username: {\r\n      padding: '5px 8px',\r\n      backgroundColor: '#6588DE',\r\n      borderRadius: '14px',\r\n      color: '#FFFFFF',\r\n      fontSize: '10px',\r\n\r\n    },\r\n\r\n    userAvaterEdit: {\r\n      width: 'fit-content',\r\n      display: 'block',\r\n      margin: 'auto',\r\n      border: '4px solid #' + user?.color,\r\n      borderRadius: '115px',\r\n      cursor: 'pointer',\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={style.userInformation(matches)}>\r\n      <Avatar onClick={handleEditUserInfo} style={style.avatar(matches)} className={classes.large} src={user?.avatar}></Avatar>\r\n\r\n      <Modal visible={updateVisible} closable={false} title=\"Update User Info\" onCancel={handleEditUserInfo} footer={null}>\r\n        {updateVisible &&\r\n          <div>\r\n            <label style={style.userAvaterEdit} htmlFor=\"userAvatar\"><UserAvatar size={200} src={userAvatarPreview ? userAvatarPreview : user.avatar}></UserAvatar></label>\r\n            <input id=\"userAvatar\" style={{ visibility: \"hidden\" }} accept='image/*' type=\"file\" onChange={handleUpdateUserAvatar} />\r\n          </div>\r\n        }\r\n        <Form\r\n          labelCol={{ span: 8 }}\r\n          wrapperCol={{ span: 16 }}\r\n          onFinish={handleUpdateUserInfo}\r\n        >\r\n          <Form.Item label=\"Full Name\" rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your full name!',\r\n            },\r\n          ]}>\r\n            <Input defaultValue={user?.fullname} onChange={(e) => setUserInfo({ ...userInfo, fullname: e.target.value })} />\r\n          </Form.Item>\r\n          <Form.Item label=\"Username\" rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your username!',\r\n            },\r\n          ]}>\r\n            <Input defaultValue={user?.username} onChange={(e) => setUserInfo({ ...userInfo, username: e.target.value })} />\r\n          </Form.Item>\r\n          <Form.Item label=\"Password\" name=\"password\"\r\n            rules={[\r\n              {\r\n                pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{6,}$/,\r\n                message: 'Password must be at least 6 characters, contain at least one uppercase letter, one lowercase letter, one number and one special character!',\r\n              }\r\n            ]}>\r\n            <Input.Password onChange={(e) => setUserInfo({ ...userInfo, password: e.target.value })} />\r\n          </Form.Item>\r\n          <Form.Item label=\"Confirm Password\" name=\"confirm\"\r\n            rules={[\r\n              {\r\n                pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{6,}$/,\r\n                message: 'Password must be at least 6 characters, contain at least one uppercase letter, one lowercase letter, one number and one special character!',\r\n              },\r\n              ({ getFieldValue }) => ({\r\n                validator(_, value) {\r\n                  if (!value || getFieldValue('password') === value) {\r\n                    return Promise.resolve();\r\n                  }\r\n                  return Promise.reject(new Error('The two passwords that you entered do not match!'));\r\n                },\r\n              }),\r\n            ]}>\r\n            <Input.Password />\r\n          </Form.Item>\r\n\r\n          <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Save\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      <div style={style.info}>\r\n        <p style={style.fullname(matches)}>{user?.fullname}</p>\r\n        <p style={style.username}>{user?.username}</p>\r\n      </div>\r\n      <Icon icon=\"ion:log-out-outline\" style={{ fontSize: '30px', cursor: 'pointer' }} onClick={logout} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserArea","import { useEffect, useState } from 'react';\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport moment from 'moment';\r\nimport { Avatar } from 'antd';\r\nimport { Icon } from '@iconify/react';\r\n\r\nconst Room = ({ room, onClick, lastMsgRoomId, choosen }) => {\r\n    const [option, setOption] = useState(false)\r\n    const [hover, setHover] = useState(false)\r\n    const [lastMsg, setLastMsg] = useState({\r\n        roomId: '',\r\n        msg: '',\r\n        date: null\r\n    })\r\n    const limit = useMediaQuery({ maxWidth: 1300 })\r\n\r\n    const style = {\r\n        room_container: {\r\n            position: 'relative',\r\n            marginTop: '18px',\r\n        },\r\n\r\n        room: {\r\n            position: 'relative',\r\n            width: limit ? '12em' : '90%',\r\n            margin: 'auto',\r\n            background: (choosen || hover) ? '#6588DE' : '#E3F6FC',\r\n            padding: '10px',\r\n            borderRadius: '14px',\r\n            boxShadow: (choosen || hover) ? '0px 8px 40px rgba(0, 72, 251, 0.3)' : 'none',\r\n            overflow: 'hidden',\r\n            marginBottom: 10,\r\n            maxHeight: option ? limit ? '250px' : '220px' : '100px',\r\n            transition: 'max-height 250ms, border 250ms, background 250ms',\r\n            height: '74px',\r\n        },\r\n\r\n        roomInfo: {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            display: 'flex',\r\n            cursor: 'pointer',\r\n            alignItems: 'center',\r\n            alignContent: 'center',\r\n            flexDirection: 'row',\r\n            gap: '10px',\r\n        },\r\n\r\n        avatar: {\r\n            fontSize: '20px',\r\n            flexShrink: 0,\r\n            background: '#' + room?.color,\r\n        },\r\n\r\n        roomMessage: {\r\n            flexGrow: '1',\r\n        },\r\n\r\n        roomMessageName: {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            fontSize: '18px',\r\n            fontWeight: 'bold',\r\n            color: (choosen || hover) ? '#FDFDFE' : '#52585D',\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '150px',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        roomMessageLastMessage: {\r\n            margin: '0px',\r\n            padding: '0px',\r\n            fontSize: '12px',\r\n            color: (choosen || hover) ? '#F2F6F7' : '#96A9BA',\r\n            display: '-webkit-box',\r\n            WebkitLineClamp: 1,\r\n            WebkitBoxOrient: 'vertical',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis',\r\n            width: '150px',\r\n            workBreak: 'break-word',\r\n        },\r\n\r\n        messageTime: {\r\n            color: (choosen || hover) ? '#FDFDFE' : '#96A9BA',\r\n        },\r\n\r\n        button: {\r\n            position: 'absolute',\r\n            fontSize: '50px',\r\n            color: '#5b5b5b',\r\n            right: '0.5em',\r\n            top: 40,\r\n            margin: 'auto',\r\n            transform: option ? 'rotate(90deg)' : 'none',\r\n            transition: 'transform 200ms'\r\n        },\r\n\r\n        roomOption: {\r\n            background: '#c4c4c4',\r\n            fontSize: 'large',\r\n            marginBottom: '0',\r\n            marginTop: '0.1em',\r\n            borderRadius: '5px',\r\n            cursor: 'pointer',\r\n            paddingLeft: '1em',\r\n        },\r\n\r\n        private: {\r\n            position: 'absolute',\r\n            fontSize: '30px',\r\n            right: 0,\r\n            top: 0,\r\n            color: '#52585D',\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (option && !choosen) {\r\n            setOption(false)\r\n        }\r\n        if (room?._id === lastMsgRoomId.roomId) {\r\n            room.lastMessage = lastMsgRoomId.msg\r\n            room.lastMessageDate = lastMsgRoomId.date\r\n        }\r\n        setLastMsg({\r\n            roomId: room?._id,\r\n            msg: room?.lastMessage,\r\n            date: room?.lastMessageDate,\r\n        })\r\n    }, [lastMsgRoomId])\r\n\r\n\r\n    useEffect(() => {\r\n        setLastMsg({\r\n            roomId: room?._id,\r\n            msg: room?.lastMessage,\r\n            date: room?.lastMessageDate,\r\n        })\r\n    }, [])\r\n\r\n    return (\r\n        <div style={style.room_container} onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}>\r\n            <div style={style.room}>\r\n                <div style={style.roomInfo} onClick={() => onClick(room)}>\r\n                    <Avatar size={56} style={style.avatar} src={room.avatar}></Avatar>\r\n                    <div style={style.roomMessage}>\r\n                        <p style={style.roomMessageName}>{room?.name}</p>\r\n                        <p style={style.roomMessageLastMessage}>{lastMsg.msg}</p>\r\n                    </div>\r\n                    <span style={style.messageTime}>{moment(`${lastMsg.date}`).fromNow()}</span>\r\n                    {room.isPrivate && <Icon style={style.private} icon=\"ri:chat-private-line\" />}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Room","import Room from \"../Room/Room\"\r\n\r\nconst RoomsList = ({rooms, joinRoom, leaveRoom, switchRoom, roomManage, currentRoom, lastMsgRoomId, setLastMsgRoomId}) => {\r\n    const style = {\r\n        roomList: {\r\n            overflow: 'auto',\r\n            width: '100%',\r\n            height: '77%',\r\n            backgroundColor: '#E3F6FC',\r\n        },\r\n    }\r\n\r\n\r\n    return (\r\n        <div style={style.roomList}>\r\n          {rooms?.map((room, index) => {\r\n            return (\r\n              <Room key={index} choosen={currentRoom?._id === room?._id} room={room} lastMsgRoomId={lastMsgRoomId} setLastMsgRoomId={setLastMsgRoomId} leaveHandle={leaveRoom} onClick={switchRoom} roomManage={roomManage}></Room>\r\n            )\r\n          })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RoomsList","/* eslint-disable no-unused-vars */\r\nimport { Icon } from '@iconify/react';\r\nimport { Modal, Button, Form, Input, Switch } from 'antd';\r\nimport { useState } from 'react';\r\n\r\n\r\nconst RoomsHeader = ({ joinRoom, findRoom, handleSearchRoom }) => {\r\n    const [visibleCreate, setVisibleCreate] = useState(false)\r\n    const [visibleJoin, setVisibleJoin] = useState(false)\r\n    const [isPrivate, setIsPrivate] = useState(false)\r\n    const [room, setRoom] = useState({ name: '', description: '', isPrivate: false })\r\n\r\n    const [shortId, setShortId] = useState('')\r\n\r\n\r\n    const style = {\r\n        roomHeaderContainer: {\r\n            display: 'flex',\r\n            justifyContent: 'space-around',\r\n            alignItems: 'center',\r\n            backgroundColor: '#E3F6FC',\r\n            height: '10%',\r\n            padding: '10px',\r\n            width: '100%',\r\n        },\r\n        input: {\r\n            width: '100%',\r\n            outline: 'none',\r\n            fontSize: '1.2rem',\r\n            borderRadius: '8px',\r\n            height: '40px',\r\n            backgroundColor: '#FDFDFD',\r\n            border: '1px solid #6588DE',\r\n            boxSizing: 'border-box',\r\n            margin: '5px',\r\n            marginLeft: '15px',\r\n        },\r\n        add: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n        join: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n        addUser: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n    }\r\n\r\n    const showModalCreate = () => {\r\n        setVisibleCreate(true);\r\n    }\r\n\r\n    const hideModalCreate = () => {\r\n        setVisibleCreate(false);\r\n    }\r\n\r\n    const creatRoom = () => {\r\n        joinRoom(room)\r\n        hideModalCreate()\r\n    }\r\n\r\n    const showModalJoin = () => {\r\n        setVisibleJoin(true);\r\n    }\r\n\r\n    const hideModalJoin = () => {\r\n        setVisibleJoin(false);\r\n    }\r\n\r\n    const joinWithRoomId = () => {\r\n        findRoom(shortId)\r\n        hideModalJoin()\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={style.roomHeaderContainer}>\r\n                <Icon style={style.add} icon=\"akar-icons:search\" onClick={handleSearchRoom} />\r\n                <Icon style={style.add} icon=\"akar-icons:chat-add\" onClick={showModalCreate} />\r\n                <Icon style={style.join} icon=\"fluent:chat-arrow-back-16-regular\" onClick={showModalJoin} />\r\n            </div>\r\n\r\n            <Modal title=\"Create room\" closable={false} visible={visibleCreate} footer={[\r\n                <Button onClick={hideModalCreate}>\r\n                    Cancel\r\n                </Button>,\r\n                <Button key=\"submit\" type=\"primary\" onClick={creatRoom} >\r\n                    Create\r\n                </Button>,\r\n            ]}>\r\n                <Form name=\"control-hooks\">\r\n                    <Form.Item label=\"Room name\" name=\"roomName\" rules={[{ required: true }]} onChange={(e) => setRoom(room => ({ ...room, name: e.target.value }))}\r\n                    >\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Description\" name=\"description\" rules={[{ required: true }]} onChange={(e) => setRoom(room => ({ ...room, description: e.target.value }))}>\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Switch checkedChildren=\"Private\" unCheckedChildren=\"Public\" onChange={(e) => setRoom(room => ({ ...room, isPrivate: !isPrivate }))} />\r\n                </Form>\r\n            </Modal>\r\n\r\n            <Modal title=\"Join room\" closable={false} visible={visibleJoin} footer={[\r\n                <Button onClick={hideModalJoin}>\r\n                    Cancel\r\n                </Button>,\r\n                <Button key=\"submit\" type=\"primary\" onClick={joinWithRoomId} >\r\n                    Join\r\n                </Button>,\r\n            ]}>\r\n                <Form name=\"control-hooks\">\r\n                    <Form.Item label=\"Room ID\" name=\"roomShortId\" rules={[{ required: true }]} onChange={(e) => setShortId(e.target.value)}>\r\n                        <Input />\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n\r\n        </>\r\n    )\r\n};\r\n\r\nexport default RoomsHeader","const Guide = () => {\r\n    const styles = {\r\n        guide: {\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            width: '100%',\r\n            height: '95%',\r\n            fontSize: '1.5em',\r\n            backgroundColor: 'rgb(227, 246, 252)',\r\n            margin: 'auto 20px',\r\n            borderRadius: '14px',\r\n        },\r\n    }\r\n    return (\r\n        <div style={styles.guide}>\r\n            <h1>pick a room to start <br></br> or create a new room</h1> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Guide;","import { useState } from \"react\";\r\nimport { Icon } from '@iconify/react';\r\nimport RoomsList from \"../Rooms/RoomsList\";\r\n\r\nconst SearchRoom = ({ rooms, joinRoom, leaveRoom, switchRoom, roomManage, currentRoom, handleSearchRoom, lastMsgRoomId, setLastMsgRoomId }) => {\r\n    const [resultRoom, setResultRoom] = useState([]);\r\n\r\n    const styles = {\r\n        inputSection: {\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n        },\r\n        input: {\r\n            width: '100%',\r\n            height: '40px',\r\n            borderRadius: '10px',\r\n            borderColor: '#6588DE',\r\n        },\r\n        searchRoom: {\r\n            width: \"100%\",\r\n            height: \"102%\",\r\n            overflowY: 'hidden'\r\n        },\r\n        add: {\r\n            color: '#6588DE',\r\n            fontSize: '60px',\r\n            margin: '2.5px 5px',\r\n            cursor: 'pointer',\r\n        },\r\n\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        const value = e.target.value;\r\n        setResultRoom(rooms.filter(room => room.name.toLowerCase().includes(value.toLowerCase()) || room.lastMessage.toLowerCase().includes(value.toLowerCase())));\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div style={styles.searchRoom}>\r\n            <div style={styles.inputSection}>\r\n                <Icon style={styles.add} icon=\"bx:bx-arrow-back\" onClick={() => handleSearchRoom()} />\r\n                <input style={styles.input} placeholder=\"search room\" onChange={handleChange} />\r\n            </div>\r\n            <RoomsList currentRoom={currentRoom} rooms={resultRoom} joinRoom={joinRoom} leaveRoom={leaveRoom} switchRoom={switchRoom} roomManage={roomManage} handleSearchRoom={handleSearchRoom} lastMsgRoomId={lastMsgRoomId} setLastMsgRoomId={setLastMsgRoomId} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchRoom;","/* eslint-disable no-unused-vars */\r\nimport { useState, useEffect } from 'react';\r\nimport '../src/App.css';\r\nimport io from 'socket.io-client';\r\nimport ChatWindow from \"./Components/ChatWindow\";\r\nimport Login from './Components/Login/Login';\r\nimport Loading from './Components/Loading';\r\nimport UserArea from \"./Components/UserInformation/UserArea\";\r\nimport RoomsList from \"./Components/Rooms/RoomsList\";\r\nimport RoomsHeader from \"./Components/Rooms/RoomsHeader\";\r\nimport Guide from './Components/Guide/Guide';\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport { toast } from 'react-toastify'\r\nimport SearchRoom from './Components/List/SearchRoom';\r\nimport { userService } from './service/user';\r\nimport { roomService } from './service/room';\r\nimport { authService } from './service/auth';\r\nimport curRoom from './Components/Room/CurrentRoom'\r\nrequire('dotenv').config()\r\n\r\nconst socket = io.connect(process.env.REACT_APP_API_URL || 'http://localhost:8080');\r\n\r\n\r\nfunction App() {\r\n  const [connected, setConnect] = useState(false)\r\n  const [error, setError] = useState(false)\r\n  const [isLoading, setLoading] = useState(true)\r\n  const [authenticated, setAuthenticated] = useState(false)\r\n  const [user, setUser] = useState(null)\r\n  const [roomPanel, setPanel] = useState(false)\r\n  const [currentRoom, setCurrentRoom] = useState(null)\r\n  const [lastMsgRoomId, setLastMsgRoomId] = useState({\r\n    roomId: '',\r\n    msg: '',\r\n    date: null\r\n  })\r\n  const [rooms, setRooms] = useState([])\r\n  const [message, setMessage] = useState('')\r\n  const [showSearchRoom, setShowSearchRoom] = useState(false)\r\n  const [lastMsgRoomId1, setLastMsgRoomId1] = useState({\r\n    roomId: '',\r\n    msg: '',\r\n    date: null\r\n  })\r\n\r\n  const limit = useMediaQuery({ maxWidth: 1300 })\r\n  const style = {\r\n    left: {\r\n      width: limit ? '15em' : '25%',\r\n      float: 'left',\r\n      boxSizing: 'border-box',\r\n    },\r\n\r\n    right: {\r\n      width: '100%',\r\n      height: '100%',\r\n      float: 'right',\r\n      position: 'relative',\r\n      flexGrow: 1,\r\n    },\r\n\r\n    userInformation: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      borderBottom: '2px solid #4a336e',\r\n      padding: '20px',\r\n      fontSize: 'large',\r\n      marginBottom: '10px',\r\n    },\r\n  }\r\n\r\n  const logIn = async (user) => {\r\n    try {\r\n      const result = await authService.login(user)\r\n      localStorage.setItem(\"token\", result.data.token);\r\n      setError(result.data.token === null)\r\n      let res = await userService.getUser()\r\n      if (res.status === 200) {\r\n        localStorage.setItem(\"userId\", res.data.msg._id)\r\n        setUser(res.data.msg)\r\n        socket.emit('login', res.data.msg._id)\r\n        res = await roomService.getRooms()\r\n        if (res.status === 200) {\r\n          var temp = [...res.data.msg.sort((a, b) => (a.lastMessageDate < b.lastMessageDate) ? 1 : -1)]\r\n          setRooms(temp)\r\n        }\r\n        socket.once('connected', () => setConnect(true))\r\n      }\r\n      setAuthenticated(true)\r\n      toast.success('logged in successfully')\r\n    } catch (err) {\r\n      toast.error(`${err?.response?.data?.msg}`)\r\n    }\r\n  }\r\n\r\n  const leaveRoom = async (id) => {\r\n    let res = await roomService.leaveRoom(id)\r\n    if (res.status === 200) {\r\n      socket.emit('leaveRoom', id)\r\n      toast.success('left room successfully')\r\n      const index = rooms.findIndex(room => room._id === id)\r\n      if (index !== -1) {\r\n        rooms.splice(index, 1)\r\n        const tmp = [...rooms]\r\n        tmp.every((room, index) => {\r\n          if (room._id === id) {\r\n            tmp.splice(index, 1)\r\n            return false\r\n          }\r\n          return true\r\n        })\r\n        setCurrentRoom(null)\r\n        curRoom.setCurrentRoom(null)\r\n      }\r\n    } else {\r\n      toast.error(`${res.response.data.msg}`)\r\n    }\r\n  }\r\n\r\n  const kickUser = async (userId, roomId) => {\r\n    socket.emit('kick', userId, roomId)\r\n  }\r\n\r\n  useEffect(() => {\r\n    socket.on('kicked', (userId, roomId) => {\r\n      if (localStorage.getItem(\"userId\") === userId) {\r\n        toast.error('you have been kicked from this room')\r\n        socket.emit('leaveRoom', roomId)\r\n        const index = rooms.findIndex(room => room._id === roomId)\r\n        if (index !== -1) {\r\n          rooms.splice(index, 1)\r\n          const tmp = [...rooms]\r\n          tmp.every((room, index) => {\r\n            if (room._id === roomId) {\r\n              tmp.splice(index, 1)\r\n              return false\r\n            }\r\n            return true\r\n          })\r\n          setRooms(tmp)\r\n          setCurrentRoom(null)\r\n          curRoom.setCurrentRoom(null)\r\n        }\r\n      }\r\n    })\r\n  }, [socket])\r\n\r\n  const findRoom = async (shortId) => {\r\n    try {\r\n      let res = await roomService.attendRoom(shortId)\r\n      if (res.status === 200) {\r\n        const index = rooms.findIndex(room => room.shortId === res.data.msg.shortId)\r\n        if (index === -1) {\r\n          setRooms([res.data.msg, ...rooms])\r\n        }\r\n        setCurrentRoom(res.data.msg)\r\n        curRoom.setCurrentRoom(res.data.msg)\r\n      }\r\n    } catch (err) {\r\n      toast.error(`${err?.response?.data?.msg}`)\r\n    }\r\n  }\r\n\r\n  const joinRoom = async (room) => {\r\n    if (room) {\r\n      try {\r\n        let response = await roomService.createRoom(room)\r\n        if (response.status === 200) {\r\n          const newRoom = response.data.msg\r\n          setRooms([newRoom, ...rooms])\r\n          setCurrentRoom(newRoom)\r\n        }\r\n      } catch (err) {\r\n        toast.error(`${err?.response?.data?.msg}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  const switchRoom = (newRoom) => {\r\n    setLoading(true)\r\n    if (!currentRoom) {\r\n      socket.emit('joinRoom', newRoom?._id)\r\n    }\r\n    if (currentRoom && newRoom?._id !== currentRoom?._id) {\r\n      socket.emit('leaveRoom', currentRoom?._id)\r\n      socket.emit('joinRoom', newRoom?._id)\r\n    }\r\n    setCurrentRoom({ ...newRoom })\r\n    curRoom.setCurrentRoom({ ...newRoom })\r\n    setShowSearchRoom(false)\r\n    setLoading(false)\r\n  }\r\n\r\n\r\n  const logout = async () => {\r\n    let userId = localStorage.getItem(\"userId\")\r\n    socket.emit('logout', userId)\r\n    localStorage.clear()\r\n    window.location.reload()\r\n  }\r\n\r\n  const roomManage = (room) => {\r\n    setPanel(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function getUserToken() {\r\n      const token = localStorage.getItem(\"token\")\r\n      if (token !== null) {\r\n        let res = await userService.getUser()\r\n        if (res.status === 200) {\r\n          localStorage.setItem(\"userId\", res.data.msg._id)\r\n          setAuthenticated(true)\r\n          setUser(res.data.msg)\r\n          socket.emit('login', res.data.msg._id)\r\n          res = await roomService.getRooms()\r\n          if (res.status === 200) {\r\n            var temp = [...res.data.msg.sort((a, b) => (a.lastMessageDate < b.lastMessageDate) ? 1 : -1)]\r\n            setRooms(temp)\r\n          }\r\n          socket.once('connected', () => setConnect(true))\r\n          setLoading(false)\r\n        }\r\n      } else {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    getUserToken()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (currentRoom) {\r\n      socket.emit('joinRoom', currentRoom._id)\r\n    }\r\n  }, [currentRoom])\r\n\r\n  useEffect(() => {\r\n    if (lastMsgRoomId.roomId.length > 0) {\r\n      let res = rooms.find(room => room._id === lastMsgRoomId.roomId)\r\n      if (res && lastMsgRoomId.roomId !== rooms[0]?._id) {\r\n        setRooms([res, ...rooms.filter(el => el._id !== res._id)])\r\n      }\r\n    }\r\n    setLastMsgRoomId1({\r\n      roomId: lastMsgRoomId.roomId,\r\n      msg: lastMsgRoomId.msg,\r\n      date: lastMsgRoomId.date\r\n    })\r\n  }, [lastMsgRoomId])\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {isLoading ? <Loading></Loading> : (authenticated ?\r\n        <div style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n          <div style={{ height: '100%', display: 'flex' }}>\r\n            <div style={style.left}>\r\n              <UserArea user={user} logout={logout}></UserArea>\r\n              {showSearchRoom && <SearchRoom currentRoom={currentRoom} rooms={rooms} joinRoom={joinRoom} leaveRoom={leaveRoom} switchRoom={switchRoom} roomManage={roomManage} handleSearchRoom={setShowSearchRoom} lastMsgRoomId={lastMsgRoomId1} setLastMsgRoomId={setLastMsgRoomId1} />}\r\n              {!showSearchRoom && <RoomsHeader joinRoom={joinRoom} findRoom={findRoom} handleSearchRoom={setShowSearchRoom}></RoomsHeader>}\r\n              {!showSearchRoom && <RoomsList currentRoom={currentRoom} rooms={rooms} joinRoom={joinRoom} lastMsgRoomId={lastMsgRoomId1} setLastMsgRoomId={setLastMsgRoomId1} leaveRoom={leaveRoom} switchRoom={switchRoom} roomManage={roomManage} />}\r\n            </div>\r\n            {currentRoom ? <div style={style.right}>\r\n              <ChatWindow socket={socket} currentRoom={currentRoom} setLastMsgRoomId={setLastMsgRoomId} leave={leaveRoom} kickUser={kickUser}></ChatWindow>\r\n            </div> : <Guide></Guide>}\r\n          </div>\r\n        </div> : <Login message={message} logIn={logIn} invalid={error} errorToggle={setError}></Login>)}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n"],"sourceRoot":""}