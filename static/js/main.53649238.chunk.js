(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{305:function(e,t,n){},306:function(e,t,n){},434:function(e,t,n){},448:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(25),a=n.n(i),s=(n(305),n(18)),c=n(29),l=n.n(c),d=n(28),u=n(50),p=n(12),b=(n(306),n(267)),f=n.n(b),j=n(76),m=n(510),x=n(523),g=n(533),h=(n(336),n(278)),v=n(172),O=n.n(v);n(451);n(205).config();O.a.initializeApp({apiKey:"AIzaSyCBJRfaIq-9QJMSreqGgbYErDHLbhv1naU",authDomain:"chat-cord-712bf.firebaseapp.com",projectId:"chat-cord-712bf",storageBucket:"chat-cord-712bf.appspot.com",messagingSenderId:"196707948525",appId:"1:196707948525:web:c2690d98f36a957b0479e4",measurementId:"G-WXRTH429VW"});var y=O.a.storage(),w=n(36),k=n(1),I=function(e){var t=e.setDialogs,n=Object(o.useState)(""),r=Object(p.a)(n,2),i=r[0],a=r[1],s=Object(o.useState)(!1),c=Object(p.a)(s,2),l=c[0],u=c[1],b=Object(o.useState)([]),f=Object(p.a)(b,2),v=f[0],O=f[1],I=Object(o.useState)([]),C=Object(p.a)(I,2),S=(C[0],C[1]),R=Object(o.useState)([{id:null,url:null,name:null,fileUrl:null}]),D=Object(p.a)(R,2),M=D[0],F=D[1],z=Object(j.useMediaQuery)({maxWidth:900}),E={input:{display:"block",position:"relative",left:"10px",top:"20px",width:"108%"},textField:{width:Object(j.useMediaQuery)({maxWidth:600})?"60%":z?"70%":"90%",fontSize:"x-large",outline:"none",paddingLeft:"20px",paddingBottom:"10px",paddingTop:"10px",marginLeft:"30px",backgroundColor:"transparent",color:"#FDFDFD"},send:{position:"absolute",right:10,cursor:"pointer",color:"#6082B6",fontSize:"30px"},attach:{position:"absolute",right:100,cursor:"pointer"},image:{position:"absolute",right:50,cursor:"pointer"},icons:{fontSize:"30px",position:"absolute",left:-45,color:"#6082B6",cursor:"pointer"},file:{color:"#6082B6",fontSize:"30px",position:"absolute",cursor:"pointer",right:45,bottom:14},fileImage:{color:"#6082B6",fontSize:"30px",position:"absolute",cursor:"pointer",right:50,bottom:14},preview:{zIndex:1,position:"absolute",width:"100%",height:"200px",right:"1px",bottom:"60px",background:"#6588DE",boxShadow:"0px 8px 40px rgba(0, 72, 251, 0.3)",borderRadius:"14px",padding:"20px",display:"flex",alignItems:"center"},thumbnail:{width:"100px",height:"100px",borderRadius:"10px"},deletePreviewIcon:{color:"red",fontSize:"20px",cursor:"pointer",position:"relative",top:"-56px"},fileName:{position:"relative",left:"50px",top:"5px",color:"white"},addFile:{display:"grid",placeItems:"center",position:"relative",bottom:18,left:18,width:"100px",height:"100px",borderRadius:"10px",border:"1px dashed #F9FBFB",boxSizing:"border-box"},addIcon:{fontSize:"50px",color:"#F9FBFB"}},_=function(){if(i.length>0||v.length>0){var e=[];v.map((function(t){var n=new Promise((function(e,n){var o={contentType:t.type};y.ref("files/".concat(t.name)).put(t,o).then((function(t){t.ref.getDownloadURL().then((function(t){e(t)}))}))}));e.push(n)})),Promise.all(e).then((function(e){S((function(t){return[].concat(Object(d.a)(t),[e])})),t(i,e)}))}F([]),O([])},A=function(){if(M)return Object(k.jsxs)("div",{style:E.preview,children:[M.map((function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(w.a,{onClick:function(){return t=e.id,F(M.filter((function(e){return e.id!==t}))),void O(v.filter((function(e){return e.id!==t})));var t},style:E.deletePreviewIcon,icon:"ep:circle-close"}),Object(k.jsx)("img",{style:E.thumbnail,src:e.fileUrl?e.fileUrl:e.url,alt:"thumb"}),Object(k.jsx)("p",{style:E.fileName,children:e.name})]},e.id)})),Object(k.jsx)("div",{style:E.addFile,children:Object(k.jsx)("label",{htmlFor:"files",children:Object(k.jsx)(w.a,{style:E.addIcon,icon:"carbon:add-alt"})})})]})};return Object(k.jsx)("div",{style:E.input,children:Object(k.jsx)(m.a,{fullWidth:!0,sx:{m:1},children:Object(k.jsx)(x.a,{style:E.textField,value:i,onKeyUp:function(e){"Enter"===e.key&&(_(),a(""))},id:"outlined-basic",variant:"outlined",placeholder:"Type a new message...",onChange:function(e){return a(e.target.value)},autoComplete:"off",InputProps:{endAdornment:Object(k.jsxs)(g.a,{position:"end",children:[Object(k.jsx)(w.a,{onClick:function(){_(),a("")},style:E.send,icon:"akar-icons:send"}),Object(k.jsx)(w.a,{icon:"fluent:emoji-24-regular",style:E.icons,onClick:function(){u(!l)}}),Object(k.jsx)("label",{htmlFor:"files",children:Object(k.jsx)(w.a,{style:E.fileImage,icon:"akar-icons:image"})}),Object(k.jsx)("input",{id:"files",style:{visibility:"hidden"},type:"file",multiple:!0,onChange:function(e){for(var t=function(t){var n=e.target.files[t];n.id=Math.random();var o="",r="";"image"!==n.type.split("/")[0]?(o="file.png",r="file ".concat(t+1)):(o=null,r="image ".concat(t+1));var i=new FileReader;i.readAsDataURL(n),i.onloadend=function(){F((function(e){return[].concat(Object(d.a)(e),[{id:n.id,url:i.result,name:r,fileUrl:o}])}))},O((function(e){return[].concat(Object(d.a)(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)}}),v.length>0&&Object(k.jsx)(A,{}),l&&Object(k.jsx)("div",{style:{position:"fixed",bottom:"80px",left:"20%",zIndex:"1"},children:Object(k.jsx)(h.a,{onSelect:function(e){a((function(t){return t+e.native}))},emojiSize:20})})]})}})})})},C=n(268),S=n.n(C),R=function(e){var t=e.dialog,n=e.react,r=e.self,i=Object(o.useState)(!1),a=Object(p.a)(i,2),s=a[0],c=a[1],l={emoji:{borderRadius:"50%",padding:"1px",cursor:"pointer",transition:"background 300ms ease-out"},emojiList:{display:"flex",position:"absolute",top:-16,right:r?2:"none",flexDirection:r?"row-reverse":"row"},allEmoji:{position:"relative"}},d=function(e){n(e,t._id)};return Object(k.jsxs)("div",{style:l.allEmoji,onMouseLeave:function(){return c(!1)},children:[s&&Object(k.jsxs)("div",{style:l.emojiList,children:[Object(k.jsx)("div",{style:{fontSize:"15px",cursor:"pointer"},onClick:function(){return d(1)},children:"\u2764\ufe0f"}),Object(k.jsx)("div",{style:{fontSize:"15px",cursor:"pointer"},onClick:function(){return d(2)},children:"\ud83d\ude02"}),Object(k.jsx)("div",{style:{fontSize:"15px",cursor:"pointer"},onClick:function(){return d(3)},children:"\ud83d\ude2e"}),Object(k.jsx)("div",{style:{fontSize:"15px",cursor:"pointer"},onClick:function(){return d(4)},children:"\ud83d\ude22"}),Object(k.jsx)("div",{style:{fontSize:"15px",cursor:"pointer"},onClick:function(){return d(5)},children:"\ud83d\ude20"}),Object(k.jsx)("div",{style:{fontSize:"15px",cursor:"pointer"},onClick:function(){return d(6)},children:"\ud83d\udc4d"})]}),Object(k.jsx)(S.a,{style:l.emoji,onClick:function(){c(!s)}})]})},D=function(e){var t=e.emojiIndex,n={marginRight:"2px",cursor:"pointer",fontSize:"small"},o=function(){switch(t){case 1:return Object(k.jsx)("div",{style:n,children:"\u2764\ufe0f"});case 2:return Object(k.jsx)("div",{style:n,children:"\ud83d\ude02"});case 3:return Object(k.jsx)("div",{style:n,children:"\ud83d\ude2e"});case 4:return Object(k.jsx)("div",{style:n,children:"\ud83d\ude22"});case 5:return Object(k.jsx)("div",{style:n,children:"\ud83d\ude20"});case 6:return Object(k.jsx)("div",{style:n,children:"\ud83d\udc4d"});default:return}};return Object(k.jsx)(o,{})},M=n(273),F=n.n(M),z=n(271),E=n.n(z),_=n(114),A=n.n(_),B=n(269),L=n.n(B);n(205).config();var T=L.a.create({baseURL:"https://chat-cord-api.herokuapp.com"});T.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&Object.assign(e.headers,{Authorization:"Bearer ".concat(t)}),e}));var P=function(e){return T.get("/reaction/message/".concat(e,"/retrieve"))},W=n(528),U=function(e){var t=e.reactions,n=e.self,o={icons:{display:"flex",position:"absolute",right:n&&0,left:!n&&0,bottom:-9,borderRadius:"25px",backgroundColor:"#aaa",paddingLeft:5,paddingRight:5}};return Object(k.jsx)("div",{style:o.iconsInfo,children:Object(k.jsx)("div",{style:o.icons,children:t.map((function(e){return 0!==e.from.length?Object(k.jsx)(D,{emojiIndex:e.reaction_type},e.reaction_type):null}))})})},N=function(e){var t=e.dialog,n=e.onDelete,r=e.room,i=e.socket,a=e.kickUser,s=Object(o.useState)(!1),c=Object(p.a)(s,2),b=c[0],f=c[1],j=Object(o.useState)([]),m=Object(p.a)(j,2),x=m[0],g=m[1],h=Object(o.useState)(null),v=Object(p.a)(h,2),O=v[0],y=v[1],w=Object(o.useState)(!1),I=Object(p.a)(w,2),C=I[0],S=I[1],D=Object(o.useState)(null),M=Object(p.a)(D,2),z=M[0],_=M[1],B=Object(o.useState)(0),L=Object(p.a)(B,2),T=L[0],N=L[1],q=Object(o.useState)(!1),V=Object(p.a)(q,2),H=V[0],G=V[1],K={dialogDiv:{width:"95%",position:"relative",display:"flex",flexDirection:O?"row-reverse":"row",marginLeft:"20px",marginRight:"20px",alignItems:"flex-start",padding:"0px",marginBottom:"30px"},bubble:{backgroundColor:O?"#32a6b8":"#c27f67",color:"#ffffff",padding:"5px 10px",margin:"0px",borderRadius:"25px",maxWidth:"100%",position:"relative",wordBreak:"break-word"},avatar:{position:"relative",marginTop:"15px",background:"#".concat(t.from.color),flexShrink:0},widget:{flexShrink:0,opacity:b?1:0,transition:"opacity 250ms",display:"flex",flexDirection:O?"row-reverse":"flex"},widgetItem:{cursor:"pointer",borderRadius:"50%"},deleteIcon:{borderRadius:"50%",padding:"1px",cursor:"pointer"},pinIcon:{borderRadius:"50%",padding:"1px",cursor:"pointer"},container:{display:"flex",flexDirection:"column",alignItems:O?"flex-end":"flex-start",rowGap:"1em",padding:"10px",borderRadius:"14px"},reply:{display:"block"},dialogDivInfoNameTime:{display:"flex",flexDirection:O?"row-reverse":"flex",alignItems:"baseline",width:"100%",marginBottom:"-10px"},dialogDivInfoName:{color:"#52585D",fontSize:"20px",fontWeight:"600",marginLeft:O?"10px":"0px"},dialogDivInfoTime:{opacity:C?1:0,transition:"opacity 250ms",color:"#52585D",fontSize:"16px",marginLeft:O?"0px":"10px"},dialogDivInfoMessageWidget:{display:"flex",flexDirection:O?"row-reverse":"row"},dialogDivInfoMessage:{position:"relative",display:"flex",flexDirection:"column",alignItems:O?"flex-end":"flex-start",margin:"0xp"},dialogDivInfoFiles:{display:"grid",gridTemplateColumns:1===T?"repeat(1, 1fr)":2==T?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:"10px"},des:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"150px",workBreak:"break-word"},subInfo:{position:"absolute",backgroundColor:"rgb(227, 246, 252)",bottom:"80px",left:O?"none":"-11px",right:O?"-11px":"none",display:"flex",flexDirection:"column",gap:"10px",padding:"10px",borderRadius:"20px",alignContent:"flex-end",alignItems:"center"},subInfoContainer:{display:"flex",alignItems:"center",gap:"10px"},subInfoFullNameandUsername:{display:"flex",flexDirection:"column",gap:"3px"},subInfoFullName:{fontSize:"20px",color:"rgb(82, 88, 93)"},subInfoUsername:{color:"rgb(255, 255, 255)",background:"rgb(101, 136, 222)",padding:"4px",borderRadius:"10px",fontSize:"10px",textAlign:"center"},kick:{fontSize:"15px",margin:"0",border:"1px solid red",fontWeight:600,color:"red",width:"100%",textAlign:"center",borderRadius:"10px",cursor:"pointer"}};return Object(o.useEffect)((function(){return i.on("return-reaction",(function(e){t._id===e._id&&g(e.data)})),function(){i.off("return-reaction")}}),[t,i]),Object(o.useEffect)((function(){var e=localStorage.getItem("userId");y(e===t.from.userId),e===r.creator&&_(!0)}),[t]),Object(o.useEffect)(Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t._id);case 2:200===(n=e.sent).status&&g(n.data.data);case 4:case"end":return e.stop()}}),e)}))),[]),Object(o.useEffect)((function(){N(t.urls.length)}),[]),Object(k.jsxs)("div",{id:t._id,style:K.dialogDiv,onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)},children:[!O&&Object(k.jsxs)("div",{onMouseLeave:function(){return G(!1)},children:[Object(k.jsx)(W.a,{onMouseEnter:function(){return G(!0)},size:60,style:K.avatar,src:t.from.avatar}),H&&Object(k.jsxs)("div",{style:K.subInfo,children:[Object(k.jsxs)("div",{style:K.subInfoContainer,children:[Object(k.jsx)(W.a,{size:70,style:K.subInfoAvatar,src:t.from.avatar}),Object(k.jsxs)("div",{style:K.subInfoFullNameandUsername,children:[Object(k.jsx)("div",{style:K.subInfoFullName,children:t.from.fullname}),Object(k.jsx)("div",{style:K.subInfoUsername,children:t.from.username})]})]}),localStorage.getItem("userId")===r.creator&&Object(k.jsx)("p",{style:K.kick,onClick:function(){return a(t.from.userId,r._id)},children:"Kick"})]})]}),O&&Object(k.jsx)(W.a,{onMouseEnter:function(){return G(!0)},size:60,style:K.avatar,src:t.from.avatar}),Object(k.jsxs)("div",{style:K.container,onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:[O&&Object(k.jsxs)("div",{style:K.dialogDivInfoNameTime,children:[Object(k.jsx)("div",{style:K.dialogDivInfoName,children:t.from.username}),Object(k.jsx)("div",{style:K.dialogDivInfoTime,children:A()(t.createdAt).calendar()})]}),!O&&Object(k.jsxs)("div",{style:K.dialogDivInfoNameTime,children:[Object(k.jsx)("div",{style:K.dialogDivInfoName,children:t.from.username}),Object(k.jsx)("div",{style:K.dialogDivInfoTime,children:A()(t.createdAt).calendar()})]}),Object(k.jsxs)("div",{style:K.dialogDivInfoMessageWidget,children:[Object(k.jsxs)("div",{style:K.dialogDivInfoMessage,children:[t.content&&Object(k.jsx)("p",{style:K.bubble,children:t.content}),Object(k.jsx)(U,{reactions:x,self:O}),Object(k.jsx)("div",{style:K.dialogDivInfoFiles,children:t.urls.length>0&&t.urls.map((function(e,t){var n=e.split(".").pop().split("?")[0];return"mp4"===n?Object(k.jsx)("video",{onClick:function(e){e.target.classList.toggle("zoom")},style:{width:"500px",marginBottom:"10px",transition:"1s"},controls:!0,children:Object(k.jsx)("source",{src:e,type:"video/mp4"})},t):"pdf"===n?Object(k.jsxs)("a",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},href:e,target:"_blank",rel:"noopener noreferrer",children:[Object(k.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/chat-cord-712bf.appspot.com/o/default-avatar%2Fpdf_file_icon.png?alt=media&token=f12bd4a4-9d41-4096-9596-b3dfeb8d24b5",style:{width:"50px",marginBottom:"10px",marginRight:"10px"}}),Object(k.jsx)("p",{style:K.des,children:e.split("%2F").pop().split("?")[0]})]},t):"docx"===n||"doc"===n?Object(k.jsxs)("a",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},href:e,target:"_blank",rel:"noopener noreferrer",children:[Object(k.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/chat-cord-712bf.appspot.com/o/default-avatar%2Fdocx_file_icon.png?alt=media&token=8c3eeb46-718b-4277-862f-da3236fb6182",style:{width:"50px",marginBottom:"10px",marginRight:"10px"}}),Object(k.jsx)("p",{style:K.des,children:e.split("%2F").pop().split("?")[0]})]},t):"jpg"===n||"png"===n||"jpeg"===n?Object(k.jsx)("img",{onClick:function(e){e.target.classList.toggle("zoom")},src:e,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",transition:"1s"}},t):void 0}))})]}),Object(k.jsxs)("div",{style:K.widget,children:[Object(k.jsx)(R,{dialog:t,react:function(e,n){var o=localStorage.getItem("userId"),a=Object(d.a)(x),s=0;if(a.every((function(e){var t=e.from.findIndex((function(e){return e.userId===o}));return-1===t||(e.from.splice(t,1),s=e.reaction_type,!1)})),s!==e){var c=a.findIndex((function(t){return t.reaction_type===e}));-1!==c?a[c].from.push({userId:o,username:" "}):a.push({reaction_type:e,from:[{userId:o,username:" "}]})}g(Object(d.a)(a)),i.emit("get-reaction",t,e,o,r._id)},self:O}),Object(k.jsx)(E.a,{style:K.pinIcon,onClick:function(){i.emit("set-pin",t,r._id)}}),(O||z)&&Object(k.jsx)(F.a,{style:K.deleteIcon,onClick:function(){n(t,r.creator)}})]})]})]})]})},q=function(e){var t=e.socket,n=e.room,r=e.dialogs,i=e.deleteMessage,a=e.kickUser,s=Object(o.useRef)(null);return Object(o.useEffect)((function(){s.current.scrollIntoView({behavior:"smooth"})}),[r]),Object(k.jsxs)("div",{style:{display:"block",width:"100%",height:"77vh",overflow:"auto",margin:"10px 0px 0px 10px"},children:[r.map((function(e,o){return Object(k.jsx)(N,{socket:t,dialog:e,onDelete:i,room:n,kickUser:a},o)})),Object(k.jsx)("div",{ref:s})]})},V=n(284),H=n(524),G=n(529),K=n(526),Q=n(530),J=n(534),$=n(525),Z=n(535),Y=n(115),X=n(274),ee=n.n(X),te=n(44),ne=function(){return T.get("/room/retrieve")},oe=function(e){return T.get("/room/".concat(e))},re=function(e){return T.post("/room/create",e)},ie=function(e,t){return T.put("/room/".concat(e),t)},ae=function(e){return T.post("/room/".concat(e,"/attend"))},se=function(e,t){return T.post("/room/".concat(e,"/addMember"),t)},ce=function(e){return T.post("/room/".concat(e,"/leave"))},le=function(e){return T.get("/room/".concat(e,"/members"))},de=function(e,t){return T.get("/room/".concat(e,"/messages/").concat(t))},ue=function(){var e=null;return{getCurrentRoom:function(){return e},setCurrentRoom:function(t){e=t}}}(),pe=["key","name","fieldKey"],be=H.a.TabPane,fe=function(e){var t,n,r=e.userOnline,i=e.userOffline,a=e.setUserOnline,c=e.setUserOffline,b=e.room,f=e.dialogs,j=e.leave,m=e.socket,x=Object(o.useState)([]),g=Object(p.a)(x,2),h=g[0],v=g[1],O=Object(o.useState)(!1),I=Object(p.a)(O,2),C=I[0],S=I[1],R=Object(o.useState)(!1),D=Object(p.a)(R,2),M=D[0],F=D[1],z=Object(o.useState)(!1),E=Object(p.a)(z,2),_=E[0],B=E[1],L=Object(o.useState)(!1),T=Object(p.a)(L,2),P=T[0],U=T[1],N=[],q="All",X=Object(o.useState)(null),ne=Object(p.a)(X,2),re=ne[0],ae=ne[1],ce=Object(o.useState)(),fe=Object(p.a)(ce,2),je=fe[0],me=fe[1],xe=localStorage.getItem("userId"),ge=Object(o.useState)({name:"",description:"",isPrivate:b.isPrivate,avatar:""}),he=Object(p.a)(ge,2),ve=he[0],Oe=he[1],ye=Object(o.useState)(b.isPrivate),we=Object(p.a)(ye,2),ke=we[0],Ie=we[1],Ce=Object(o.useState)([]),Se=Object(p.a)(Ce,2),Re=Se[0],De=Se[1],Me=Object(o.useState)(!1),Fe=Object(p.a)(Me,2),ze=Fe[0],Ee=Fe[1],_e=function(){S(!1)},Ae=function(){F(!M)},Be=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,o,r,i,a,s,c,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ve,e.prev=1,!je){e.next=12;break}return o={contentType:je.type},r=y.ref("roomAvatars/".concat(je.name)),e.next=7,r.put(je,o);case 7:return i=e.sent,e.next=10,i.ref.getDownloadURL();case 10:a=e.sent,t.avatar=a;case 12:return e.next=14,ie(null===b||void 0===b?void 0:b._id,t);case 14:200===(s=e.sent).status&&te.a.success(null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.msg),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),te.a.error(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.msg);case 21:ae(ve.avatar),me(null),F(!1);case 24:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),Le={chatHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"50px",backgroundColor:"#6588DE",height:"20px",width:"100%",margin:"0px 0px 0px 10px",position:"relative"},pinMessageContainer:{position:"absolute",backgroundColor:"#E3F6FC",top:"110px",left:"0px",zIndex:"1",width:"68%",height:"50px",display:"flex",gap:"10px"},pinMessageIcon:{position:"relative",left:"5px",top:"15px",color:"rgb(101, 136, 222)",fontSize:"20px"},pinMessageInfo:{width:"90%",display:"flex",flexFlow:"column",padding:"2px"},pinMessageContentText:{height:"100%",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"107%",workBreak:"break-word"},chatInfo:{margin:"5px",display:"flex",flexDirection:"column",alignItems:"flex-start",cursor:"pointer"},chatName:{margin:"0px",fontSize:"20px",fontWeight:"bold",color:"#FDFDFE"},numberOfUser:{margin:"0px",fontSize:"14px",color:"#F2F6F7"},chatTool:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",width:"30%",position:"relative"},tuneIcon:{cursor:"pointer",fontSize:"20px"},roomInfo:{display:"flex",flexDirection:"column",alignItems:"center"},roomTitle:{marginBottom:"30px",fontWeight:600,fontSize:"18px",lineHeight:"27px",color:"#6588DE"},roomAvatar:{marginBottom:"20px",border:"4px solid #"+b.color,borderRadius:"115px"},roomName:{marginBottom:"6px",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#6588DE"},roomDescription:{marginBottom:"20px",fontSize:"12px",lineHeight:"150.5%",color:"#52585D"},roomShortId:{cursor:"pointer",fontSize:"20px",marginBottom:"30px"},line:{width:"280px",height:"0px",borderBottom:"1px solid #D0D9DF",marginBottom:"20px"},media:{height:"400px",overflowY:"auto",display:"block"},mediaGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",maxWidth:"100%"},file:{display:"flex",height:"400px",flexDirection:"column",alignItems:"flex-start"},members:{display:"flex",height:"400px",flexDirection:"column",alignItems:"flex-start",gap:"10px",overflowY:"auto"},member:{display:"flex",flexDirection:"row",alignItems:"flex-end",gap:"10px"},leaveRoom:{display:"flex",flexDirection:"row",cursor:"pointer",fontSize:"20px",borderRadius:"8px",alignItems:"center",gap:"11px",border:"1px solid #6588DE",height:"39px"},leaveRoomIcon:{color:"#6588DE",with:"18px",height:"20px",marginLeft:"14px"},leaveRoomText:{margin:"0px",with:"72px",fontWeight:500,fontSize:"12px",lineHeight:"18px",color:"#6588DE"},avatar:{position:"relative"},dot:{position:"absolute",bottom:"6px",right:"3px",height:"8px",width:"8px",borderRadius:"50%",backgroundColor:"#46D362"},des:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"320px",workBreak:"break-word"},infoIcon:{position:"relative",top:"5px"},buttonEditDrawer:{border:"none",backgroundColor:"#E3F6FC",color:"#6588DE",cursor:"pointer"},buttonUpdateDrawer:{position:"relative",left:"50%",marginRight:"5px"},roomAvatarEdit:{width:"fit-content",display:"block",margin:"auto",border:"4px solid #"+b.color,borderRadius:"115px",cursor:"pointer"},plusIconContainer:{width:55,height:55,borderRadius:"50%",border:"1px dashed #6ECB63",display:"grid",placeItems:"center",backgroundColor:"rgb(227, 246, 252)"},plusIcon:{fontSize:"20px"},removeIcon:{fontSize:"18px",color:"#E74C3C"},submitButton:{borderRadius:"5px"},searchResultContainer:{position:"absolute",top:"76px",left:"0px",right:"0px",backgroundColor:"rgb(227, 246, 252)",padding:"10px",borderRadius:"0px 0px 10px 10px",zIndex:"1"},searchResultOption:{display:"flex",gap:"50px",alignItems:"center",justifyContent:"center"},searchOption:{color:"rgb(82, 88, 93)",cursor:"pointer",fontSize:"20px",fontWeight:"bold"},closeIcon:{fontSize:"24px",position:"absolute",top:"2px",right:"6px",color:"rgb(82, 88, 93)",cursor:"pointer"}};Object(o.useEffect)((function(){var e=h.find((function(e){return e._id===r}));e&&(e.online=!0,v(Object(d.a)(h))),a("")}),[r]),Object(o.useEffect)((function(){var e=h.find((function(e){return e._id===i}));e&&(e.online=!1,v(Object(d.a)(h))),c("")}),[i]),Object(o.useEffect)(Object(u.a)(l.a.mark((function e(){var t,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(null===b||void 0===b?void 0:b._id);case 2:return 200===(n=e.sent).status&&v(n.data.msg),e.next=6,oe(null===b||void 0===b?void 0:b._id);case 6:n=e.sent,(null===(o=n.data.msg)||void 0===o||null===(t=o.pinnedMessages)||void 0===t?void 0:t.length)>0?(U(!0),B(o.pinnedMessages.at(-1))):U(!1);case 9:case"end":return e.stop()}}),e)}))),[b]),Object(o.useEffect)((function(){m.on("new-pinned-message",(function(e,t){var n;e===(null===(n=ue.getCurrentRoom())||void 0===n?void 0:n._id)&&(0===t.pinnedMessages.length?U(!1):(U(!0),B(t.pinnedMessages.at(-1))))}))}),[m]);var Te=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(N=[],n=0;n<t.usersList.length;n++)N.push(t.usersList[n].first);return e.prev=2,e.next=5,se(null===b||void 0===b?void 0:b._id,{emails:N.join(",")});case 5:200===(o=e.sent).status&&te.a.success(o.data.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),te.a.error("".concat(e.t0.response.data.msg));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Pe=G.a.Option,We=Object(k.jsxs)(G.a,{defaultValue:"All",onChange:function(e){q=e},children:[Object(k.jsx)(Pe,{value:"All",children:"All"}),Object(k.jsx)(Pe,{value:"Message",children:"Message"}),Object(k.jsx)(Pe,{value:"User",children:"User"})]}),Ue=function(e){var t=e.dialog,n=Object(o.useState)(!1),r=Object(p.a)(n,2),i=r[0],a=r[1],s={dialogContainer:{display:"flex",alignItems:"center",gap:"10px",marginTop:"15px",backgroundColor:i?"rgb(101, 136, 222)":"",padding:"10px",borderRadius:"10px"},dialogNameAndTime:{display:"flex",gap:"10px",alignItems:"center"},dialogName:{color:i?"white":"rgb(82, 88, 93)",fontSize:"20px",fontWeight:"600"},dialogTime:{color:i?"white":"rgb(82, 88, 93)",fontWeight:"600"},dialogMessage:{fontSize:"16px",color:i?"white":"rgb(82, 88, 93)",fontWeight:"600",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"280px",workBreak:"break-word"}};return Object(k.jsx)("a",{href:"#"+t.messageId,onClick:function(){Ne(t.messageId)},children:Object(k.jsxs)("div",{style:s.dialogContainer,onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:[Object(k.jsx)(W.a,{src:t.avatar,size:60,style:s.dialogContainerAvatar}),Object(k.jsxs)("div",{style:s.dialogContainerInfo,children:[Object(k.jsxs)("div",{style:s.dialogNameAndTime,children:[Object(k.jsx)("span",{style:s.dialogName,children:t.username}),Object(k.jsx)("span",{style:s.dialogTime,children:A()(t.createdAt).calendar()})]}),Object(k.jsx)("span",{style:s.dialogMessage,children:t.content})]})]})})},Ne=function(e){Ee(!1);var t=document.getElementById(e);t.style.backgroundColor="LightBlue",t.style.borderRadius="10px",t.style.paddingRight="10px",setTimeout((function(){t.style.backgroundColor="White"}),1e3)};return Object(k.jsxs)("div",{style:Le.chatHeader,children:[Object(k.jsxs)("div",{style:Le.chatInfo,onClick:function(){S(!0)},children:[Object(k.jsxs)("p",{style:Le.chatName,children:[null===b||void 0===b?void 0:b.name," ",Object(k.jsx)(w.a,{style:Le.infoIcon,icon:"ant-design:info-circle-outlined"})]}),Object(k.jsx)("p",{style:Le.numberOfUser,children:(null===h||void 0===h?void 0:h.length)+" members"})]}),Object(k.jsxs)("div",{style:Le.chatTool,children:[Object(k.jsx)(K.a,{style:Le.input,addonBefore:We,autoComplete:"off",placeholder:"Type user or a message you want to search...",onKeyPress:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,de(b._id,t.target.value).then((function(e){e.data.msg.length>0?(Ee(!0),"All"===q?De(e.data.msg):"Message"===q?De(e.data.msg.filter((function(e){return e.content.includes(t.target.value)}))):"User"===q&&De(e.data.msg.filter((function(e){return e.username.includes(t.target.value)})))):Ee(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),ze&&Re.length>0&&Object(k.jsxs)("div",{style:Le.searchResultContainer,children:[Object(k.jsx)(w.a,{style:Le.closeIcon,onClick:function(){return Ee(!1)},icon:"ant-design:close-circle-outlined"}),Object(k.jsxs)("div",{style:Le.searchResultOption,children:[Object(k.jsx)("div",{style:Le.searchOption,onClick:function(){var e=Object(d.a)(Re.sort((function(e,t){return e.createdAt>t.createdAt?1:-1})));De(e)},children:"Old"}),Object(k.jsx)("div",{style:Le.searchOption,onClick:function(){var e=Object(d.a)(Re.sort((function(e,t){return e.createdAt<t.createdAt?1:-1})));De(e)},children:"New"})]}),Object(k.jsx)("div",{style:{overflow:"scroll",maxHeight:"500px",overflowX:"hidden"},children:null===Re||void 0===Re?void 0:Re.map((function(e,t){return Object(k.jsx)(Ue,{dialog:e},t)}))})]})]}),Object(k.jsxs)(Q.a,{placement:"right",onClose:_e,visible:C,extra:Object(k.jsxs)(J.b,{children:[b.isPrivate&&localStorage.getItem("userId")===b.creator&&Object(k.jsx)("button",{onClick:Ae,style:Le.buttonEditDrawer,children:"Edit"}),!b.isPrivate&&Object(k.jsx)("button",{onClick:Ae,style:Le.buttonEditDrawer,children:"Edit"})]}),children:[Object(k.jsxs)("div",{style:Le.roomInfo,children:[Object(k.jsx)("div",{style:Le.roomTitle,children:"Room Info"}),!M&&Object(k.jsx)("div",{style:Le.roomAvatar,children:Object(k.jsx)(W.a,{size:200,src:b.avatar})}),M&&Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{style:Le.roomAvatarEdit,htmlFor:"roomAvatar",children:Object(k.jsx)(W.a,{size:200,src:re||b.avatar})}),Object(k.jsx)("input",{id:"roomAvatar",style:{visibility:"hidden"},accept:"image",type:"file",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){ae(n.result)},me(t)}})]}),!b.isPrivate&&Object(k.jsx)("div",{style:Le.roomShortId,onClick:function(){ee()(null===b||void 0===b?void 0:b.shortId),te.a.success("Copied to clipboard")},children:null===b||void 0===b?void 0:b.shortId}),Object(k.jsx)("div",{style:Le.roomName,children:null===b||void 0===b?void 0:b.name}),Object(k.jsx)("div",{style:Le.roomDescription,children:null===b||void 0===b?void 0:b.description}),Object(k.jsx)("div",{style:Le.line})]}),M?Object(k.jsxs)($.a,{labelCol:{span:10},wrapperCol:{span:20},onFinish:Be,children:[Object(k.jsx)($.a.Item,{label:"Room name",rules:[{required:!0,message:"Please input room name!"}],children:Object(k.jsx)(K.a,{defaultValue:b.name,onChange:function(e){return Oe(Object(s.a)(Object(s.a)({},ve),{},{name:e.target.value}))}})}),Object(k.jsx)($.a.Item,{label:"Description",rules:[{required:!0,message:"Please input room description!"}],children:Object(k.jsx)(K.a,{defaultValue:b.description,onChange:function(e){return Oe(Object(s.a)(Object(s.a)({},ve),{},{description:e.target.value}))}})}),xe==b.creator&&Object(k.jsx)($.a.Item,{label:"Mode",children:Object(k.jsx)(Z.a,{defaultChecked:ke,checkedChildren:"Private",unCheckedChildren:"Public",onClick:function(e){Ie((function(e){return!e})),Oe((function(e){return Object(s.a)(Object(s.a)({},e),{},{isPrivate:!e.isPrivate})}))}})}),Object(k.jsx)($.a.Item,{wrapperCol:{offset:10,span:16},children:Object(k.jsx)(Y.a,{type:"primary",htmlType:"submit",children:"Save"})})]}):Object(k.jsxs)(H.a,{style:{marginBottom:"25px"},defaultActiveKey:"1",children:[Object(k.jsx)(be,{tab:"Images",children:Object(k.jsx)("div",{style:Le.media,children:Object(k.jsx)("div",{style:Le.mediaGrid,children:f.map((function(e){return e.urls.length>0&&e.urls.map((function(e,t){var n=e.split(".").pop().split("?")[0];if("jpg"===n||"png"===n||"jpeg"===n)return Object(k.jsx)("img",{src:e,onClick:function(e){e.target.classList.toggle("zoom")},style:{width:"100%",height:"100px",objectFit:"cover",marginBottom:"10px",transition:"1s"}},t)}))}))})})},"1"),Object(k.jsx)(be,{tab:"Videos",children:Object(k.jsx)("div",{style:Le.media,children:Object(k.jsx)("div",{style:Le.mediaGrid,children:f.map((function(e){return e.urls.length>0&&e.urls.map((function(e,t){if("mp4"===e.split(".").pop().split("?")[0])return Object(k.jsx)("video",{onClick:function(e){e.target.classList.toggle("zoom")},style:{width:"100%",height:"100px",objectFit:"cover",marginBottom:"10px",transition:"1s"},controls:!0,children:Object(k.jsx)("source",{src:e,type:"video/mp4"})},t)}))}))})})},"2"),Object(k.jsx)(be,{tab:"Files",children:Object(k.jsx)("div",{style:Le.file,children:f.map((function(e){return e.urls.length>0&&e.urls.map((function(e,t){var n=e.split(".").pop().split("?")[0];return"pdf"===n||"docx"===n?Object(k.jsx)("a",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},href:e,target:"_blank",rel:"noopener noreferrer",children:Object(k.jsx)("p",{style:Le.des,children:e.split("%2F").pop().split("?")[0]})},t):void 0}))}))})},"3"),Object(k.jsx)(be,{tab:"Members",children:Object(k.jsxs)("div",{style:Le.members,children:[(xe==b.creator&&b.isPrivate||!b.isPrivate)&&Object(k.jsxs)($.a,{name:"add user dynamic form",autoComplete:"off",onFinish:Te,children:[Object(k.jsx)($.a.List,{name:"usersList",children:function(e,t){var n=t.add,o=t.remove;return Object(k.jsxs)(k.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name,r=e.fieldKey,i=Object(V.a)(e,pe);return Object(k.jsxs)(J.b,{style:{display:"flex",marginBottom:2},align:"baseline",children:[Object(k.jsx)($.a.Item,Object(s.a)(Object(s.a)({},i),{},{name:[n,"first"],fieldKey:[r,"first"],rules:[{type:"email",required:!0,message:"Email is required!"}],children:Object(k.jsx)(K.a,{placeholder:"Email"})})),Object(k.jsx)(w.a,{style:Le.removeIcon,icon:"gg:remove",onClick:function(){return o(n)}})]},t)})),Object(k.jsx)($.a.Item,{children:Object(k.jsx)(Y.a,{onClick:function(){return n()},block:!0,style:Le.plusIconContainer,children:Object(k.jsx)(w.a,{style:Le.plusIcon,icon:"carbon:add"})})})]})}}),Object(k.jsx)($.a.Item,{children:Object(k.jsx)(Y.a,{style:Le.submitButton,type:"primary",htmlType:"submit",children:"Add"})})]}),null===h||void 0===h?void 0:h.map((function(e,t){return Object(k.jsxs)("div",{style:Le.member,children:[Object(k.jsxs)("div",{style:Le.avatar,children:[Object(k.jsx)(W.a,{style:{backgroundColor:"#"+(null===e||void 0===e?void 0:e.color)},size:50,src:null===e||void 0===e?void 0:e.avatar}),e.online&&Object(k.jsx)("span",{style:Le.dot})]}),Object(k.jsx)("p",{style:{fontSize:"16px"},children:null===e||void 0===e?void 0:e.username})]},t)}))]})},"4")]}),!M&&Object(k.jsxs)("div",{style:Le.leaveRoom,children:[Object(k.jsx)(w.a,{style:Le.leaveRoomIcon,icon:"pepicons:leave"}),Object(k.jsx)("p",{style:Le.leaveRoomText,onClick:function(){_e(),j(b._id)},children:"Leave Room"})]})]}),P&&Object(k.jsxs)("div",{style:Le.pinMessageContainer,children:[Object(k.jsx)(w.a,{style:Le.pinMessageIcon,icon:"entypo:pin"}),Object(k.jsx)("div",{style:Le.pinMessageInfo,onClick:function(){Ne(_.messageId)},children:Object(k.jsxs)("a",{href:"#"+_.messageId,children:[Object(k.jsx)("b",{children:"Pinned Message"}),Object(k.jsx)("p",{style:Le.pinMessageContentText,children:_?null===_||void 0===_?void 0:_.message:null===b||void 0===b||null===(t=b.pinnedMessages)||void 0===t||null===(n=t.at(-1))||void 0===n?void 0:n.message})]})})]})]})},je=function(e){return T.get("message/room/".concat(e))},me=function(e){var t=e.socket,n=e.currentRoom,r=e.setLastMsgRoomId,i=e.leave,a=e.kickUser,s=Object(o.useState)([]),c=Object(p.a)(s,2),b=c[0],f=c[1],j=Object(o.useState)(""),m=Object(p.a)(j,2),x=m[0],g=m[1],h=Object(o.useState)(""),v=Object(p.a)(h,2),O=v[0],y=v[1],w=Object(o.useState)(null),C=Object(p.a)(w,2),S=C[0],R=C[1],D=Object(o.useState)(null),M=Object(p.a)(D,2),F=M[0],z=M[1],E=Object(o.useState)(""),_=Object(p.a)(E,2),A=_[0],B=_[1];return Object(o.useEffect)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(null===n||void 0===n?void 0:n._id);case 2:200===(t=e.sent).status&&f(t.data.msg);case 4:case"end":return e.stop()}}),e)}))),[n]),Object(o.useEffect)((function(){return t.on("new_message",(function(e,t){var n;r({roomId:t,msg:e.content,date:e.createdAt}),t===(null===(n=ue.getCurrentRoom())||void 0===n?void 0:n._id)&&R(e)})),t.on("dialog-deleted",(function(e){z(e)})),function(){t.off("your_new_message"),t.off("dialog-deleted")}}),[n,t]),Object(o.useEffect)((function(){return t.on("loggedIn",(function(e){g(e)})),t.on("loggedOut",(function(e){y(e)})),function(){t.off("loggedIn"),t.off("loggedOut")}}),[t]),Object(o.useEffect)((function(){S&&A!==S._id&&(f([].concat(Object(d.a)(b),[S])),B(S._id))}),[S]),Object(o.useEffect)((function(){if(F){var e=Object(d.a)(b);e.every((function(t,n){return t._id!==F||(e.splice(n,1),!1)})),f(Object(d.a)(e))}}),[F]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(fe,{userOnline:x,userOffline:O,setUserOnline:g,setUserOffline:y,room:n,dialogs:b,leave:i,socket:t}),Object(k.jsx)(q,{room:n,socket:t,dialogs:b,setDialogs:f,deleteMessage:function(e,o){var r=localStorage.getItem("userId");e.from.userId!==r&&o!==r||t.emit("delete",e._id,null===n||void 0===n?void 0:n._id)},kickUser:a}),Object(k.jsx)(I,{setDialogs:function(e,o){t.emit("chat",e,o,localStorage.getItem("userId"),n._id)}})]})},xe=n(531),ge=(n(434),function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],i={container:{position:"absolute",left:"10em",top:"-2.5em",display:Object(j.useMediaQuery)({maxWidth:1300})?"none":"block"},text:{fontSize:"30px",color:"cyan",fontWeight:"bold",transform:n?"translate(200px, 0)":"none",opacity:n?1:0,fontFamily:"Comfortaa",transition:"transform 1000ms ease-out, opacity 800ms"}};return Object(o.useEffect)((function(){setTimeout((function(){r(!0)}),2e3)}),[]),Object(k.jsxs)("div",{style:i.container,children:[Object(k.jsx)("p",{className:"intro-text",children:"Chatcord"}),Object(k.jsx)("p",{style:i.text,children:"...connect people around the world"})]})}),he=(n(435),function(e){return T.post("/auth/login",e)}),ve=function(e){return T.post("/auth/register",e)},Oe=function(e){return T.post("/auth/verify",e)},ye=n(72);te.a.configure({autoClose:2e3,draggable:!1,position:te.a.POSITION.BOTTOM_RIGHT});var we=function(e){var t=e.logIn,n=e.invalid,r=(e.errorToggle,e.message,Object(o.useState)(!1)),i=Object(p.a)(r,2),a=i[0],c=i[1],d=Object(o.useState)({email:"",fullname:"",username:"",password:""}),b=Object(p.a)(d,2),f=b[0],m=b[1],x=Object(o.useState)(!1),h=Object(p.a)(x,2),v=h[0],O=h[1],y=Object(o.useState)(!1),I=Object(p.a)(y,2),C=I[0],S=I[1],R=Object(o.useState)({email:"",code:""}),D=Object(p.a)(R,2),M=D[0],F=D[1],z=Object(o.useState)("login"),E=Object(p.a)(z,2),_=E[0],A=E[1],B=Object(j.useMediaQuery)({maxWidth:1300}),L=Object(o.useState)(""),T=Object(p.a)(L,2),P=T[0],W=T[1],U={textField:{display:"block",marginBottom:"20px"},div:{position:"relative",width:"100%",height:"100%",background:"linear-gradient(135deg, rgba(88,63,243,1) 0%, rgba(255,77,0,0.7962535355939251) 100%)"},button:{width:"100%",backgroundColor:C?"#ffffff":"rgb(101, 136, 222)",border:"1px solid rgb(101, 136, 222)",color:C?"rgb(101, 136, 222)":"#ffffff",height:"3em",marginBottom:"1em"},loginForm:{width:"350px",overflow:"hidden",background:"#ffffff",padding:"50px 0px 30px 0px",borderRadius:"10px",height:"550px",maxWidth:"350px",transition:"max-width 200ms"},signupForm:{width:"350px",overflow:"hidden",background:"#ffffff",padding:"50px 0px 30px 0px",borderRadius:"10px",height:"fit-content",maxWidth:"350px",transition:"max-width 200ms"},header:{fontWeight:"bold",fontSize:"40px",marginBottom:"1.5em",color:"rgb(101, 136, 222)"},createAccount:{fontWeight:"bold",cursor:"pointer",color:v?"rgb(101, 136, 222)":"#000000",transition:"color 300ms"},buttons:{display:"flex",flexDirection:"column",margin:"auto",width:"50%",paddingTop:"2em",marginBottom:"4em"},forms:{textAlign:"center",position:"absolute",right:B?0:"10em",left:B?0:"auto",margin:"auto",top:"5em",display:"flex",justifyContent:"center"},alertText:{color:"red",fontWeight:"bold"},alert:{color:"#ff0000",opacity:n?1:0,transition:"opacity 250ms"},icon:{color:"rgb(101, 136, 222)"}},N=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(f&&f.email&&f.fullname&&f.username&&f.password&&P&&f.password===P)){e.next=9;break}return e.next=4,ve(f);case 4:t=e.sent,te.a.success("".concat(t.data.msg)),A("verify"),e.next=10;break;case 9:te.a.error("Please fill all fields");case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),c(!0),te.a.error("".concat(e.t0.response.data.msg));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(M);case 3:200===(t=e.sent).status&&(te.a.success("".concat(t.data.msg)),A("login")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),te.a.error("".concat(e.t0.response.data.msg));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{style:U.div,children:[Object(k.jsx)(ge,{}),Object(k.jsxs)("div",{style:U.forms,children:["login"===_&&Object(k.jsxs)(ye.ValidatorForm,{style:U.loginForm,children:[Object(k.jsx)("h1",{style:U.header,children:"LOGIN"}),Object(k.jsx)(ye.TextValidator,{validators:["required","isEmail"],errorMessages:["email is required","email is not valid"],value:f.email,id:"input-with-icon-textfield",style:U.textField,onChange:function(e){return m(Object(s.a)(Object(s.a)({},f),{},{email:e.target.value}))},placeholder:"email",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{icon:"carbon:email",style:U.icon})})}}),Object(k.jsx)(ye.TextValidator,{validators:["required"],errorMessages:["password is required"],value:f.password,id:"standard-basic-login-password",style:U.textField,onChange:function(e){return m(Object(s.a)(Object(s.a)({},f),{},{password:e.target.value}))},onKeyUp:function(e){"Enter"===e.key&&t(f)},placeholder:"password",type:"password",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{icon:"ant-design:lock-outlined",style:U.icon})})}}),Object(k.jsx)("div",{style:U.buttons,children:Object(k.jsx)(xe.a,{style:U.button,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),t(f)},onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)},children:"Log in"})}),Object(k.jsx)("p",{style:U.createAccount,onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)},onClick:function(e){e.preventDefault(),m({email:"",password:""}),A("signup")},children:"Create account ?"})]}),"verify"===_&&Object(k.jsxs)(ye.ValidatorForm,{autoComplete:"off",style:U.loginForm,children:[Object(k.jsx)("h1",{style:U.header,children:"Verify"}),Object(k.jsx)(ye.TextValidator,{required:!0,value:M.email,id:"input-with-icon-textfield",style:U.textField,onChange:function(e){return F(Object(s.a)(Object(s.a)({},M),{},{email:e.target.value}))},placeholder:"email",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{icon:"carbon:email",style:U.icon})})}}),Object(k.jsx)(ye.TextValidator,{required:!0,id:"standard-basic",style:U.textField,onChange:function(e){return F(Object(s.a)(Object(s.a)({},M),{},{code:e.target.value}))},placeholder:"verify code",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{icon:"ant-design:lock-outlined",style:U.icon})})}}),a?Object(k.jsx)("h4",{style:U.alert,children:"Something went wrong"}):null,Object(k.jsx)("div",{style:U.buttons,children:Object(k.jsx)(xe.a,{style:U.button,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),q()},children:"Confirm"})})]}),"signup"===_&&Object(k.jsxs)(ye.ValidatorForm,{style:U.signupForm,children:[Object(k.jsx)("h1",{style:U.header,children:"Create account"}),Object(k.jsx)(ye.TextValidator,{required:!0,value:f.email,validators:["required","isEmail"],errorMessages:["email is required","email is not valid"],id:"standard-basic",style:U.textField,onChange:function(e){return m((function(t){return Object(s.a)(Object(s.a)({},t),{},{email:e.target.value})}))},placeholder:"email",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{icon:"carbon:email",style:U.icon})})}}),Object(k.jsx)(ye.TextValidator,{required:!0,value:f.fullname,id:"standard-basic",style:U.textField,onChange:function(e){return m((function(t){return Object(s.a)(Object(s.a)({},t),{},{fullname:e.target.value})}))},placeholder:"fullname",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{style:U.icon,icon:"bx:bx-user"})})}}),Object(k.jsx)(ye.TextValidator,{required:!0,value:f.username,id:"standard-basic",style:U.textField,onChange:function(e){return m((function(t){return Object(s.a)(Object(s.a)({},t),{},{username:e.target.value})}))},placeholder:"username",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{style:U.icon,icon:"carbon:user-avatar"})})}}),Object(k.jsx)(ye.TextValidator,{validators:["required","matchRegexp:(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"],errorMessages:["password is required","Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"],value:f.password,id:"standard-basic",style:U.textField,type:"password",onChange:function(e){return m((function(t){return Object(s.a)(Object(s.a)({},t),{},{password:e.target.value})}))},placeholder:"password",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{icon:"ant-design:lock-outlined",style:U.icon})})}}),Object(k.jsx)(ye.TextValidator,{validators:["isPasswordMatch","required"],errorMessages:["password mismatch","confirm password is required"],error:a,id:a?"standard-error-helper-text":"standard-basic",style:U.textField,type:"password",value:P,onChange:function(e){W(e.target.value),c(e.target.value!==f.password)},onKeyUp:function(e){"Enter"===e.key&&N()},placeholder:"confirm password",InputProps:{startAdornment:Object(k.jsx)(g.a,{position:"start",children:Object(k.jsx)(w.a,{icon:"ant-design:lock-outlined",style:U.icon})})}}),Object(k.jsxs)("div",{style:U.buttons,children:[Object(k.jsx)(xe.a,{style:U.button,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),N(),F({email:f.email})},children:"Create Account"}),Object(k.jsx)(xe.a,{style:{background:"#ffffff",color:"#000000",border:"3px solid black"},variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),A("login")},children:"Back"})]})]})]})]})},ke=n(521),Ie=function(){var e={textAlign:"center",height:"100%",background:"linear-gradient(135deg, rgba(88,63,243,1) 0%, rgba(255,77,0,0.7962535355939251) 100%)",content:{position:"absolute",top:"40%",left:"45%"}};return Object(k.jsx)("div",{style:e,children:Object(k.jsxs)("div",{style:e.content,children:[Object(k.jsx)(ke.a,{}),Object(k.jsx)("p",{children:"Wait a few second..."})]})})},Ce=n(536),Se=n(522),Re=n(527),De=function(){return T.get("/user/find")},Me=function(e,t){return T.put("/user/".concat(e),t)},Fe=Object(Se.a)((function(e){return{large:{width:e.spacing(10),height:e.spacing(10)}}})),ze=function(e){var t=e.user,n=e.logout,r=Fe(),i=Object(o.useState)(!1),a=Object(p.a)(i,2),c=a[0],d=a[1],b=Object(o.useState)(null),f=Object(p.a)(b,2),j=f[0],m=f[1],x=Object(o.useState)({fullname:"",username:"",avatar:"",password:""}),g=Object(p.a)(x,2),h=g[0],v=g[1],O=Object(o.useState)(),I=Object(p.a)(O,2),C=I[0],S=I[1],R=function(){d(!c)},D=function(){var e=Object(u.a)(l.a.mark((function e(){var n,o,r,i,a,s,c,u,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h,!C){e.next=11;break}return o={contentType:C.type},r=y.ref("userAvatars/".concat(C.name)),e.next=6,r.put(C,o);case 6:return i=e.sent,e.next=9,i.ref.getDownloadURL();case 9:a=e.sent,n.avatar=a;case 11:return e.prev=11,e.next=14,Me(null===t||void 0===t?void 0:t.id,n);case 14:c=e.sent,te.a.success(null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.msg),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),te.a.error("".concat(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.msg));case 21:m(h.avatar),S(null),d(!1);case 24:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(){return e.apply(this,arguments)}}(),M=window.matchMedia("(min-width: 970px)"),F=Object(o.useState)(M.matches),z=Object(p.a)(F,2),E=z[0],_=z[1];Object(o.useEffect)((function(){var e=function(e){return _(e.matches)};return M.addListener(e),function(){return M.removeListener(e)}}));var A={userInformation:function(e){return{display:"flex",alignItems:"center",alignContent:"flex-start",justifyContent:"flex-end",height:"100px",width:"100%",backgroundColor:"#E3F6FC",marginBottom:"10px"}},avatar:function(e){return{marginRight:e?"20px":"10px",marginLeft:e?"20px":"10px",background:"#"+(null===t||void 0===t?void 0:t.color),cursor:"pointer"}},info:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"start"},fullname:function(e){return{fontWeight:"600",fontSize:e?"18px":"12px",color:"#52585D",margin:e?"0px":"5px",width:"100%"}},username:{padding:"5px 8px",backgroundColor:"#6588DE",borderRadius:"14px",color:"#FFFFFF",fontSize:"10px"},userAvaterEdit:{width:"fit-content",display:"block",margin:"auto",border:"4px solid #"+(null===t||void 0===t?void 0:t.color),borderRadius:"115px",cursor:"pointer"}};return Object(k.jsxs)("div",{style:A.userInformation(E),children:[Object(k.jsx)(Ce.a,{onClick:R,style:A.avatar(E),className:r.large,src:null===t||void 0===t?void 0:t.avatar}),Object(k.jsxs)(Re.a,{visible:c,closable:!1,title:"Update User Info",onCancel:R,footer:null,children:[c&&Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{style:A.userAvaterEdit,htmlFor:"userAvatar",children:Object(k.jsx)(W.a,{size:200,src:j||t.avatar})}),Object(k.jsx)("input",{id:"userAvatar",style:{visibility:"hidden"},accept:"image/*",type:"file",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){m(n.result)},S(t)}})]}),Object(k.jsxs)($.a,{labelCol:{span:8},wrapperCol:{span:16},onFinish:D,children:[Object(k.jsx)($.a.Item,{label:"Full Name",rules:[{required:!0,message:"Please input your full name!"}],children:Object(k.jsx)(K.a,{defaultValue:null===t||void 0===t?void 0:t.fullname,onChange:function(e){return v(Object(s.a)(Object(s.a)({},h),{},{fullname:e.target.value}))}})}),Object(k.jsx)($.a.Item,{label:"Username",rules:[{required:!0,message:"Please input your username!"}],children:Object(k.jsx)(K.a,{defaultValue:null===t||void 0===t?void 0:t.username,onChange:function(e){return v(Object(s.a)(Object(s.a)({},h),{},{username:e.target.value}))}})}),Object(k.jsx)($.a.Item,{label:"Password",name:"password",rules:[{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,message:"Password must be at least 6 characters, contain at least one uppercase letter, one lowercase letter, one number and one special character!"}],children:Object(k.jsx)(K.a.Password,{onChange:function(e){return v(Object(s.a)(Object(s.a)({},h),{},{password:e.target.value}))}})}),Object(k.jsx)($.a.Item,{label:"Confirm Password",name:"confirm",rules:[{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,message:"Password must be at least 6 characters, contain at least one uppercase letter, one lowercase letter, one number and one special character!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(k.jsx)(K.a.Password,{})}),Object(k.jsx)($.a.Item,{wrapperCol:{offset:8,span:16},children:Object(k.jsx)(Y.a,{type:"primary",htmlType:"submit",children:"Save"})})]})]}),Object(k.jsxs)("div",{style:A.info,children:[Object(k.jsx)("p",{style:A.fullname(E),children:null===t||void 0===t?void 0:t.fullname}),Object(k.jsx)("p",{style:A.username,children:null===t||void 0===t?void 0:t.username})]}),Object(k.jsx)(w.a,{icon:"ion:log-out-outline",style:{fontSize:"30px",cursor:"pointer"},onClick:n})]})},Ee=function(e){var t=e.room,n=e.onClick,r=e.lastMsgRoomId,i=e.choosen,a=Object(o.useState)(!1),s=Object(p.a)(a,2),c=s[0],l=s[1],d=Object(o.useState)(!1),u=Object(p.a)(d,2),b=u[0],f=u[1],m=Object(o.useState)({roomId:"",msg:"",date:null}),x=Object(p.a)(m,2),g=x[0],h=x[1],v=Object(j.useMediaQuery)({maxWidth:1300}),O={room_container:{position:"relative",marginTop:"18px"},room:{position:"relative",width:v?"12em":"90%",margin:"auto",background:i||b?"#6588DE":"#E3F6FC",padding:"10px",borderRadius:"14px",boxShadow:i||b?"0px 8px 40px rgba(0, 72, 251, 0.3)":"none",overflow:"hidden",marginBottom:10,maxHeight:c?v?"250px":"220px":"100px",transition:"max-height 250ms, border 250ms, background 250ms",height:"74px"},roomInfo:{margin:"0px",padding:"0px",display:"flex",cursor:"pointer",alignItems:"center",alignContent:"center",flexDirection:"row",gap:"10px"},avatar:{fontSize:"20px",flexShrink:0,background:"#"+(null===t||void 0===t?void 0:t.color)},roomMessage:{flexGrow:"1"},roomMessageName:{margin:"0px",padding:"0px",fontSize:"18px",fontWeight:"bold",color:i||b?"#FDFDFE":"#52585D",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"150px",workBreak:"break-word"},roomMessageLastMessage:{margin:"0px",padding:"0px",fontSize:"12px",color:i||b?"#F2F6F7":"#96A9BA",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:"150px",workBreak:"break-word"},messageTime:{color:i||b?"#FDFDFE":"#96A9BA"},button:{position:"absolute",fontSize:"50px",color:"#5b5b5b",right:"0.5em",top:40,margin:"auto",transform:c?"rotate(90deg)":"none",transition:"transform 200ms"},roomOption:{background:"#c4c4c4",fontSize:"large",marginBottom:"0",marginTop:"0.1em",borderRadius:"5px",cursor:"pointer",paddingLeft:"1em"},private:{position:"absolute",fontSize:"30px",right:0,top:0,color:"#52585D"}};return Object(o.useEffect)((function(){c&&!i&&l(!1),(null===t||void 0===t?void 0:t._id)===r.roomId&&(t.lastMessage=r.msg,t.lastMessageDate=r.date),h({roomId:null===t||void 0===t?void 0:t._id,msg:null===t||void 0===t?void 0:t.lastMessage,date:null===t||void 0===t?void 0:t.lastMessageDate})}),[r]),Object(o.useEffect)((function(){h({roomId:null===t||void 0===t?void 0:t._id,msg:null===t||void 0===t?void 0:t.lastMessage,date:null===t||void 0===t?void 0:t.lastMessageDate})}),[]),Object(k.jsx)("div",{style:O.room_container,onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:Object(k.jsx)("div",{style:O.room,children:Object(k.jsxs)("div",{style:O.roomInfo,onClick:function(){return n(t)},children:[Object(k.jsx)(W.a,{size:56,style:O.avatar,src:t.avatar}),Object(k.jsxs)("div",{style:O.roomMessage,children:[Object(k.jsx)("p",{style:O.roomMessageName,children:null===t||void 0===t?void 0:t.name}),Object(k.jsx)("p",{style:O.roomMessageLastMessage,children:g.msg})]}),Object(k.jsx)("span",{style:O.messageTime,children:A()("".concat(g.date)).fromNow()}),t.isPrivate&&Object(k.jsx)(w.a,{style:O.private,icon:"ri:chat-private-line"})]})})})},_e=function(e){var t=e.rooms,n=(e.joinRoom,e.leaveRoom),o=e.switchRoom,r=e.roomManage,i=e.currentRoom,a=e.lastMsgRoomId,s=e.setLastMsgRoomId;return Object(k.jsx)("div",{style:{overflow:"auto",width:"100%",height:"77%",backgroundColor:"#E3F6FC"},children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(k.jsx)(Ee,{choosen:(null===i||void 0===i?void 0:i._id)===(null===e||void 0===e?void 0:e._id),room:e,lastMsgRoomId:a,setLastMsgRoomId:s,leaveHandle:n,onClick:o,roomManage:r},t)}))})},Ae=function(e){var t=e.joinRoom,n=e.findRoom,r=e.handleSearchRoom,i=Object(o.useState)(!1),a=Object(p.a)(i,2),c=a[0],l=a[1],d=Object(o.useState)(!1),u=Object(p.a)(d,2),b=u[0],f=u[1],j=Object(o.useState)(!1),m=Object(p.a)(j,2),x=m[0],g=(m[1],Object(o.useState)({name:"",description:"",isPrivate:!1})),h=Object(p.a)(g,2),v=h[0],O=h[1],y=Object(o.useState)(""),I=Object(p.a)(y,2),C=I[0],S=I[1],R={roomHeaderContainer:{display:"flex",justifyContent:"space-around",alignItems:"center",backgroundColor:"#E3F6FC",height:"10%",padding:"10px",width:"100%"},input:{width:"100%",outline:"none",fontSize:"1.2rem",borderRadius:"8px",height:"40px",backgroundColor:"#FDFDFD",border:"1px solid #6588DE",boxSizing:"border-box",margin:"5px",marginLeft:"15px"},add:{color:"#6588DE",fontSize:"60px",margin:"2.5px 5px",cursor:"pointer"},join:{color:"#6588DE",fontSize:"60px",margin:"2.5px 5px",cursor:"pointer"},addUser:{color:"#6588DE",fontSize:"60px",margin:"2.5px 5px",cursor:"pointer"}},D=function(){l(!1)},M=function(){f(!1)};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{style:R.roomHeaderContainer,children:[Object(k.jsx)(w.a,{style:R.add,icon:"akar-icons:search",onClick:r}),Object(k.jsx)(w.a,{style:R.add,icon:"akar-icons:chat-add",onClick:function(){l(!0)}}),Object(k.jsx)(w.a,{style:R.join,icon:"fluent:chat-arrow-back-16-regular",onClick:function(){f(!0)}})]}),Object(k.jsx)(Re.a,{title:"Create room",closable:!1,visible:c,footer:[Object(k.jsx)(Y.a,{onClick:D,children:"Cancel"}),Object(k.jsx)(Y.a,{type:"primary",onClick:function(){t(v),D()},children:"Create"},"submit")],children:Object(k.jsxs)($.a,{name:"control-hooks",children:[Object(k.jsx)($.a.Item,{label:"Room name",name:"roomName",rules:[{required:!0}],onChange:function(e){return O((function(t){return Object(s.a)(Object(s.a)({},t),{},{name:e.target.value})}))},children:Object(k.jsx)(K.a,{})}),Object(k.jsx)($.a.Item,{label:"Description",name:"description",rules:[{required:!0}],onChange:function(e){return O((function(t){return Object(s.a)(Object(s.a)({},t),{},{description:e.target.value})}))},children:Object(k.jsx)(K.a,{})}),Object(k.jsx)(Z.a,{checkedChildren:"Private",unCheckedChildren:"Public",onChange:function(e){return O((function(e){return Object(s.a)(Object(s.a)({},e),{},{isPrivate:!x})}))}})]})}),Object(k.jsx)(Re.a,{title:"Join room",closable:!1,visible:b,footer:[Object(k.jsx)(Y.a,{onClick:M,children:"Cancel"}),Object(k.jsx)(Y.a,{type:"primary",onClick:function(){n(C),M()},children:"Join"},"submit")],children:Object(k.jsx)($.a,{name:"control-hooks",children:Object(k.jsx)($.a.Item,{label:"Room ID",name:"roomShortId",rules:[{required:!0}],onChange:function(e){return S(e.target.value)},children:Object(k.jsx)(K.a,{})})})})]})},Be=function(){return Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"95%",fontSize:"1.5em",backgroundColor:"rgb(227, 246, 252)",margin:"auto 20px",borderRadius:"14px"},children:Object(k.jsxs)("h1",{children:["pick a room to start ",Object(k.jsx)("br",{})," or create a new room"]})})},Le=function(e){var t=e.rooms,n=e.joinRoom,r=e.leaveRoom,i=e.switchRoom,a=e.roomManage,s=e.currentRoom,c=e.handleSearchRoom,l=e.lastMsgRoomId,d=e.setLastMsgRoomId,u=Object(o.useState)([]),b=Object(p.a)(u,2),f=b[0],j=b[1],m={inputSection:{display:"flex",justifyContent:"space-between",alignItems:"center"},input:{width:"100%",height:"40px",borderRadius:"10px",borderColor:"#6588DE"},searchRoom:{width:"100%",height:"102%",overflowY:"hidden"},add:{color:"#6588DE",fontSize:"60px",margin:"2.5px 5px",cursor:"pointer"}};return Object(k.jsxs)("div",{style:m.searchRoom,children:[Object(k.jsxs)("div",{style:m.inputSection,children:[Object(k.jsx)(w.a,{style:m.add,icon:"bx:bx-arrow-back",onClick:function(){return c()}}),Object(k.jsx)("input",{style:m.input,placeholder:"search room",onChange:function(e){var n=e.target.value;j(t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.lastMessage.toLowerCase().includes(n.toLowerCase())})))}})]}),Object(k.jsx)(_e,{currentRoom:s,rooms:f,joinRoom:n,leaveRoom:r,switchRoom:i,roomManage:a,handleSearchRoom:c,lastMsgRoomId:l,setLastMsgRoomId:d})]})};n(205).config();var Te=f.a.connect("https://chat-cord-api.herokuapp.com");var Pe=function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,2),n=(t[0],t[1]),r=Object(o.useState)(!1),i=Object(p.a)(r,2),a=i[0],c=i[1],b=Object(o.useState)(!0),f=Object(p.a)(b,2),m=f[0],x=f[1],g=Object(o.useState)(!1),h=Object(p.a)(g,2),v=h[0],O=h[1],y=Object(o.useState)(null),w=Object(p.a)(y,2),I=w[0],C=w[1],S=Object(o.useState)(!1),R=Object(p.a)(S,2),D=(R[0],R[1]),M=Object(o.useState)(null),F=Object(p.a)(M,2),z=F[0],E=F[1],_=Object(o.useState)({roomId:"",msg:"",date:null}),A=Object(p.a)(_,2),B=A[0],L=A[1],T=Object(o.useState)([]),P=Object(p.a)(T,2),W=P[0],U=P[1],N=Object(o.useState)(""),q=Object(p.a)(N,2),V=q[0],H=(q[1],Object(o.useState)(!1)),G=Object(p.a)(H,2),K=G[0],Q=G[1],J=Object(o.useState)({roomId:"",msg:"",date:null}),$=Object(p.a)(J,2),Z=$[0],Y=$[1],X={left:{width:Object(j.useMediaQuery)({maxWidth:1300})?"15em":"25%",float:"left",boxSizing:"border-box"},right:{width:"100%",height:"100%",float:"right",position:"relative",flexGrow:1},userInformation:{display:"flex",alignItems:"center",borderBottom:"2px solid #4a336e",padding:"20px",fontSize:"large",marginBottom:"10px"}},ee=function(){var e=Object(u.a)(l.a.mark((function e(t){var o,r,i,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he(t);case 3:return o=e.sent,localStorage.setItem("token",o.data.token),c(null===o.data.token),e.next=8,De();case 8:if(200!==(r=e.sent).status){e.next=18;break}return localStorage.setItem("userId",r.data.msg._id),C(r.data.msg),Te.emit("login",r.data.msg._id),e.next=15,ne();case 15:200===(r=e.sent).status&&(i=Object(d.a)(r.data.msg.sort((function(e,t){return e.lastMessageDate<t.lastMessageDate?1:-1}))),U(i)),Te.once("connected",(function(){return n(!0)}));case 18:O(!0),te.a.success("logged in successfully"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),te.a.error("".concat(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.msg));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t);case 2:200===(n=e.sent).status?(Te.emit("leaveRoom",t),te.a.success("left room successfully"),-1!==(o=W.findIndex((function(e){return e._id===t})))&&(W.splice(o,1),(r=Object(d.a)(W)).every((function(e,n){return e._id!==t||(r.splice(n,1),!1)})),E(null),ue.setCurrentRoom(null))):te.a.error("".concat(n.response.data.msg));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Te.emit("kick",t,n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){Te.on("kicked",(function(e,t){if(localStorage.getItem("userId")===e){te.a.error("you have been kicked from this room"),Te.emit("leaveRoom",t);var n=W.findIndex((function(e){return e._id===t}));if(-1!==n){W.splice(n,1);var o=Object(d.a)(W);o.every((function(e,n){return e._id!==t||(o.splice(n,1),!1)})),U(o),E(null),ue.setCurrentRoom(null)}}}))}),[Te]);var se=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(t);case 3:200===(n=e.sent).status&&(-1===W.findIndex((function(e){return e.shortId===n.data.msg.shortId}))&&U([n.data.msg].concat(Object(d.a)(W))),E(n.data.msg),ue.setCurrentRoom(n.data.msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),te.a.error("".concat(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.msg));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,o,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,re(t);case 4:200===(n=e.sent).status&&(o=n.data.msg,U([o].concat(Object(d.a)(W))),E(o)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),te.a.error("".concat(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.msg));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),de=function(e){x(!0),z||Te.emit("joinRoom",null===e||void 0===e?void 0:e._id),z&&(null===e||void 0===e?void 0:e._id)!==(null===z||void 0===z?void 0:z._id)&&(Te.emit("leaveRoom",null===z||void 0===z?void 0:z._id),Te.emit("joinRoom",null===e||void 0===e?void 0:e._id)),E(Object(s.a)({},e)),ue.setCurrentRoom(Object(s.a)({},e)),Q(!1),x(!1)},pe=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("userId"),Te.emit("logout",t),localStorage.clear(),window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(e){D(!0)};return Object(o.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===localStorage.getItem("token")){e.next=18;break}return e.next=4,De();case 4:if(200!==(t=e.sent).status){e.next=16;break}return localStorage.setItem("userId",t.data.msg._id),O(!0),C(t.data.msg),Te.emit("login",t.data.msg._id),e.next=12,ne();case 12:200===(t=e.sent).status&&(o=Object(d.a)(t.data.msg.sort((function(e,t){return e.lastMessageDate<t.lastMessageDate?1:-1}))),U(o)),Te.once("connected",(function(){return n(!0)})),x(!1);case 16:e.next=19;break;case 18:x(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(o.useEffect)((function(){z&&Te.emit("joinRoom",z._id)}),[z]),Object(o.useEffect)((function(){if(B.roomId.length>0){var e,t=W.find((function(e){return e._id===B.roomId}));t&&B.roomId!==(null===(e=W[0])||void 0===e?void 0:e._id)&&U([t].concat(Object(d.a)(W.filter((function(e){return e._id!==t._id})))))}Y({roomId:B.roomId,msg:B.msg,date:B.date})}),[B]),Object(k.jsx)("div",{className:"App",children:m?Object(k.jsx)(Ie,{}):v?Object(k.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:Object(k.jsxs)("div",{style:{height:"100%",display:"flex"},children:[Object(k.jsxs)("div",{style:X.left,children:[Object(k.jsx)(ze,{user:I,logout:pe}),K&&Object(k.jsx)(Le,{currentRoom:z,rooms:W,joinRoom:le,leaveRoom:oe,switchRoom:de,roomManage:be,handleSearchRoom:Q,lastMsgRoomId:Z,setLastMsgRoomId:Y}),!K&&Object(k.jsx)(Ae,{joinRoom:le,findRoom:se,handleSearchRoom:Q}),!K&&Object(k.jsx)(_e,{currentRoom:z,rooms:W,joinRoom:le,lastMsgRoomId:Z,setLastMsgRoomId:Y,leaveRoom:oe,switchRoom:de,roomManage:be})]}),z?Object(k.jsx)("div",{style:X.right,children:Object(k.jsx)(me,{socket:Te,currentRoom:z,setLastMsgRoomId:L,leave:oe,kickUser:ie})}):Object(k.jsx)(Be,{})]})}):Object(k.jsx)(we,{message:V,logIn:ee,invalid:a,errorToggle:c})})};a.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(Pe,{})}),document.getElementById("root"))}},[[448,1,2]]]);
//# sourceMappingURL=main.53649238.chunk.js.map